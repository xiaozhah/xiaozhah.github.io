<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>C++ and VS</title>
    <url>/2018/07/29/C++%20and%20VS/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h1 id="VSçŸ¥è¯†"><a href="#VSçŸ¥è¯†" class="headerlink" title="VSçŸ¥è¯†"></a>VSçŸ¥è¯†</h1><h2 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h2><p><kbd>Ctrl-K</kbd> + <kbd>Ctrl-C</kbd> æ³¨é‡Šä¸€æ®µé€‰æ‹©ä»£ç <br><kbd>Ctrl-K</kbd> + <kbd>Ctrl-U</kbd> å–æ¶ˆä¸€æ®µé€‰æ‹©ä»£ç çš„æ³¨é‡Š<br><kbd>Ctrl-K</kbd> + <kbd>Ctrl-D</kbd> æ ¼å¼åŒ–æ•´ç¯‡ä»£ç </p>
<a id="more"></a>
<p>ä¸ºè§£å†³æ–¹æ¡ˆåˆ›å»ºç›®å½•åé‚£ä¹ˆæ ¹ç›®å½•åŒ…å«</p>
<ul>
<li>.sln</li>
<li>.db</li>
<li>gitæ–‡ä»¶å¤¹</li>
<li><p>solutionæ–‡ä»¶å¤¹: ä¸å·¥ç¨‹åŒå, æ”¾æºä»£ç .</p>
</li>
<li><p>ä»¥åŠx64æ–‡ä»¶å¤¹ï¼Œç”¨äºæ”¾ç¼–è¯‘å‡ºæ¥çš„é¡¹ç›®.</p>
</li>
</ul>
<p>åœ¨solutionæ–‡ä»¶å¤¹ä¸­, æ¯”å¦‚é¡¹ç›®åæ˜¯test, é‚£ä¹ˆæºä»£ç å°±åœ¨./test/test/é‡Œé¢, ç¬¬ä¸€ä¸ªtestæŒ‡çš„æ˜¯è§£å†³æ–¹æ¡ˆç›®å½•, ç¬¬äºŒä¸ªå°±æ˜¯é¡¹ç›®å. åŒ…å«</p>
<ul>
<li>æ‰€æœ‰çš„æºä»£ç , .cppå’Œ.hç­‰ç­‰</li>
<li>.vcxproj</li>
<li>.vcxproj.filters</li>
<li><p>.vcxproj.user</p>
</li>
<li><p>è¿™ä¹Ÿæ˜¯é»˜è®¤çš„è¾“å…¥è¾“å‡ºçš„æ ¹ç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç¨‹åºä¸­æ‰“å¼€æˆ–æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåªç»™æ–‡ä»¶åçš„è¯ï¼Œå°±ä»è¿™ä¸ªç›®å½•æ‰“å¼€.</p>
</li>
</ul>
<h2 id="ç–‘é—®"><a href="#ç–‘é—®" class="headerlink" title="ç–‘é—®"></a>ç–‘é—®</h2><h3 id="ä¸ºä»€ä¹ˆé¡¹ç›®æ€»æ˜¯è®©æˆ‘ä»¬ç¼–è¯‘"><a href="#ä¸ºä»€ä¹ˆé¡¹ç›®æ€»æ˜¯è®©æˆ‘ä»¬ç¼–è¯‘" class="headerlink" title="ä¸ºä»€ä¹ˆé¡¹ç›®æ€»æ˜¯è®©æˆ‘ä»¬ç¼–è¯‘"></a>ä¸ºä»€ä¹ˆé¡¹ç›®æ€»æ˜¯è®©æˆ‘ä»¬ç¼–è¯‘</h3><p>æŸ¥çœ‹å·¥å…·-&gt;é€‰é¡¹-&gt;é¡¹ç›®å’Œè§£å†³æ–¹æ¡ˆ-&gt;MSBuildé¡¹ç›®ç”Ÿæˆè¾“å‡ºè¯¦ç»†çº§åˆ«<br><img src="/2018/07/29/C++%20and%20VS/1.png" class=""><br>å†æŠŠ è§†å›¾-&gt;è¾“å‡º ä¸­çš„å†…å®¹å¤åˆ¶åˆ°txtä¸­ å¯»æ‰¾ç±»ä¼¼è¯­å¥<br>â€œé¡¹ç›®ä¸æ˜¯æœ€æ–°çš„ï¼Œå› ä¸ºç¼ºå°‘â€¦â€<br><img src="/2018/07/29/C++%20and%20VS/2.png" class=""><br>ä¿®å¤åå¯¹è§£å†³æ–¹æ¡ˆæˆ–é¡¹ç›®é€‰æ‹©å…¨éƒ¨ç”Ÿæˆã€‚ä¹‹åè¿è¡Œå°±æ­£å¸¸äº†</p>
<p>Note:</p>
<ul>
<li><p>ä¸æ˜¯â€œMSBuildé¡¹ç›®ç”Ÿæˆæ—¥å¿—æ–‡ä»¶è¯¦ç»†çº§åˆ«â€ï¼Œé‚£ä¸ªå†…å®¹ä¸å¤Ÿä¸°å¯Œï¼Œä¼šé—æ¼ä¸€äº›</p>
</li>
<li><p>ä¿®å¤åä¸æ˜¯ç«‹å³è¿è¡Œï¼Œè€Œæ˜¯å¯¹è§£å†³æ–¹æ¡ˆæˆ–é¡¹ç›®é€‰æ‹©å…¨éƒ¨ç”Ÿæˆ</p>
</li>
</ul>
<h3 id="å¦‚ä½•æŸ¥çœ‹å¯¼å…¥åˆ°ç³»ç»Ÿåº“libè·¯å¾„"><a href="#å¦‚ä½•æŸ¥çœ‹å¯¼å…¥åˆ°ç³»ç»Ÿåº“libè·¯å¾„" class="headerlink" title="å¦‚ä½•æŸ¥çœ‹å¯¼å…¥åˆ°ç³»ç»Ÿåº“libè·¯å¾„"></a>å¦‚ä½•æŸ¥çœ‹å¯¼å…¥åˆ°ç³»ç»Ÿåº“libè·¯å¾„</h3><p>å·¥ç¨‹é¡¹ç›®å±æ€§é¡µ-&gt;é…ç½®å±æ€§-&gt;VC++ç›®å½•çš„åº“ç›®å½•å¯ä»¥çœ‹åˆ°æ‰€è°ƒç”¨çš„ç³»ç»Ÿæ–‡ä»¶å¤¹è·¯å¾„<br>æŸå°ç”µè„‘ç¼ºä¹ä¸€äº›åº“ï¼ˆå› ä¸ºä¹‹å‰ä½¿ç”¨äº†å¸è½½VSçš„ä¸“é—¨å·¥å…·ï¼‰å¯¼è‡´ä¸èƒ½ç¼–è¯‘ï¼Œå› æ­¤åœ¨å¯ä»¥ç¼–è¯‘çš„è®¡ç®—æœºä¸Šä½¿ç”¨Everythingæ‰¾åˆ°ç›¸åº”çš„libï¼Œå†æ‹·è´åˆ°é‚£ä¸ªç”µè„‘</p>
<h3 id="å¦‚ä½•åœ¨VSé‡Œæ·»åŠ å¤´æ–‡ä»¶åŒ…å«è·¯å¾„"><a href="#å¦‚ä½•åœ¨VSé‡Œæ·»åŠ å¤´æ–‡ä»¶åŒ…å«è·¯å¾„" class="headerlink" title="å¦‚ä½•åœ¨VSé‡Œæ·»åŠ å¤´æ–‡ä»¶åŒ…å«è·¯å¾„"></a>å¦‚ä½•åœ¨VSé‡Œæ·»åŠ å¤´æ–‡ä»¶åŒ…å«è·¯å¾„</h3><p>é¡¹ç›®-&gt;å±æ€§-&gt;C++-&gt;é™„åŠ åŒ…è·¯å¾„</p>
<h1 id="C-çŸ¥è¯†"><a href="#C-çŸ¥è¯†" class="headerlink" title="C++çŸ¥è¯†"></a>C++çŸ¥è¯†</h1><h2 id="çŸ¥è¯†"><a href="#çŸ¥è¯†" class="headerlink" title="çŸ¥è¯†"></a>çŸ¥è¯†</h2><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>C++å†…éƒ¨å˜é‡è¿ç»­å­˜å‚¨ï¼Œæ„å‘³ç€å…ˆå®šä¹‰äº†aæ•°ç»„a[100]åå®šä¹‰äº†bï¼Œé‚£ä¹ˆå¦‚æœa[105]åŸå…ˆæ˜¯æœªå®šä¹‰çš„ ä½†æ˜¯å½“æŠŠbç½®0åï¼Œa[105]çš„å€¼ä¹Ÿä¼šè·Ÿç€æ”¹å˜ï¼Œå› ä¸ºa[105]åœ°å€å¯èƒ½å°±æ˜¯bçš„åœ°å€</p>
<h3 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h3><p>åˆå§‹åŒ–aæŒ‡å‘æ•´å‹æ•°ç»„<br><code>int* a = new int[5];</code></p>
<p>åˆå§‹åŒ–aæŒ‡å‘5è¿™ä¸ªæ•´å‹<br><code>int* a = new int(5);</code></p>
<h3 id="æ‹·è´"><a href="#æ‹·è´" class="headerlink" title="æ‹·è´"></a>æ‹·è´</h3><h4 id="æ‹·è´æ•°ç»„è‡³å¦ä¸€ä¸ªæ•°ç»„-æ•°ç»„å…ƒç´ ä¸ºNä¸ª"><a href="#æ‹·è´æ•°ç»„è‡³å¦ä¸€ä¸ªæ•°ç»„-æ•°ç»„å…ƒç´ ä¸ºNä¸ª" class="headerlink" title="æ‹·è´æ•°ç»„è‡³å¦ä¸€ä¸ªæ•°ç»„(æ•°ç»„å…ƒç´ ä¸ºNä¸ª)"></a>æ‹·è´æ•°ç»„è‡³å¦ä¸€ä¸ªæ•°ç»„(æ•°ç»„å…ƒç´ ä¸ºNä¸ª)</h4><p>æ‹·è´æ•°ç»„aè‡³æ•°ç»„bï¼š<code>memcpy(b, a, sizeof(float)*N);</code><br>æ‹·è´æ•°ç»„aè‡³å‘é‡bï¼š<code>memcpy(&amp;b[0], a, sizeof(float)*N);</code><br>æ‹·è´å‘é‡aè‡³å‘é‡bï¼š<code>memcpy(&amp;b[0], &amp;a[0], sizeof(float)*N);</code></p>
<h4 id="æ‹·è´äºŒç»´æ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼ˆNåˆ—ï¼‰è‡³å‘é‡bï¼ˆNä¸ªå…ƒç´ ï¼‰"><a href="#æ‹·è´äºŒç»´æ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼ˆNåˆ—ï¼‰è‡³å‘é‡bï¼ˆNä¸ªå…ƒç´ ï¼‰" class="headerlink" title="æ‹·è´äºŒç»´æ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼ˆNåˆ—ï¼‰è‡³å‘é‡bï¼ˆNä¸ªå…ƒç´ ï¼‰"></a>æ‹·è´äºŒç»´æ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼ˆNåˆ—ï¼‰è‡³å‘é‡bï¼ˆNä¸ªå…ƒç´ ï¼‰</h4><p>æ‹·è´äºŒç»´æ•°ç»„çš„ç¬¬ä¸€è¡Œè‡³å‘é‡bï¼š<code>memcpy(&amp;b[0], a, sizeof(float)*N);</code><br>æ‹·è´äºŒç»´æ•°ç»„çš„ç¬¬äºŒè¡Œè‡³å‘é‡bï¼š<code>memcpy(&amp;b[0], a+1 sizeof(float)*N);</code><br>æ‹·è´äºŒç»´æ•°ç»„çš„ç¬¬äºŒè¡Œç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹çš„Nä¸ªå…ƒç´ è‡³å‘é‡bï¼š<br><code>memcpy(&amp;b[0], *(a+1)+2,sizeof(float)*N);</code><br>æˆ–è€…<code>memcpy(&amp;b[0], &amp;a[1][2],sizeof(float)*N);</code><br>å› ä¸º<code>&amp;a[i]=a+i</code>ï¼Œ<code>&amp;a[i][j]=*(a+i)+j</code>,åœ¨æŒ‡å‘è¡Œçš„æŒ‡é’ˆå‰åŠ  * ,è½¬æ¢ä¸ºæŒ‡å‘åˆ—çš„æŒ‡é’ˆï¼›åœ¨æŒ‡å‘åˆ—çš„æŒ‡é’ˆå‰åŠ  &amp; ,è½¬æ¢ä¸ºæŒ‡å‘è¡Œçš„æŒ‡é’ˆï¼›</p>
<h3 id="æµ‹é‡æ—¶é—´"><a href="#æµ‹é‡æ—¶é—´" class="headerlink" title="æµ‹é‡æ—¶é—´"></a>æµ‹é‡æ—¶é—´</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"time.h"</span></span></span><br><span class="line"><span class="keyword">clock_t</span> start, end;</span><br><span class="line">start = clock();</span><br><span class="line"><span class="comment">//code here</span></span><br><span class="line">end = clock();</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Elapsed time:%f secs.\n"</span>, (<span class="keyword">double</span>)(end - start) / CLOCKS_PER_SEC);</span><br></pre></td></tr></table></figure>
<h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><ul>
<li>sprintf</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sprintf</span><span class="params">( <span class="keyword">char</span> *buffer, <span class="keyword">const</span> <span class="keyword">char</span> *format, [ argument] â€¦ )</span><span class="comment">//æŠŠæ ¼å¼åŒ–çš„æ•°æ®å†™å…¥æŸä¸ªå­—ç¬¦ä¸²ç¼“å†²åŒºbufferä¸­</span></span></span><br><span class="line"><span class="function"><span class="title">sprintf</span><span class="params">(szLstFile,<span class="string">"%s\\lists\\phoneme.lst"</span>,g_LibCfg.szPrjDir)</span></span>;<span class="comment">//æŠŠ g_LibCfg.szPrjDir æŒ‰ç…§ "%s\\lists\\phoneme.lst"æ ¼å¼è½¬åŒ–ï¼Œå¹¶å­˜åœ¨ szLstFile ä¸­</span></span><br></pre></td></tr></table></figure>
<ul>
<li>sscanf<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sscanf</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *buffer,<span class="keyword">const</span> <span class="keyword">char</span> *format,[argument ]...)</span></span>;  <span class="comment">//sscanfä¼šä»bufferé‡Œè¯»è¿›æ•°æ®ï¼Œä¾ç…§formatçš„æ ¼å¼å°†æ•°æ®å†™å…¥åˆ°argumenté‡Œã€‚</span></span><br></pre></td></tr></table></figure></li>
<li>fgets<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">fgets</span><span class="params">(<span class="keyword">char</span> *buf, <span class="keyword">int</span> bufsize, FILE *stream)</span></span>;<span class="comment">//ä»æ–‡ä»¶ç»“æ„ä½“æŒ‡é’ˆstreamä¸­è¯»å–æ•°æ®ï¼Œæ¯æ¬¡è¯»å–ä¸€è¡Œã€‚è¯»å–çš„æ•°æ®ä¿å­˜åœ¨bufæŒ‡å‘çš„å­—ç¬¦æ•°ç»„ä¸­ï¼Œæ¯æ¬¡æœ€å¤šè¯»å–bufsize-1ä¸ªå­—ç¬¦ï¼ˆç¬¬bufsizeä¸ªå­—ç¬¦èµ‹'\0'ï¼‰</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>fgetsè¿”å›å€¼</li>
</ul>
<ol>
<li>æˆåŠŸï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°buf</li>
<li>åœ¨è¯»å­—ç¬¦æ—¶é‡åˆ°end-of-fileï¼Œåˆ™eofæŒ‡ç¤ºå™¨è¢«è®¾ç½®ï¼Œå¦‚æœè¿˜æ²¡è¯»å…¥ä»»ä½•å­—ç¬¦å°±é‡åˆ°è¿™ç§æƒ…å†µï¼Œåˆ™bufä¿æŒåŸæ¥çš„å†…å®¹ï¼Œè¿”å›NULL</li>
<li>å¦‚æœå‘ç”Ÿè¯»å…¥é”™è¯¯ï¼ŒerroræŒ‡ç¤ºå™¨è¢«è®¾ç½®ï¼Œè¿”å›NULLï¼Œbufçš„å€¼å¯èƒ½è¢«æ”¹å˜</li>
</ol>
<ul>
<li>fscanf<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fscanf</span><span class="params">(FILE*stream, constchar*format, [argument...])</span></span>; <span class="comment">//å…¶åŠŸèƒ½ä¸ºæ ¹æ®æ•°æ®æ ¼å¼(format)ä»è¾“å…¥æµ(stream)ä¸­å†™å…¥æ•°æ®(argument)ï¼›ä¸fgetsçš„å·®åˆ«åœ¨äºï¼šfscanfé‡åˆ°ç©ºæ ¼å’Œæ¢è¡Œæ—¶ç»“æŸï¼Œæ³¨æ„ç©ºæ ¼æ—¶ä¹Ÿç»“æŸï¼Œfgetsé‡åˆ°ç©ºæ ¼ä¸ç»“æŸã€‚</span></span><br><span class="line"><span class="built_in">fscanf</span>(fpPhone,<span class="string">" %s %s"</span>,szTmpStr,szTmpStr);<span class="comment">//åªä¼šå°†ç¬¬äºŒä¸ªå­—ç¬¦ä¸²èµ‹å€¼ç»™szTmpStr</span></span><br></pre></td></tr></table></figure></li>
<li>fread<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">size_t</span> <span class="title">fread</span> <span class="params">( <span class="keyword">void</span> * ptr, <span class="keyword">size_t</span> size, <span class="keyword">size_t</span> count, FILE * stream )</span></span>;<span class="comment">//ä»æ–‡ä»¶æµæŒ‡é’ˆstreamå¤„è¯»countä¸ªæ•°æ®ï¼Œæ¯ä¸ªæ•°æ®å¤§å°sizeä¸ªå­—èŠ‚ï¼Œæ”¾åˆ°pträ¸­å­˜å‚¨ã€‚</span></span><br></pre></td></tr></table></figure></li>
<li>fwrite<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">size_t</span> <span class="title">fwrite</span> <span class="params">( <span class="keyword">const</span> <span class="keyword">void</span> * ptr, <span class="keyword">size_t</span> size, <span class="keyword">size_t</span> count, FILE * stream )</span><span class="comment">//fwrite()ç”¨æ¥å°†æ•°æ®å†™å…¥æ–‡ä»¶æµä¸­,å°†ptræŒ‡å‘çš„æ•°æ®åœ°å€çš„å†…å®¹è¾“å‡ºè‡³streamæ–‡ä»¶æŒ‡é’ˆæŒ‡å‘çš„æ–‡ä»¶</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>memset<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">memset</span><span class="params">(<span class="keyword">void</span> *s, <span class="keyword">int</span> ch, <span class="keyword">size_t</span> n)</span></span>;<span class="comment">//å‡½æ•°è§£é‡Šï¼šå°†sä¸­å½“å‰ä½ç½®åé¢çš„nä¸ªå­—èŠ‚ï¼ˆtypedef unsigned int size_t ï¼‰ç”¨ ch æ›¿æ¢å¹¶è¿”å› s</span></span><br><span class="line"><span class="comment">//memsetï¼šä½œç”¨æ˜¯åœ¨ä¸€æ®µå†…å­˜å—ä¸­å¡«å……æŸä¸ªç»™å®šçš„å€¼ï¼Œå®ƒæ˜¯å¯¹è¾ƒå¤§çš„ç»“æ„ä½“æˆ–æ•°ç»„è¿›è¡Œæ¸…é›¶æ“ä½œçš„ä¸€ç§æœ€å¿«æ–¹æ³•</span></span><br></pre></td></tr></table></figure></li>
<li>strstr<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">char</span> *<span class="title">strstr</span><span class="params">(<span class="keyword">char</span> *str1, <span class="keyword">const</span> <span class="keyword">char</span> *str2)</span></span>;<span class="comment">//è¿”å›å€¼ï¼›è‹¥str2æ˜¯str1çš„å­ä¸²ï¼Œåˆ™è¿”å›str2åœ¨str1çš„é¦–æ¬¡å‡ºç°çš„åœ°å€ï¼›å¦‚æœstr2ä¸æ˜¯str1çš„å­ä¸²ï¼Œåˆ™è¿”å›NULLã€‚</span></span><br></pre></td></tr></table></figure></li>
<li>strncpy<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strncpy</span><span class="params">(<span class="keyword">char</span> *dest, <span class="keyword">const</span> <span class="keyword">char</span> *src, <span class="keyword">int</span> n)</span><span class="comment">//æŠŠsrcæ‰€æŒ‡å‘çš„å­—ç¬¦ä¸²ä¸­ä»¥srcåœ°å€å¼€å§‹çš„å‰nä¸ªå­—èŠ‚å¤åˆ¶åˆ°destæ‰€æŒ‡çš„æ•°ç»„ä¸­ï¼Œå¹¶è¿”å›destã€‚</span></span></span><br></pre></td></tr></table></figure></li>
<li>strcpy<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strcpy</span><span class="params">(<span class="keyword">char</span> *dest, <span class="keyword">const</span> <span class="keyword">char</span> *src)</span></span>;<span class="comment">//strcpy()ä¼šå°†å‚æ•°src å­—ç¬¦ä¸²æ‹·è´è‡³å‚æ•°dest æ‰€æŒ‡çš„åœ°å€ã€‚</span></span><br></pre></td></tr></table></figure></li>
<li>strcmp<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">strcmp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s1,<span class="keyword">const</span> <span class="keyword">char</span> *s2)</span></span>;</span><br><span class="line"><span class="comment">//å½“s1&lt;s2æ—¶ï¼Œè¿”å›ä¸ºè´Ÿæ•°</span></span><br><span class="line"><span class="comment">//å½“s1=s2æ—¶ï¼Œè¿”å›å€¼= 0</span></span><br><span class="line"><span class="comment">//å½“s1&gt;s2æ—¶ï¼Œè¿”å›æ­£æ•°</span></span><br></pre></td></tr></table></figure></li>
<li>memcpy<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> * <span class="title">memcpy</span> <span class="params">( <span class="keyword">void</span> * destination, <span class="keyword">const</span> <span class="keyword">void</span> * source, <span class="keyword">size_t</span> num )</span></span>;<span class="comment">//ä»sourceå¤„è¯»numä¸ªå­—èŠ‚æ”¾åˆ°destinationæŒ‡å‘çš„å†…å­˜ä¸­å»ã€‚</span></span><br></pre></td></tr></table></figure></li>
<li>assert<br>assertå®èƒ½æµ‹è¯•ä¼ å…¥è¡¨è¾¾å¼çš„çœŸå‡å€¼ï¼Œå½“è¡¨è¾¾å¼ä¸ºçœŸ(true)ï¼Œåˆ™ä¸ä¼šæœ‰ä»»ä½•ååº”ï¼›å½“è¡¨è¾¾å¼ä¸ºå‡(false)ï¼Œåˆ™å‡½æ•°å°†è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶ä¸­æ–­ç¨‹åºçš„æ‰§è¡Œã€‚</li>
</ul>
<h2 id="ç–‘é—®-1"><a href="#ç–‘é—®-1" class="headerlink" title="ç–‘é—®"></a>ç–‘é—®</h2><h3 id="å¦‚ä½•åœ¨sprintfå‡½æ•°ä¸­ä½¿ç”¨stringï¼Ÿ"><a href="#å¦‚ä½•åœ¨sprintfå‡½æ•°ä¸­ä½¿ç”¨stringï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨sprintfå‡½æ•°ä¸­ä½¿ç”¨stringï¼Ÿ"></a>å¦‚ä½•åœ¨sprintfå‡½æ•°ä¸­ä½¿ç”¨stringï¼Ÿ</h3><p>sprintfæ˜¯C++ç»§æ‰¿è‡ªCè¯­è¨€çš„å‡½æ•°ï¼Œæ— æ³•ç›´æ¥æ”¯æŒstringç±»å‹ï¼Œæ‰€ä»¥è¦å…ˆæŠŠstringç±»å‹è½¬ä¸ºåŸºç¡€ç±»å‹ï¼Œä¹Ÿå°±æ˜¯char*ã€‚<br>è¿™é‡Œéœ€è¦ä½¿ç”¨stringç±»çš„æˆå‘˜å‡½æ•°c_str();è¯¥æˆå‘˜å‡½æ•°åŠŸèƒ½ä¸ºï¼Œå°†stringçš„å†…å®¹è½¬ä¸ºCè¯­è¨€çš„å­—ç¬¦æ•°ç»„è¡¨è¾¾å½¢å¼ã€‚<br>æ‰€ä»¥ç”¨sprintfå°†stringå¯¹è±¡strï¼Œè¾“å‡ºçš„char[]æ•°ç»„arrayä¸­çš„ä»£ç å¯ä»¥å†™ä½œï¼š <code>sprintf(array, &quot;%s&quot;, str.c_str());</code><br>é™¤æ­¤å¤–ï¼Œè¿˜å¯ä»¥ç”¨strcpyå‡½æ•°ï¼Œä½¿ä»£ç æ›´ç®€å•ï¼š<code>strcpy(array, str.c_str());</code></p>
<h2 id="å®é™…ä¾‹å­"><a href="#å®é™…ä¾‹å­" class="headerlink" title="å®é™…ä¾‹å­"></a>å®é™…ä¾‹å­</h2><h3 id="å»ºç«‹äºŒç»´æ•°ç»„"><a href="#å»ºç«‹äºŒç»´æ•°ç»„" class="headerlink" title="å»ºç«‹äºŒç»´æ•°ç»„"></a>å»ºç«‹äºŒç»´æ•°ç»„</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¼€è¾Ÿå†…å­˜</span></span><br><span class="line"><span class="keyword">float</span> **ppTrgAnswer_Data = <span class="keyword">new</span> <span class="keyword">float</span>*[nTrgPhoneNum];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nTrgPhoneNum; i++)</span><br><span class="line">&#123;</span><br><span class="line">    ppTrgAnswer_Data[i] = <span class="keyword">new</span> <span class="keyword">float</span>[MAX_QUES_NUM];</span><br><span class="line">    <span class="built_in">memset</span>(ppTrgAnswer_Data[i], <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">float</span>)*MAX_QUES_NUM);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡Šæ”¾å†…å­˜</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; nTrgPhoneNum; i++)</span><br><span class="line">    <span class="keyword">delete</span>[] ppTrgAnswer_Data[i];</span><br><span class="line"><span class="keyword">delete</span>[] ppTrgAnswer_Data;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>Visual Studio</tag>
      </tags>
  </entry>
  <entry>
    <title>MacOS</title>
    <url>/2018/08/08/MacOS/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<p>æˆ‘ä»¥å‰èˆå‹å«æˆ‘æœºå™¨æ€æ‰‹ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰ç™½ç™½æµªè´¹è¿™ä¸ªç§°å·ã€‚ä»¥å‰ç”¨å®éªŒå®¤ç”µè„‘(windows)çš„æ—¶å€™ï¼Œä¸€ä¸ªæœˆé‡è£…è¿‡å››æ¬¡ï¼Œæ¯æ¬¡éƒ½èƒ½æŠŠç”µè„‘ç»™å¼„æˆè“å±ï¼Œæ— æ³•å¼€æœºã€‚ä¹‹åè£…åœ¨æˆ´å°”xps13ä¸Šçš„Ubuntuä¸€æ¬¡æ’æ‹”Uç›˜æŠŠç¬”è®°æœ¬çš„ä¸»æ¿ç»™çƒ§äº†ã€‚ã€‚ã€‚<br>åæ¥å°±æœ‰äº†è¿™å° Mac proï¼ˆ13å¯¸å¸¦Touchbarçš„ç‰ˆæœ¬ï¼‰ï¼Œçœ‹çœ‹è¿™ä¸ªç³»ç»Ÿèƒ½ä¸èƒ½ç»è¿‡èƒ½ä¸èƒ½ç»è¿‡æˆ‘çš„æ‘§æ®‹è¿˜èƒ½ä¿æŒå®Œå¥½ğŸ˜…</p>
<p>ç›®å‰æ¥çœ‹ï¼Œè‡ªä»6æœˆä¸­æ—¬å…¥æ‰‹ä»¥æ¥ï¼ŒMacä½¿ç”¨è‰¯å¥½ã€‚</p>
<a id="more"></a>
<p>ä¸è¿‡é¦–å…ˆå°±ä¼šé‡åˆ°è½¯ä»¶é—®é¢˜ï¼Œå¥½åœ¨MaxOSç»§æ‰¿Unix,Linuxä¹Ÿç»§æ‰¿äºUnixã€‚å®ƒä»¬å¾ˆå¤šå·¥å…·æ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥å¥½ç”¨çš„Linuxå·¥å…·éƒ½æœ‰Macç‰ˆæœ¬ã€‚Ubuntuç”¨apt-getåŒ…ç®¡ç†å™¨ï¼ŒMacå°±ç”¨brewï¼Œä¸€æ¨¡ä¸€æ ·ã€‚æ„Ÿè§‰å°±æ˜¯Macæ‹¥æœ‰Windowsæ˜“ç”¨çš„å›¾å½¢åŒ–æ“ä½œç³»ç»Ÿï¼Œç•Œé¢ç¾è§‚ï¼Œç¬”è®°æœ¬è½»ç›ˆï¼Œè¶…çº§è¶…çº§é™éŸ³ï¼Œåˆæœ‰Linuxå¼ºå¤§çš„å‘½ä»¤è¡Œåšåç›¾ã€‚æ‰€ä»¥ä½¿ç”¨èµ·æ¥å¾ˆèˆ’æœ</p>
<p>ä½¿ç”¨Linuxçš„è¿‡ç¨‹è§<a href="https://xiaozhah.github.io/2018/07/26/Linux/" target="_blank" rel="noopener">Linux</a>ã€‚</p>
<h2 id="ä¸‹è½½å·¥å…·"><a href="#ä¸‹è½½å·¥å…·" class="headerlink" title="ä¸‹è½½å·¥å…·"></a>ä¸‹è½½å·¥å…·</h2><p>Linuxç”¨axel, Macæœ¬æ¥æƒ³ä½¿ç”¨winebottleræˆ–Crossoveræ¥ç”¨è¿…é›·ï¼Œä½†æ˜¯åˆè¯•ä½“éªŒä¸€èˆ¬ï¼ŒIE7éƒ½æœ‰é—®é¢˜<br>åæ¥è¯•äº†Macç‰ˆæœ¬è¿…é›·ï¼Œç½‘å‹è¯´å¾ˆå·®æ²¡ä¸‹è½½ï¼Œå‡ºä¹æ„æ–™çš„å¾ˆå¥½ç”¨å‘€ï¼<br>å¯æƒœçš„æ˜¯æ²¡windowsçš„IDManä¸‹è½½ç¥å™¨ã€‚ã€‚ã€‚</p>
<h2 id="åŠå…¬è½¯ä»¶"><a href="#åŠå…¬è½¯ä»¶" class="headerlink" title="åŠå…¬è½¯ä»¶"></a>åŠå…¬è½¯ä»¶</h2><p>æœ‰å¾®è½¯çš„Office,å…¼å®¹æ€§æ²¡é—®é¢˜ï¼Œæ¯”è‹¹æœè‡ªå¸¦çš„Pageså…¼å®¹æ€§è‚¯å®šå¼ºã€‚å› ä¸ºæ–‡ç« ä¸€èˆ¬Latexå†™ï¼Œwordç­‰ç”¨çš„ç®€å•ï¼Œç›®å‰æ²¡é—®é¢˜ã€‚</p>
<h2 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h2><p>å½“ç„¶æ˜¯Chromeï¼Œå„ç§æ’ä»¶<br>æ²¹çŒ´æ’ä»¶é…åˆç™¾åº¦äº‘å°±æ˜¯å¿«</p>
<h2 id="ç»ˆç«¯"><a href="#ç»ˆç«¯" class="headerlink" title="ç»ˆç«¯"></a>ç»ˆç«¯</h2><p>é˜²æ­¢è®¿é—®è¿œç¨‹æœåŠ¡å™¨çš„SMBæœåŠ¡æ—¶åœ¨äº§ç”Ÿ.DStoreæ–‡ä»¶ï¼Œç»ˆç«¯è¾“å…¥<code>defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool TRUE</code>,è§<a href="https://support.apple.com/zh-cn/HT208209" target="_blank" rel="noopener">å®˜ç½‘</a><br>å¯ä»¥ç”¨screenåå°æ‰§è¡Œç»ˆç«¯ä»»åŠ¡<br>å¦å¤–<kbd>âŒ˜</kbd>+<kbd>D</kbd>æ˜¯ç»ˆç«¯åˆ†å±ï¼Œ<kbd>â‡§</kbd>+<kbd>âŒ˜</kbd>+<kbd>D</kbd>å…³é—­<br>ä¸è¿‡ç°åœ¨å‘ç°æ›´å¥½çš„è½¯ä»¶æ—¢å¯ä»¥åå°æ‰§è¡Œç»ˆç«¯ä»»åŠ¡ä¹Ÿå¯ä»¥ç»ˆç«¯åˆ†å±ç­‰ï¼Œé‚£å°±æ˜¯tmux</p>
<h3 id="ç¾åŒ–"><a href="#ç¾åŒ–" class="headerlink" title="ç¾åŒ–"></a>ç¾åŒ–</h3><p>ä½¿ç”¨bashç»ˆç«¯æ—¶æ‹·è´ä»£ç è‡³~/.bash_profileç„¶å<code>source ~/.bash_profile</code><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#export PS1&#x3D;&#39;\[\e[32m\][\u@\w#]\$\[\e[m\]&#39;</span><br><span class="line"></span><br><span class="line">#Make Terminal more beautiful</span><br><span class="line">export CLICOLOR&#x3D;1</span><br><span class="line">export LSCOLORS&#x3D;ExFxCxDxBxegedabagacad</span><br><span class="line"></span><br><span class="line">#Network</span><br><span class="line">alias proxy&#x3D;&quot;export http_proxy&#x3D;http:&#x2F;&#x2F;192.168.2.102:41493;export https_proxy&#x3D;http:&#x2F;&#x2F;192.168.2.102:41493&quot;</span><br><span class="line">alias unproxy&#x3D;&quot;unset proxy&quot;</span><br><span class="line">alias ip&#x3D;&quot;curl http:&#x2F;&#x2F;ip.cn&quot;</span><br><span class="line"></span><br><span class="line">#iCloud</span><br><span class="line">alias icloud&#x3D;&quot;cd ~&#x2F;Library&#x2F;Mobile\ Documents&#x2F;com~apple~CloudDocs&quot;</span><br><span class="line"></span><br><span class="line">#RepairAu</span><br><span class="line">alias repairAu&#x3D;&quot;cd &#x2F;private&#x2F;var&#x2F;folders&#x2F;jj&#x2F;bg7147vx1cqgzdzft1sn25sm0000gn&#x2F;T&#x2F;TemporaryItems&#x2F;;mkdir -p Adobe&#x2F;Audition&#x2F;10.0;cd -&quot;</span><br><span class="line"></span><br><span class="line">#Run tf environment</span><br><span class="line">alias tf&#x3D;&quot;source activate tensorflow&quot;</span><br><span class="line">alias mx&#x3D;&quot;source activate gluon&quot;</span><br><span class="line"></span><br><span class="line"># added by Anaconda2 installer</span><br><span class="line">export PATH&#x3D;&quot;&#x2F;Users&#x2F;xzhou&#x2F;anaconda2&#x2F;bin:$PATH&quot;</span><br></pre></td></tr></table></figure><br>å®‰è£…zshåï¼Œä»¥ä¸Šä»£ç æ‹·è´åˆ°~/.zshrcæ–‡ä»¶ç„¶å<code>source ~/.zshrc</code></p>
]]></content>
      <categories>
        <category>å¸¸è§æŒ‡ä»¤ä»¥åŠç”¨æ³•å¤‡å¿˜å½•</category>
      </categories>
      <tags>
        <tag>Apple</tag>
        <tag>Mac</tag>
        <tag>Unix</tag>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>Mathematica</title>
    <url>/2018/07/27/Mathematica/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h1 id="è®¾ç½®é—®é¢˜"><a href="#è®¾ç½®é—®é¢˜" class="headerlink" title="è®¾ç½®é—®é¢˜"></a>è®¾ç½®é—®é¢˜</h1><h2 id="æ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢çš„æœºå™¨å¯¼å‡ºå›¾åƒ"><a href="#æ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢çš„æœºå™¨å¯¼å‡ºå›¾åƒ" class="headerlink" title="æ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢çš„æœºå™¨å¯¼å‡ºå›¾åƒ"></a>æ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢çš„æœºå™¨å¯¼å‡ºå›¾åƒ</h2><p>è®¡ç®—æœºæ˜¯LinuxæœåŠ¡å™¨, æ— å›¾å½¢åŒ–ç•Œé¢<br>é“¾æ¥<a href="https://mathematica.stackexchange.com/questions/157842/how-to-save-image-or-graphics-in-terminal" target="_blank" rel="noopener">How to save Image or Graphics in Terminal?</a></p>
<p><code>sudo apt-get install xvfb
xvfb-run wolfram</code><br>æ­¤æ—¶è¿è¡Œè¿™ä¸ªä»£ç å°±æ­£å¸¸äº†</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">p=<span class="keyword">Graphics</span>@<span class="keyword">Circle</span>[];</span><br><span class="line"><span class="keyword">Export</span>[<span class="string">"test.jpg"</span>,p];</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="çŠ¶æ€æ æ˜¾ç¤ºæ—¶é—´"><a href="#çŠ¶æ€æ æ˜¾ç¤ºæ—¶é—´" class="headerlink" title="çŠ¶æ€æ æ˜¾ç¤ºæ—¶é—´"></a>çŠ¶æ€æ æ˜¾ç¤ºæ—¶é—´</h2><p>æ ¼å¼-&gt;é€‰é¡¹è®¾ç½®ï¼ˆå¿«æ·é”®Ctrl+Shift+Oï¼‰ï¼Œæ˜¾ç¤ºé€‰é¡¹å€¼é€‰æ‹©å…¨å±€åå¥½ï¼Œæœç´¢ EvaluationCompletionActionï¼Œå°†å…¶è®¾ç½®ä¸ºâ€œShowTimingâ€,ç¬”è®°æœ¬ä¸‹æ–¹çš„çŠ¶æ€æ å°±ä¼šæ˜¾ç¤ºæ¯æ¬¡è¿è¡Œä»£ç çš„æ¶ˆè€—æ—¶é—´äº†ã€‚</p>
<p>å½“ç”¨åˆ°GPUå¹¶ä¸”æ‰§è¡Œwolframscriptçš„è¯­æ³•æ˜¯ï¼š<br><code>CUDA_VISIBLE_DEVICES=1 xvfb-run wolframscript -file test.wl</code></p>
<h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><h2 id="åŸå­è¡¨è¾¾å¼ä¸èƒ½æ›¿æ¢å¤´éƒ¨"><a href="#åŸå­è¡¨è¾¾å¼ä¸èƒ½æ›¿æ¢å¤´éƒ¨" class="headerlink" title="åŸå­è¡¨è¾¾å¼ä¸èƒ½æ›¿æ¢å¤´éƒ¨"></a>åŸå­è¡¨è¾¾å¼ä¸èƒ½æ›¿æ¢å¤´éƒ¨</h2><p>å› ä¸º1æ˜¯åŸå­è¡¨è¾¾å¼ï¼Œæ‰€ä»¥fä¸èƒ½æ›¿æ¢æ‰å®ƒçš„å¤´éƒ¨<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Apply</span>[f, &#123;&#123;g[<span class="number">1</span>], g[a]&#125;, &#123;g[<span class="number">2</span>], g[b]&#125;, &#123;g[<span class="number">3</span>], g[c]&#125;&#125;, &#123;<span class="number">2</span>&#125;]</span><br><span class="line"><span class="comment">(* &#123;&#123;f[1], f[a]&#125;, &#123;f[2], f[b]&#125;, &#123;f[3], f[c]&#125;&#125; *)</span></span><br><span class="line"><span class="keyword">Apply</span>[f, &#123;&#123;<span class="number">1</span>, g[a]&#125;, &#123;<span class="number">2</span>, g[b]&#125;, &#123;<span class="number">3</span>, g[c]&#125;&#125;, &#123;<span class="number">2</span>&#125;]</span><br><span class="line"><span class="comment">(* &#123;&#123;1, f[a]&#125;, &#123;2, f[b]&#125;, &#123;3, f[c]&#125;&#125; *)</span></span><br></pre></td></tr></table></figure></p>
<h2 id="å‡½æ•°å¼æŒ‡ä»¤"><a href="#å‡½æ•°å¼æŒ‡ä»¤" class="headerlink" title="å‡½æ•°å¼æŒ‡ä»¤"></a>å‡½æ•°å¼æŒ‡ä»¤</h2><p>Gatherå°†ç›¸åŒå…ƒç´ æ”¶é›†åœ¨ä¸€èµ·<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Gather[&#123;&#123;a, 1&#125;, &#123;b, 1&#125;, &#123;a, 2&#125;, &#123;d, 1&#125;, &#123;b, 3&#125;&#125;, First[#1] &#x3D;&#x3D; First[#2] &amp;]</span><br><span class="line">(*or*)</span><br><span class="line">GatherBy[&#123;&#123;a, 1&#125;, &#123;b, 1&#125;, &#123;a, 2&#125;, &#123;d, 1&#125;, &#123;b, 3&#125;&#125;, First]</span><br><span class="line"></span><br><span class="line">(*&#123;&#123;&#123;a, 1&#125;, &#123;a, 2&#125;&#125;, &#123;&#123;b, 1&#125;, &#123;b, 3&#125;&#125;, &#123;&#123;d, 1&#125;&#125;&#125;*)</span><br></pre></td></tr></table></figure></p>
<h2 id="è¡¨æ ¼æ’ç‰ˆ"><a href="#è¡¨æ ¼æ’ç‰ˆ" class="headerlink" title="è¡¨æ ¼æ’ç‰ˆ"></a>è¡¨æ ¼æ’ç‰ˆ</h2><img src="/2018/07/27/Mathematica/5.png" class="">
<h3 id="æ–°ç‰ˆ"><a href="#æ–°ç‰ˆ" class="headerlink" title="æ–°ç‰ˆ"></a>æ–°ç‰ˆ</h3><p>å¯ä»¥ä¸ç”¨è®¾ç½®Partition,Gridç»„åˆèµ·æ¥ç”¨é‚£ä¹ˆéº»çƒ¦ï¼Œå› ä¸ºPartitionè¦è€ƒè™‘æ˜¯æ€ä¹ˆåˆ’åˆ†çš„<br><code>Multicolumn[Range[50], 6]</code></p>
<h3 id="æ—§ç‰ˆ"><a href="#æ—§ç‰ˆ" class="headerlink" title="æ—§ç‰ˆ"></a>æ—§ç‰ˆ</h3><p><code>Grid@Partition[Range[50], 6, 6, 1, &quot;&quot;]</code></p>
<h3 id="å°½é‡ç”¨Gridæ’ç‰ˆï¼Œè€Œä¸æ˜¯Row-Column"><a href="#å°½é‡ç”¨Gridæ’ç‰ˆï¼Œè€Œä¸æ˜¯Row-Column" class="headerlink" title="å°½é‡ç”¨Gridæ’ç‰ˆï¼Œè€Œä¸æ˜¯Row+Column"></a>å°½é‡ç”¨Gridæ’ç‰ˆï¼Œè€Œä¸æ˜¯Row+Column</h3><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Column</span>[<span class="keyword">Row</span>[#, <span class="string">"    "</span>] &amp; /@ &#123;&#123;asa, b, c&#125;, &#123;x, y, z&#125;, &#123;adaasd, <span class="number">1</span>, <span class="number">2</span>&#125;&#125;]</span><br></pre></td></tr></table></figure>
<img src="/2018/07/27/Mathematica/azgTQRCe.jpg" class="">
<p>æ˜¾å¾—éå¸¸çš„ä¸æ•´é½<br>ä½†æ˜¯Gridå°±æ²¡é—®é¢˜ å¯ä»¥å¯¹é½<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Grid</span>[&#123;&#123;asa, b, c&#125;, &#123;x, y, z&#125;, &#123;adaasd, <span class="number">1</span>, <span class="number">2</span>&#125;&#125;]</span><br></pre></td></tr></table></figure></p>
<img src="/2018/07/27/Mathematica/8gmZedoG.jpg" class="">
<h2 id="æ•°å­¦è¿ç®—"><a href="#æ•°å­¦è¿ç®—" class="headerlink" title="æ•°å­¦è¿ç®—"></a>æ•°å­¦è¿ç®—</h2><h3 id="æ±‚å‡ºæœ€å¤§-å°å…ƒç´ çš„ä½ç½®"><a href="#æ±‚å‡ºæœ€å¤§-å°å…ƒç´ çš„ä½ç½®" class="headerlink" title="æ±‚å‡ºæœ€å¤§/å°å…ƒç´ çš„ä½ç½®"></a>æ±‚å‡ºæœ€å¤§/å°å…ƒç´ çš„ä½ç½®</h3><p>æ±‚å‡ºæœ€å°å…ƒç´ çš„ä½ç½®ç”¨<code>Ordering[lis, 1]</code>;æ±‚å‡ºæœ€å¤§å…ƒç´ çš„ä½ç½®ç”¨<code>Ordering[lis, -1]</code></p>
<h3 id="çŸ©é˜µé‡å¤å†æ‹¼æ¥-ç±»ä¼¼numpyçš„tailå‡½æ•°"><a href="#çŸ©é˜µé‡å¤å†æ‹¼æ¥-ç±»ä¼¼numpyçš„tailå‡½æ•°" class="headerlink" title="çŸ©é˜µé‡å¤å†æ‹¼æ¥ ç±»ä¼¼numpyçš„tailå‡½æ•°"></a>çŸ©é˜µé‡å¤å†æ‹¼æ¥ ç±»ä¼¼numpyçš„tailå‡½æ•°</h3><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ArrayFlatten</span>[&#123;<span class="keyword">ReplicateLayer</span>[<span class="number">4</span>]@mat&#125;] // <span class="keyword">TraditionalForm</span></span><br></pre></td></tr></table></figure>
<img src="/2018/07/27/Mathematica/10.png" class="">
<h2 id="æ•°å­¦è¯æ˜"><a href="#æ•°å­¦è¯æ˜" class="headerlink" title="æ•°å­¦è¯æ˜"></a>æ•°å­¦è¯æ˜</h2><img src="/2018/07/27/Mathematica/8.png" class="">
<h2 id="å­¦ä¹ å››å…ƒæ•°"><a href="#å­¦ä¹ å››å…ƒæ•°" class="headerlink" title="å­¦ä¹ å››å…ƒæ•°"></a>å­¦ä¹ å››å…ƒæ•°</h2><p>å®šä¹‰è¿ç®—<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">quaternion[r_, x_, y_, </span><br><span class="line">  z_] := &#123;&#123;r, x, y, z&#125;, &#123;-x, r, -z, y&#125;, &#123;-y, z, r, -x&#125;, &#123;-z, -y, x, </span><br><span class="line">   r&#125;&#125;;</span><br><span class="line">quaternionQ[mat_?<span class="keyword">MatrixQ</span>] := </span><br><span class="line"> <span class="keyword">Simplify</span>[<span class="keyword">Transpose</span>[mat] + mat == <span class="number">2</span> <span class="keyword">DiagonalMatrix</span>[<span class="keyword">Diagonal</span>@mat]];</span><br><span class="line">fromquaternion[mat_?<span class="keyword">MatrixQ</span>] := </span><br><span class="line"> <span class="keyword">If</span>[quaternionQ[mat], &#123;<span class="number">1</span>, i, j, k&#125;.mat[[<span class="number">1</span>]]];</span><br></pre></td></tr></table></figure><br>è¿™é‡Œä½¿ç”¨çš„æ˜¯çŸ©é˜µå½¢å¼å®šä¹‰å››å…ƒæ•°ï¼Œæ¥æºäºè®ºæ–‡ï¼š<br><img src="/2018/07/27/Mathematica/JIvA7qEc.png" class=""><br>å¯ä»¥åŸºäºè¿™ä¸ªçŸ©é˜µå½¢å¼åšå¦‚ä¸‹è¿ç®—ï¼š<br><code>m=quaternion[3, 1, 0, 0].quaternion[0, 5, 1, -2];</code><br>å¾—åˆ°æ–°çš„å››å…ƒæ•°mï¼ˆçŸ©é˜µå½¢å¼<code>MatrixForm[m]</code>ï¼‰,<code>quaternionQ[m]</code>è¾“å‡ºçœŸã€‚<br>è‹¥å¾—åˆ°æ™®é€šå½¢å¼éœ€<code>fromquaternion[m]</code></p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ä¸¤ä¸ªå››å…ƒæ•°ç›¸ä¹˜æ˜¯<code>fromquaternion[
 quaternion[Subscript[r, 1], Subscript[x, 1], Subscript[y, 1], 
   Subscript[z, 1]].quaternion[Subscript[r, 2], Subscript[x, 2], 
   Subscript[y, 2], Subscript[z, 2]]]</code><br>å››å…ƒæ•°çš„è½¬ç½®æ˜¯fromquaternion@Transpose@quaternion[r, x, y, z]<br>å››å…ƒæ•°çš„ä¹˜æ³•è¡¨ï¼š<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">TableForm</span>[</span><br><span class="line"> <span class="keyword">Table</span>[fromquaternion[</span><br><span class="line">   quaternion @@ <span class="keyword">UnitVector</span>[<span class="number">4</span>, a].quaternion @@ <span class="keyword">UnitVector</span>[<span class="number">4</span>, b]], &#123;a,</span><br><span class="line">    <span class="number">4</span>&#125;, &#123;b, <span class="number">4</span>&#125;], <span class="keyword">TableHeadings</span> -&gt; &#123;&#123;<span class="number">1</span>, i, j, k&#125;, &#123;<span class="number">1</span>, i, j, k&#125;&#125;]</span><br></pre></td></tr></table></figure><br><img src="/2018/07/27/Mathematica/AVTefr3w.png" class=""></p>
<h1 id="æ–‡ä»¶ç®¡ç†"><a href="#æ–‡ä»¶ç®¡ç†" class="headerlink" title="æ–‡ä»¶ç®¡ç†"></a>æ–‡ä»¶ç®¡ç†</h1><h2 id="åˆ—å‡ºæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶"><a href="#åˆ—å‡ºæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶" class="headerlink" title="åˆ—å‡ºæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶"></a>åˆ—å‡ºæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶</h2><p>åˆ—å‡ºå½“å‰ç›®å½•å’Œå­ç›®å½•ä¸‹æ‰€æœ‰åç¼€ä¸ºnbçš„æ–‡ä»¶<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FileNames</span>[<span class="string">"*.nb"</span>,<span class="string">"*"</span>,<span class="keyword">Infinity</span>]</span><br></pre></td></tr></table></figure></p>
<h2 id="å¾—åˆ°BaseName"><a href="#å¾—åˆ°BaseName" class="headerlink" title="å¾—åˆ°BaseName"></a>å¾—åˆ°BaseName</h2><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FileBaseName</span>[<span class="string">"C:\\Users\\xzhou\\Desktop\\test.gif"</span>]</span><br><span class="line"><span class="comment">(*test*)</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¿å­˜mmaè¡¨è¾¾å¼"><a href="#ä¿å­˜mmaè¡¨è¾¾å¼" class="headerlink" title="ä¿å­˜mmaè¡¨è¾¾å¼"></a>ä¿å­˜mmaè¡¨è¾¾å¼</h2><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FilePrint</span> @ <span class="keyword">Export</span>[<span class="string">"test.wl"</span>, <span class="keyword">Solve</span>[x^<span class="number">2</span> + a x + <span class="number">1</span> == <span class="number">0</span>, x]]</span><br><span class="line"><span class="comment">(*Or*)</span></span><br><span class="line">file = <span class="string">"test.wl"</span></span><br><span class="line"><span class="keyword">If</span>[<span class="keyword">FileExistsQ</span>[#], <span class="keyword">DeleteFile</span>[#]]&amp; @ file;</span><br><span class="line"><span class="keyword">FilePrint</span> @ <span class="keyword">Save</span>[file, <span class="keyword">Solve</span>[x^<span class="number">2</span> + a x + <span class="number">1</span> == <span class="number">0</span>, x]];</span><br><span class="line"><span class="comment">(*Or*)</span></span><br><span class="line"><span class="comment">(*Compress is very nice for expression can't directly saved to file*)</span></span><br><span class="line"><span class="keyword">Export</span>[file, <span class="keyword">Compress</span>@<span class="keyword">Encrypt</span>[<span class="string">"my pass"</span>, <span class="string">"short text"</span>], <span class="string">"Text"</span>]</span><br></pre></td></tr></table></figure>
<h1 id="å¯è§†åŒ–"><a href="#å¯è§†åŒ–" class="headerlink" title="å¯è§†åŒ–"></a>å¯è§†åŒ–</h1><h2 id="CoordinateBoundingBoxArray"><a href="#CoordinateBoundingBoxArray" class="headerlink" title="CoordinateBoundingBoxArray"></a>CoordinateBoundingBoxArray</h2><p>è¾“å…¥è¾¹ç•Œåæ ‡ï¼Œè‡ªåŠ¨å‡åŒ€å¡«å……è¾¹ç•Œå†…çš„ç‚¹åæ ‡<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CoordinateBoundingBoxArray</span>[&#123;&#123;<span class="number">3</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">8</span>, <span class="number">2</span>&#125;&#125;];</span><br><span class="line"><span class="keyword">Graphics</span>[<span class="keyword">Point</span>[<span class="keyword">Flatten</span>[%, <span class="number">1</span>]], <span class="keyword">Frame</span> -&gt; <span class="keyword">True</span>]</span><br></pre></td></tr></table></figure></p>
<h2 id="åœ¨MatrixPlotå’ŒGraphicsä¸­æ’å…¥æ–‡å­—"><a href="#åœ¨MatrixPlotå’ŒGraphicsä¸­æ’å…¥æ–‡å­—" class="headerlink" title="åœ¨MatrixPlotå’ŒGraphicsä¸­æ’å…¥æ–‡å­—"></a>åœ¨MatrixPlotå’ŒGraphicsä¸­æ’å…¥æ–‡å­—</h2><p>è€ƒè™‘Epilogé€‰é¡¹å’ŒInsetå›¾å…ƒ</p>
<h2 id="è‡ªåŠ¨ç»™æ›²çº¿å›¾æ‰“æ ‡ç­¾"><a href="#è‡ªåŠ¨ç»™æ›²çº¿å›¾æ‰“æ ‡ç­¾" class="headerlink" title="è‡ªåŠ¨ç»™æ›²çº¿å›¾æ‰“æ ‡ç­¾"></a>è‡ªåŠ¨ç»™æ›²çº¿å›¾æ‰“æ ‡ç­¾</h2><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ListLinePlot</span>[<span class="keyword">RandomReal</span>[<span class="number">1</span>, <span class="number">26</span>] -&gt; <span class="keyword">CharacterRange</span>[<span class="string">"a"</span>, <span class="string">"z"</span>]]</span><br></pre></td></tr></table></figure>
<img src="/2018/07/27/Mathematica/1.png" class="">
<h2 id="ç»™ç‰¹å®šç‚¹ä¸Šæ ‡è®°ä¿¡æ¯"><a href="#ç»™ç‰¹å®šç‚¹ä¸Šæ ‡è®°ä¿¡æ¯" class="headerlink" title="ç»™ç‰¹å®šç‚¹ä¸Šæ ‡è®°ä¿¡æ¯"></a>ç»™ç‰¹å®šç‚¹ä¸Šæ ‡è®°ä¿¡æ¯</h2><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">color = &#123;<span class="keyword">Red</span>, <span class="keyword">Green</span>, <span class="keyword">Blue</span>&#125;;</span><br><span class="line">&#123;<span class="keyword">ListPlot</span>[&lt;|<span class="keyword">Red</span> -&gt; <span class="number">1</span>, <span class="keyword">Green</span> -&gt; <span class="number">2</span>, <span class="keyword">Blue</span> -&gt; <span class="number">3</span>|&gt;],</span><br><span class="line"> <span class="comment">(*Or*)</span></span><br><span class="line"> <span class="keyword">ListPlot</span>[<span class="keyword">Table</span>[<span class="keyword">Callout</span>[i, color[[i]]], &#123;i, <span class="number">1</span>, <span class="number">3</span>&#125;]],</span><br><span class="line"> <span class="comment">(*Or*)</span></span><br><span class="line"> <span class="keyword">ListPlot</span>[<span class="keyword">Labeled</span>[#, color[[#]]] &amp; /@ &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, </span><br><span class="line">  <span class="keyword">PlotStyle</span> -&gt; <span class="keyword">PointSize</span>[<span class="keyword">Medium</span>]]&#125;</span><br></pre></td></tr></table></figure>
<img src="/2018/07/27/Mathematica/rOqVsL2X.jpg" class="">
<h2 id="ç»™ç‰¹å®šç‚¹ä¸Šç‰¹å®šé¢œè‰²"><a href="#ç»™ç‰¹å®šç‚¹ä¸Šç‰¹å®šé¢œè‰²" class="headerlink" title="ç»™ç‰¹å®šç‚¹ä¸Šç‰¹å®šé¢œè‰²"></a>ç»™ç‰¹å®šç‚¹ä¸Šç‰¹å®šé¢œè‰²</h2><h2 id="ColorFunction"><a href="#ColorFunction" class="headerlink" title="ColorFunction"></a>ColorFunction</h2><p>æ¯”å¦‚<code>BarChart[{1, 2, 3}]</code>æ˜¯æ²¡é¢œè‰²çš„<br><code>BarChart[{1, 2, 3}, ColorFunction -&gt; &quot;Rainbow&quot;]</code>æ˜¯æœ‰é¢œè‰²çš„ï¼Œé¢œè‰²æ ¹æ®æ•°å€¼å†³å®š<br>å¤§éƒ¨åˆ†å‡½æ•°éƒ½å¯ä»¥ç”¨ColorFunctionæ¥æŒ‡å®šé¢œè‰²ï¼Œä¸è¿‡ListPlotéœ€è¦ä½¿ç”¨Joinedé€‰é¡¹æ‰æœ‰æ•ˆæœ</p>
<h2 id="Style"><a href="#Style" class="headerlink" title="Style"></a>Style</h2><p>ä½†æ˜¯æ³¨æ„åˆ°åˆšæ‰çš„ä¸Šè‰²æ˜¯æ ¹æ®æ•°å€¼è®¡ç®—å¾—åˆ°çš„ï¼Œé‚£èƒ½ä¸èƒ½æ ¹æ®æ•°å€¼åœ¨åˆ—è¡¨ä¸­çš„ç´¢å¼•æ¥ä¸Šè‰²å‘¢ï¼Ÿ<br>é»˜è®¤é€‰é¡¹æ˜¯ä¸èƒ½åŠåˆ°çš„ï¼Œåªèƒ½ç”¨Style<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ListPlot</span>[&#123;<span class="keyword">Style</span>[<span class="number">1</span>, <span class="keyword">Red</span>], <span class="keyword">Style</span>[<span class="number">2</span>, <span class="keyword">Green</span>], <span class="keyword">Style</span>[<span class="number">3</span>, <span class="keyword">Blue</span>]&#125;]</span><br><span class="line"><span class="keyword">BarChart</span>[&#123;<span class="keyword">Style</span>[<span class="number">1</span>, <span class="keyword">Red</span>], <span class="keyword">Style</span>[<span class="number">2</span>, <span class="keyword">Green</span>], <span class="keyword">Style</span>[<span class="number">3</span>, <span class="keyword">Blue</span>]&#125;]</span><br></pre></td></tr></table></figure></p>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>ä¸è¿‡å¯¹äº<code>Raster</code>å¯ä»¥å¦è¾Ÿè¹Šå¾„ï¼Œå› ä¸ºå®ƒå¯ä»¥è¿™ä¹ˆåš<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">b = &#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">Graphics</span>[<span class="keyword">Raster</span>[b, </span><br><span class="line">  <span class="keyword">ColorFunction</span> -&gt; (<span class="keyword">ColorData</span>[<span class="string">"Rainbow"</span>, <span class="keyword">Rescale</span>[#, <span class="keyword">MinMax</span>[b]]] &amp;)]]</span><br></pre></td></tr></table></figure><br>å½“ç„¶å®ƒæ”¯æŒAssociationï¼Œä¸è¿‡åªèƒ½ç”»å‡ºå¯¹åº”labelè€Œä¸æ˜¯é¢œè‰²<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ListPlot</span>[&lt;|<span class="keyword">Red</span> -&gt; <span class="number">1</span>, <span class="keyword">Green</span> -&gt; <span class="number">2</span>, <span class="keyword">Blue</span> -&gt; <span class="number">3</span>|&gt;]</span><br></pre></td></tr></table></figure></p>
<h1 id="éŸ³é¢‘å‡½æ•°"><a href="#éŸ³é¢‘å‡½æ•°" class="headerlink" title="éŸ³é¢‘å‡½æ•°"></a>éŸ³é¢‘å‡½æ•°</h1><h2 id="è¯­éŸ³åˆæˆ"><a href="#è¯­éŸ³åˆæˆ" class="headerlink" title="è¯­éŸ³åˆæˆ"></a>è¯­éŸ³åˆæˆ</h2><p>Speakå¯ä»¥è®©Mmaè¯´è¯ï¼ŒSpokenStringå¯ä»¥æ˜¾ç¤ºè¯´è¯çš„å†…å®¹</p>
<h2 id="è®©Audioè‡ªåŠ¨æ’­æ”¾å£°éŸ³ï¼š"><a href="#è®©Audioè‡ªåŠ¨æ’­æ”¾å£°éŸ³ï¼š" class="headerlink" title="è®©Audioè‡ªåŠ¨æ’­æ”¾å£°éŸ³ï¼š"></a>è®©Audioè‡ªåŠ¨æ’­æ”¾å£°éŸ³ï¼š</h2><p>æœ€åçš„å‚æ•°â€Playâ€å¯ä»¥æ¢æˆPause Stopä¹‹ç±»çš„<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">au = <span class="keyword">ExampleData</span>[&#123;<span class="string">"Sound"</span>, <span class="string">"Violin"</span>&#125;];</span><br><span class="line"><span class="keyword">Audio</span>`Internals`Execute[ <span class="keyword">Audio</span>`Internals`GetAudioManager[ <span class="keyword">Audio</span>`AudioInformation[au, <span class="string">"AudioID"</span>]], <span class="string">"Play"</span>]</span><br></pre></td></tr></table></figure></p>
<h2 id="å¾—åˆ°Audioæ–‡ä»¶æ­¤æ—¶çš„æ’­æ”¾ä½ç½®"><a href="#å¾—åˆ°Audioæ–‡ä»¶æ­¤æ—¶çš„æ’­æ”¾ä½ç½®" class="headerlink" title="å¾—åˆ°Audioæ–‡ä»¶æ­¤æ—¶çš„æ’­æ”¾ä½ç½®"></a>å¾—åˆ°Audioæ–‡ä»¶æ­¤æ—¶çš„æ’­æ”¾ä½ç½®</h2><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">id =<span class="keyword">Audio</span>`AudioInformation[song, <span class="string">"AudioID"</span>];mngr = <span class="keyword">Audio</span>`Internals`GetAudioManager[id];<span class="keyword">Dynamic</span>@<span class="keyword">Audio</span>`AudioDump`getGUIInfo[mngr, <span class="string">"AudioPosition"</span>]</span><br></pre></td></tr></table></figure>
<h2 id="è®¡ç®—éŸ³é¢‘çš„èƒ½é‡"><a href="#è®¡ç®—éŸ³é¢‘çš„èƒ½é‡" class="headerlink" title="è®¡ç®—éŸ³é¢‘çš„èƒ½é‡"></a>è®¡ç®—éŸ³é¢‘çš„èƒ½é‡</h2><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">a = <span class="keyword">ExampleData</span>[&#123;<span class="string">"Sound"</span>, <span class="string">"Violin"</span>&#125;]; <span class="keyword">AudioMeasurements</span>[a, <span class="string">"RMSAmplitude"</span>]</span><br><span class="line"><span class="comment">(*å®é™…ä¸Šåº¦é‡çš„æ˜¯å‡æ–¹è¯¯å·®a // AudioData // #^2 &amp; // Mean // Sqrt*)</span></span><br><span class="line">a = <span class="keyword">ExampleData</span>[&#123;<span class="string">"Sound"</span>, <span class="string">"Violin"</span>&#125;]; <span class="keyword">AudioMeasurements</span>[a, <span class="string">"Power"</span>]</span><br><span class="line"><span class="comment">(*å®é™…ä¸Šåº¦é‡çš„æ˜¯ a // AudioData // #^2 &amp; // Mean*)</span></span><br><span class="line">a = <span class="keyword">ExampleData</span>[&#123;<span class="string">"Sound"</span>, <span class="string">"Violin"</span>&#125;]; <span class="keyword">AudioMeasurements</span>[a, <span class="string">"Loudness"</span>]</span><br><span class="line"><span class="comment">(*å®é™…ä¸Šåº¦é‡çš„æ˜¯ a // AudioData // #^2 &amp; // Mean // #^0.67 &amp;*)</span></span><br></pre></td></tr></table></figure>
<h2 id="å¸¸ç”¨æ›¿æ¢"><a href="#å¸¸ç”¨æ›¿æ¢" class="headerlink" title="å¸¸ç”¨æ›¿æ¢"></a>å¸¸ç”¨æ›¿æ¢</h2><h3 id="Audio-Sound"><a href="#Audio-Sound" class="headerlink" title="Audio Sound"></a>Audio Sound</h3><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="comment">(*Audio-&gt;Sound*)</span></span><br><span class="line"><span class="keyword">Audio</span>@s</span><br><span class="line"><span class="comment">(*Sound-&gt;Audio*)</span></span><br><span class="line"><span class="keyword">Sound</span>[<span class="keyword">SampledSoundList</span>[<span class="keyword">First</span>@<span class="keyword">AudioData</span>[#], <span class="keyword">QuantityMagnitude</span>@<span class="keyword">AudioSampleRate</span>@#]]@a</span><br></pre></td></tr></table></figure>
<h3 id="List-Association"><a href="#List-Association" class="headerlink" title="List Association"></a>List Association</h3><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="comment">(*List-&gt;Association*)</span></span><br><span class="line"><span class="keyword">Association</span>[&#123;<span class="number">1</span> -&gt; <span class="number">2</span>, <span class="number">2</span> -&gt; <span class="number">3</span>&#125;]</span><br><span class="line"><span class="comment">(*Association-&gt;List*)</span></span><br><span class="line"><span class="keyword">Normal</span>@&lt;|<span class="number">1</span> -&gt; <span class="number">2</span>, <span class="number">2</span> -&gt; <span class="number">3</span>|&gt;</span><br></pre></td></tr></table></figure>
<h3 id="æ›¿æ¢"><a href="#æ›¿æ¢" class="headerlink" title="æ›¿æ¢"></a>æ›¿æ¢</h3><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="comment">(*å‡½æ•°å¼ &#123;1-&gt;2,2-&gt;3&#125;  -&gt;  &#123;&#123;1,2&#125;,&#123;2,3&#125;&#125;*)</span></span><br><span class="line"><span class="keyword">List</span>@@@&#123;<span class="number">1</span>-&gt;<span class="number">2</span>,<span class="number">2</span>-&gt;<span class="number">3</span>&#125;</span><br><span class="line"><span class="comment">(*è§„åˆ™å¼ è°¢è°¢xzcyrå’ŒAlexander0620æä¾›çš„è§£æ³•*)</span></span><br><span class="line">&#123;<span class="number">1</span> -&gt; <span class="number">2</span>, <span class="number">2</span> -&gt; <span class="number">3</span>&#125; /. <span class="keyword">Sequence</span>[x_ -&gt; y_] -&gt; &#123;x, y&#125;</span><br><span class="line"><span class="comment">(*æˆ–è€…*)</span></span><br><span class="line">&#123;<span class="number">1</span> -&gt; <span class="number">2</span>, <span class="number">2</span> -&gt; <span class="number">3</span>&#125; /. <span class="keyword">Rule</span> -&gt; <span class="keyword">List</span></span><br></pre></td></tr></table></figure>
<h1 id="Dataset"><a href="#Dataset" class="headerlink" title="Dataset"></a>Dataset</h1><h2 id="æ·±å…¥ã€é€€å‡ºè¿ç®—ç¬¦"><a href="#æ·±å…¥ã€é€€å‡ºè¿ç®—ç¬¦" class="headerlink" title="æ·±å…¥ã€é€€å‡ºè¿ç®—ç¬¦"></a>æ·±å…¥ã€é€€å‡ºè¿ç®—ç¬¦</h2><p>å€¼å¾—æ³¨æ„çš„æ˜¯TakeLargestByæ˜¯æ·±å…¥è¿ç®—ç¬¦ï¼ŒTakeLargestæ˜¯é€€å‡ºè¿ç®—ç¬¦ã€‚</p>
<ul>
<li>åœ¨åé¢çš„è¿ç®—ç¬¦åº”ç”¨åˆ°æ›´æ·±ä¸€å±‚ä¹‹å‰ï¼Œâ€œæ·±å…¥â€è¿ç®—ç¬¦è¢«åº”ç”¨åˆ°åŸå§‹æ•°æ®é›†ç›¸åº”çš„éƒ¨åˆ†. æ·±å…¥è¿ç®—ç¬¦çš„ç‰¹ç‚¹æ˜¯åœ¨ä½œç”¨äºæŸä¸€å±‚æ—¶ï¼Œ<strong>å®ƒä»¬ä¸ä¼šæ”¹å˜æ•°æ®æ›´æ·±å±‚æ¬¡çš„ç»“æ„</strong>. è¿™ç¡®ä¿åé¢çš„è¿ç®—ç¬¦æ“ä½œæ—¶ï¼Œå­è¡¨è¾¾å¼çš„ç»“æ„å’ŒåŸå§‹æ•°æ®é›†çš„ç›¸åº”å±‚æ¬¡æ˜¯ä¸€æ ·çš„. æœ€ç®€å•çš„æ·±å…¥è¿ç®—ç¬¦æ˜¯ Allï¼Œå®ƒé€‰å–æŸä¸ªç»™å®šå±‚çš„æ‰€æœ‰éƒ¨åˆ†ï¼Œå› æ­¤ä¸ä¼šæ”¹å˜è¯¥å±‚æ•°æ®çš„ç»“æ„</li>
<li>åœ¨æ‰€æœ‰éšåçš„è¿ç®—ç¬¦å®Œæˆå¯¹æ·±å±‚æ•°æ®çš„æ“ä½œåï¼Œâ€œé€€å‡ºâ€è¿ç®—ç¬¦è¢«åº”ç”¨.å› æ­¤<code>dataset[f,g]</code>æ˜¯<code>Query[f, g] // Normal</code>,ä¹Ÿå°±æ˜¯<code>Map[g] /* f</code> .æ·±å…¥è¿ç®—ç¬¦å¯¹åº”äºåŸå§‹æ•°æ®çš„å±‚ï¼Œè€Œé€€å‡ºè¿ç®—ç¬¦å¯¹åº”äºç»“æœçš„å±‚. å’Œæ·±å…¥è¿ç®—ç¬¦ä¸åŒï¼Œ<strong>é€€å‡ºè¿ç®—ç¬¦ä¸å¿…ä¿æŒæ‰€æ“ä½œæ•°æ®çš„ç»“æ„</strong>. <em>å¦‚æœä¸€ä¸ªè¿ç®—ç¬¦æ²¡æœ‰è¢«æ˜ç¡®æŒ‡å®šä¸ºæ·±å…¥è¿ç®—ç¬¦ï¼Œå‡å®šå…¶ä¸ºé€€å‡ºè¿ç®—ç¬¦</em></li>
</ul>
<p><code>data[SortBy[#x - #y &amp;], Total, #^2 &amp;]</code>æ˜¯æ·±å…¥ã€é€€å‡º1ã€é€€å‡º2è¿ç®—ç¬¦ï¼Œå› æ­¤å…ˆåº”ç”¨æ·±å…¥è¿ç®—ç¬¦ï¼Œå†åº”ç”¨<code>#^2 &amp;</code>ï¼Œå†åº”ç”¨<code>Total</code></p>
<h2 id="æ•°æ®åˆ†ææˆ–å¤„ç†"><a href="#æ•°æ®åˆ†ææˆ–å¤„ç†" class="headerlink" title="æ•°æ®åˆ†ææˆ–å¤„ç†"></a>æ•°æ®åˆ†ææˆ–å¤„ç†</h2><h3 id="åˆ©ç”¨SQLè¯­æ³•æŸ¥è¯¢æ•°æ®"><a href="#åˆ©ç”¨SQLè¯­æ³•æŸ¥è¯¢æ•°æ®" class="headerlink" title="åˆ©ç”¨SQLè¯­æ³•æŸ¥è¯¢æ•°æ®"></a>åˆ©ç”¨SQLè¯­æ³•æŸ¥è¯¢æ•°æ®</h3><p><code>sales = SemanticImport[&quot;ExampleData/RetailSales.tsv&quot;]</code><br><img src="/2018/07/27/Mathematica/2.png" class=""><br><code>sales[All, &quot;Sales&quot;]</code>å¾—åˆ°Salesåˆ—çš„æ‰€æœ‰æ•°æ®<br><img src="/2018/07/27/Mathematica/3.png" class=""><br>å› ä¸ºAllæ˜¯æ·±å…¥è¿ç®—ç¬¦ï¼Œå¯ä»¥å®‰å…¨çš„æ›´æ¢ä¸ºå…¶ä»–æ·±å…¥è¿ç®—ç¬¦ï¼Œå¦‚<code>sales[Mean, &quot;Sales&quot;] // N</code><br>è¿™æ—¶å€™å¦‚æœæƒ³å†é’ˆå¯¹æœˆä»½å’Œæ˜ŸæœŸå‡ æ’åºå¯ä»¥è¿™æ ·ï¼š<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">sales[<span class="keyword">GroupBy</span>[<span class="keyword">DateValue</span>[#<span class="keyword">Date</span>, <span class="string">"Month"</span>] &amp;], </span><br><span class="line"> <span class="keyword">GroupBy</span>[<span class="keyword">DateValue</span>[#<span class="keyword">Date</span>, <span class="string">"DayName"</span>] &amp;], <span class="keyword">Mean</span>, <span class="string">"Sales"</span>]</span><br></pre></td></tr></table></figure><br><img src="/2018/07/27/Mathematica/4.png" class=""></p>
<h3 id="èšç±»"><a href="#èšç±»" class="headerlink" title="èšç±»"></a>èšç±»</h3><img src="/2018/07/27/Mathematica/9.png" class="">
<p>ClusteringComponentsçš„ç¬¬äºŒä¸ªå‚æ•°æ„æ€æ˜¯èšç±»ä¸ªæ•°ä¸º3ç±»ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°†ç¬¬ä¸€å±‚æ•°æ®è§†ä¸ºä¸€ä¸ªæ ·æœ¬</p>
<h3 id="å½’ä¸€åŒ–æ•°æ®"><a href="#å½’ä¸€åŒ–æ•°æ®" class="headerlink" title="å½’ä¸€åŒ–æ•°æ®"></a>å½’ä¸€åŒ–æ•°æ®</h3><p>å¯¹æ•°æ®ï¼ˆçŸ©é˜µï¼‰åšå½’ä¸€åŒ–ï¼Œæ•°æ®æ¯è¡Œæ˜¯ä¸€ä¸ªæ ·æœ¬ï¼Œæ¯ä¸€åˆ—æ˜¯ä¸€ä¸ªç‰¹å¾<br>å‡å€¼æ–‡ä»¶å­˜å‚¨çš„ä¹Ÿæ˜¯çŸ©é˜µã€‚ç¬¬ä¸€è¡Œæ˜¯æœ€å°å€¼ï¼Œç¬¬äºŒè¡Œæ˜¯æœ€å¤§å€¼<br>è‹¥åªå¯¹çŸ©é˜µç¬¬ä¸€ç»´å½’ä¸€åŒ–<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">data1[[<span class="keyword">All</span>,  <span class="number">1</span>]] = (data1[[<span class="keyword">All</span>, <span class="number">1</span>]] - meanInput[[<span class="number">1</span>, <span class="number">1</span>]])/(meanInput[[<span class="number">2</span>, <span class="number">1</span>]] -  meanInput[[<span class="number">1</span>, <span class="number">1</span>]]);</span><br></pre></td></tr></table></figure><br>è‹¥å¯¹çŸ©é˜µçš„æ¯ä¸€ç»´åšå½’ä¸€åŒ–<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">mat = (# - meanOutput[[<span class="number">1</span>]])/meanOutput[[<span class="number">2</span>]] &amp; /@ mat;</span><br></pre></td></tr></table></figure></p>
<h1 id="å®ç”¨å°åŠŸèƒ½"><a href="#å®ç”¨å°åŠŸèƒ½" class="headerlink" title="å®ç”¨å°åŠŸèƒ½"></a>å®ç”¨å°åŠŸèƒ½</h1><h2 id="ç¾åŒ–è¾“å‡º"><a href="#ç¾åŒ–è¾“å‡º" class="headerlink" title="ç¾åŒ–è¾“å‡º"></a>ç¾åŒ–è¾“å‡º</h2><p>GeneralUtilities`PrettyFormå¯ä»¥ç¾åŒ–è¾“å‡º</p>
<h2 id="å¯¼å‡ºçŸ¢é‡å›¾"><a href="#å¯¼å‡ºçŸ¢é‡å›¾" class="headerlink" title="å¯¼å‡ºçŸ¢é‡å›¾"></a>å¯¼å‡ºçŸ¢é‡å›¾</h2><p>SVGå’Œwmfæ–‡ä»¶å¯ä»¥è¾“å‡ºçŸ¢é‡å›¾ï¼Œwmfé€‚åˆvisio</p>
<h2 id="å°†PDFä¸­çš„æ®µè½å˜æˆä¸€è¡Œï¼Œæ–¹ä¾¿è°·æ­Œç¿»è¯‘ä½¿ç”¨"><a href="#å°†PDFä¸­çš„æ®µè½å˜æˆä¸€è¡Œï¼Œæ–¹ä¾¿è°·æ­Œç¿»è¯‘ä½¿ç”¨" class="headerlink" title="å°†PDFä¸­çš„æ®µè½å˜æˆä¸€è¡Œï¼Œæ–¹ä¾¿è°·æ­Œç¿»è¯‘ä½¿ç”¨"></a>å°†PDFä¸­çš„æ®µè½å˜æˆä¸€è¡Œï¼Œæ–¹ä¾¿è°·æ­Œç¿»è¯‘ä½¿ç”¨</h2><p>å…ˆå¤åˆ¶æ®µè½å†ç²˜è´´è¿›mmaæ‰§è¡Œä»¥ä¸‹ä»£ç <br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">StringDelete</span>[text, <span class="string">"\n"</span>] // <span class="keyword">CopyToClipboard</span></span><br></pre></td></tr></table></figure><br>å½“ç„¶CopyToClipboardå¯ä»¥ç›´æ¥æ‹·è´æ•°æ®è‡³å‰ªè´´æ¿ï¼Œä¹Ÿå¯¹å¤åˆ¶å›¾ç‰‡æ˜¯æå¥½çš„</p>
<h2 id="å¯¼å‡ºæ•°å­¦å…¬å¼è‡³Stack-Exchange"><a href="#å¯¼å‡ºæ•°å­¦å…¬å¼è‡³Stack-Exchange" class="headerlink" title="å¯¼å‡ºæ•°å­¦å…¬å¼è‡³Stack Exchange"></a>å¯¼å‡ºæ•°å­¦å…¬å¼è‡³Stack Exchange</h2><p>ä¾‹å¦‚<a href="http://math.stackexchange.com" target="_blank" rel="noopener">http://math.stackexchange.com</a><br>å…¬å¼é€‰æ‹©å¤åˆ¶ä¸ºLatexæ ¼å¼ ç„¶ååœ¨å‰ååŠ ä¸Š$å°±è¡Œäº†<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$c&#x3D;\sqrt&#123;a^2-2 a b \cos (\theta )+b^2&#125;$</span><br></pre></td></tr></table></figure></p>
<h2 id="å¯¼å‡ºå«æœ‰Alphaé€šé“çš„å›¾ç‰‡"><a href="#å¯¼å‡ºå«æœ‰Alphaé€šé“çš„å›¾ç‰‡" class="headerlink" title="å¯¼å‡ºå«æœ‰Alphaé€šé“çš„å›¾ç‰‡"></a>å¯¼å‡ºå«æœ‰Alphaé€šé“çš„å›¾ç‰‡</h2><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">img//<span class="keyword">Binarize</span>//<span class="keyword">ColorReplace</span>[#,<span class="keyword">Black</span>-&gt;<span class="keyword">Red</span>]&amp;</span><br><span class="line"><span class="keyword">Export</span>[<span class="string">"img.gif"</span>,%,<span class="string">"TranspararentColor"</span>-&gt;<span class="keyword">White</span>]</span><br></pre></td></tr></table></figure>
<h2 id="å¿«é€Ÿæ˜¾ç¤ºğŸ“‚å„ç§æ–‡ä»¶åç¼€çš„æ€»å¤§å°"><a href="#å¿«é€Ÿæ˜¾ç¤ºğŸ“‚å„ç§æ–‡ä»¶åç¼€çš„æ€»å¤§å°" class="headerlink" title="å¿«é€Ÿæ˜¾ç¤ºğŸ“‚å„ç§æ–‡ä»¶åç¼€çš„æ€»å¤§å°"></a>å¿«é€Ÿæ˜¾ç¤ºğŸ“‚å„ç§æ–‡ä»¶åç¼€çš„æ€»å¤§å°</h2><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">fs=<span class="keyword">Select</span>[<span class="keyword">FileNames</span>[<span class="string">"*"</span>,<span class="string">"F:\\source"</span>,<span class="keyword">Infinity</span>],<span class="keyword">FileType</span>@#==<span class="keyword">File</span>&amp;];</span><br><span class="line"><span class="keyword">PieChart</span>[<span class="keyword">Total</span>/@<span class="keyword">GroupBy</span>[<span class="keyword">Thread</span>[fs-&gt;<span class="keyword">FileSize</span>/@fs],<span class="keyword">FileExtension</span>[#[[<span class="number">1</span>]]]&amp;-&gt;<span class="keyword">Last</span>],<span class="keyword">ChartLabels</span>-&gt;<span class="keyword">Automatic</span>]</span><br></pre></td></tr></table></figure>
<img src="/2018/07/27/Mathematica/hqvjpHWi.jpg" class="">
<h2 id="åŠ å¯†ğŸ“‚æ‰€æœ‰æ–‡ä»¶"><a href="#åŠ å¯†ğŸ“‚æ‰€æœ‰æ–‡ä»¶" class="headerlink" title="åŠ å¯†ğŸ“‚æ‰€æœ‰æ–‡ä»¶"></a>åŠ å¯†ğŸ“‚æ‰€æœ‰æ–‡ä»¶</h2><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">files = <span class="keyword">Select</span>[</span><br><span class="line">   <span class="keyword">FileNames</span>[<span class="string">"*"</span>, </span><br><span class="line">    <span class="string">"C:\\Users\\Administrator\\Desktop\\Yanping_13k_code"</span>, </span><br><span class="line">    <span class="keyword">Infinity</span>], ! <span class="keyword">DirectoryQ</span>[#] &amp;];</span><br><span class="line"></span><br><span class="line">mypass = <span class="keyword">DialogInput</span>[&#123;name = <span class="string">""</span>&#125;, </span><br><span class="line">   <span class="keyword">Column</span>[&#123;<span class="string">"Type a name"</span>, <span class="keyword">InputField</span>[<span class="keyword">Dynamic</span>[name], <span class="keyword">String</span>], </span><br><span class="line">     <span class="keyword">Button</span>[<span class="string">"Proceed"</span>, <span class="keyword">DialogReturn</span>[name], <span class="keyword">ImageSize</span> -&gt; <span class="keyword">Automatic</span>]&#125;]];</span><br><span class="line"></span><br><span class="line">myentropyfile[file_, pass_] := </span><br><span class="line">  <span class="keyword">Export</span>[file, <span class="keyword">Compress</span>@<span class="keyword">Encrypt</span>[pass, <span class="keyword">Import</span>[file, <span class="string">"Text"</span>]], <span class="string">"Text"</span>];</span><br><span class="line">mydecryptfile[file_, pass_] := </span><br><span class="line">  <span class="keyword">Export</span>[file, <span class="keyword">Decrypt</span>[pass, <span class="keyword">Uncompress</span>@<span class="keyword">Import</span>[file, <span class="string">"Text"</span>]], <span class="string">"Text"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">(*åŠ å¯†*)</span></span><br><span class="line"><span class="keyword">Monitor</span>[<span class="keyword">Do</span>[myentropyfile[files[[i]], mypass], &#123;i, <span class="keyword">Length</span>@files&#125;], </span><br><span class="line"> <span class="keyword">Row</span>[&#123;<span class="keyword">ProgressIndicator</span>[i, &#123;<span class="number">1</span>, <span class="keyword">Length</span>@files&#125;], i&#125;, <span class="string">" "</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment">(*è§£å¯†*)</span></span><br><span class="line"><span class="keyword">Monitor</span>[<span class="keyword">Do</span>[mydecryptfile[files[[i]], mypass], &#123;i, <span class="keyword">Length</span>@files&#125;], </span><br><span class="line"> <span class="keyword">Row</span>[&#123;<span class="keyword">ProgressIndicator</span>[i, &#123;<span class="number">1</span>, <span class="keyword">Length</span>@files&#125;], i&#125;, <span class="string">" "</span>]]</span><br></pre></td></tr></table></figure>
<h1 id="å¯¼å…¥å¯¼å‡º"><a href="#å¯¼å…¥å¯¼å‡º" class="headerlink" title="å¯¼å…¥å¯¼å‡º"></a>å¯¼å…¥å¯¼å‡º</h1><h2 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h2><p>å¯¼å…¥lstæ–‡ä»¶ï¼ˆæ¯è¡Œå‡ä¸ºæ•°å­—æ„æˆï¼‰<code>Import[filename,&quot;List&quot;]</code><br>å¯¼å…¥lstæ–‡ä»¶ï¼ˆæ¯è¡Œå‡ä¸ºå­—ç¬¦ä¸²æ„æˆï¼‰<code>Import[filename,&quot;Lines&quot;]</code><br>å¯¼å…¥çº¯æ–‡æœ¬æ„æˆçš„çŸ©é˜µ <code>Import[filename,&quot;Table&quot;]</code><br>å¯¼å…¥æµ®ç‚¹æ•°äºŒè¿›åˆ¶æ–‡ä»¶ <code>BinaryReadList[filename,&quot;Real32&quot;]</code></p>
<p>å¦‚æœä¸€äº›tsvæ–‡ä»¶å¯¼å…¥ä¹±ç æ¯”å¦‚ä½¿ç”¨<code>Import[filename,&quot;Table&quot;</code>å¯ä»¥å°è¯•<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Import[&quot;&#x2F;Users&#x2F;xzhou&#x2F;python&#x2F;nvshens&#x2F;Girls.lst&quot;, &quot;TSV&quot;]</span><br><span class="line">(*Or*)</span><br><span class="line">StringSplit[StringSplit[#, &quot;\n&quot;], &quot;\t&quot;] &amp; @ Import[filename,&quot;Text&quot;,Character-&gt;&quot;UTF8&quot;]</span><br></pre></td></tr></table></figure></p>
<h2 id="æ–‡ä»¶æµæ§åˆ¶"><a href="#æ–‡ä»¶æµæ§åˆ¶" class="headerlink" title="æ–‡ä»¶æµæ§åˆ¶"></a>æ–‡ä»¶æµæ§åˆ¶</h2><h3 id="ä»¥äºŒè¿›åˆ¶æ–‡ä»¶å½¢å¼å¯¼å…¥"><a href="#ä»¥äºŒè¿›åˆ¶æ–‡ä»¶å½¢å¼å¯¼å…¥" class="headerlink" title="ä»¥äºŒè¿›åˆ¶æ–‡ä»¶å½¢å¼å¯¼å…¥"></a>ä»¥äºŒè¿›åˆ¶æ–‡ä»¶å½¢å¼å¯¼å…¥</h3><p>Importä¸ä¼šå¼•å…¥æ–°çš„æµï¼Œç®€å•ä½†æ˜¯çµæ´»æ€§ä½<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Import</span>[<span class="string">"test.exe"</span>, <span class="string">"Byte"</span>] // <span class="keyword">Length</span></span><br><span class="line"><span class="keyword">Streams</span>[] // <span class="keyword">Length</span> <span class="comment">(*2ï¼Œè¯æ˜åªæœ‰è¾“å‡ºæµstdoutå’Œé”™è¯¯æµstderr*)</span></span><br></pre></td></tr></table></figure></p>
<p>OpenRead å¦‚æœç”¨å®Œå…³é—­æµä¹Ÿä¸ä¼šå¼•å…¥æ–°çš„æµï¼Œç¨å¤æ‚ä½†æ˜¯çµæ´»æ€§é«˜<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">file = <span class="keyword">OpenRead</span>[<span class="string">"test.exe"</span>, </span><br><span class="line">   <span class="keyword">BinaryFormat</span> -&gt; <span class="keyword">True</span>];</span><br><span class="line"><span class="keyword">Length</span>@<span class="keyword">Reap</span>[</span><br><span class="line">   <span class="keyword">While</span>[(tempRecord = <span class="keyword">BinaryRead</span>[file]) =!= <span class="keyword">EndOfFile</span>, </span><br><span class="line">    <span class="keyword">Sow</span>@tempRecord]][[<span class="number">2</span>, <span class="number">1</span>]]</span><br><span class="line"><span class="keyword">Close</span>[file];</span><br><span class="line"><span class="keyword">Streams</span>[] // <span class="keyword">Length</span> <span class="comment">(*2ï¼Œè¯æ˜åªæœ‰è¾“å‡ºæµstdoutå’Œé”™è¯¯æµstderr*)</span></span><br></pre></td></tr></table></figure></p>
<p>ä¸ç®¡æ˜¯BinaryReadListè¿˜æ˜¯BinaryReadéƒ½ä¼šæ”¹å˜æµæŒ‡é’ˆçš„ä½ç½®ï¼š<br><img src="/2018/07/27/Mathematica/6.png" class=""><br></p>
<h2 id="Mathemticaå‘æ–‡ä»¶è¿½åŠ äºŒè¿›åˆ¶æ•°æ®"><a href="#Mathemticaå‘æ–‡ä»¶è¿½åŠ äºŒè¿›åˆ¶æ•°æ®" class="headerlink" title="Mathemticaå‘æ–‡ä»¶è¿½åŠ äºŒè¿›åˆ¶æ•°æ®"></a>Mathemticaå‘æ–‡ä»¶è¿½åŠ äºŒè¿›åˆ¶æ•°æ®</h2><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">file = <span class="string">"test.dat"</span>;</span><br><span class="line">str = <span class="keyword">OpenAppend</span>[file, <span class="keyword">BinaryFormat</span> -&gt; <span class="keyword">True</span>];</span><br><span class="line"><span class="keyword">BinaryWrite</span>[str, <span class="keyword">Range</span>[<span class="number">12</span>], <span class="string">"Real32"</span>];</span><br><span class="line"><span class="keyword">BinaryWrite</span>[str, <span class="keyword">Range</span>[<span class="number">15</span>,<span class="number">30</span>], <span class="string">"Real32"</span>];</span><br><span class="line"><span class="keyword">Close</span>[str]; </span><br><span class="line"><span class="keyword">BinaryReadList</span>[file, <span class="string">"Real32"</span>]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 15, 16, 17, 18, 19, 20, 21, \<br>22, 23, 24, 25, 26, 27, 28, 29, 30}</p>
</blockquote>
<p>ç»§ç»­è¿½åŠ <br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">str = <span class="keyword">OpenAppend</span>[file, <span class="keyword">BinaryFormat</span> -&gt; <span class="keyword">True</span>];</span><br><span class="line"><span class="keyword">BinaryWrite</span>[str, <span class="keyword">Range</span>[<span class="number">5</span>], <span class="string">"Real32"</span>];</span><br><span class="line"><span class="keyword">BinaryWrite</span>[str, <span class="keyword">Range</span>[<span class="number">10</span>, <span class="number">15</span>], <span class="string">"Real32"</span>];</span><br><span class="line"><span class="keyword">Close</span>[str];</span><br><span class="line"><span class="keyword">BinaryReadList</span>[file, <span class="string">"Real32"</span>]</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 15, 16, 17, 18, 19, 20, 21, \<br>22, 23, 24, 25, 26, 27, 28, 29, 30, 1, 2, 3, 4, 5, 10, 11, 12, 13, \<br>14, 15}</p>
</blockquote>
<h2 id="ä¸å¯¼å‡ºä¹ŸæŸ¥çœ‹å¯¼å‡ºçš„æ•ˆæœ"><a href="#ä¸å¯¼å‡ºä¹ŸæŸ¥çœ‹å¯¼å‡ºçš„æ•ˆæœ" class="headerlink" title="ä¸å¯¼å‡ºä¹ŸæŸ¥çœ‹å¯¼å‡ºçš„æ•ˆæœ"></a>ä¸å¯¼å‡ºä¹ŸæŸ¥çœ‹å¯¼å‡ºçš„æ•ˆæœ</h2><p>æ¯”å¦‚<code>ExportString[{1, {1, 2, 3}}, &quot;Table&quot;]</code>è¾“å‡ºçš„æ•ˆæœå°±æ˜¯<code>Export[&quot;test.txt&quot;,{1, {1, 2, 3}}, &quot;Table&quot;]</code>æ‰“å¼€åçš„æ•ˆæœ</p>
<h2 id="å•å…ƒ-ç¬”è®°æœ¬"><a href="#å•å…ƒ-ç¬”è®°æœ¬" class="headerlink" title="å•å…ƒ ç¬”è®°æœ¬"></a>å•å…ƒ ç¬”è®°æœ¬</h2><p>åœ¨å•å…ƒä¸­å¯ç”¨åŠ¨æ€<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">TextCell</span>[<span class="keyword">Dynamic</span>[ <span class="keyword">Refresh</span>[<span class="keyword">DateString</span>[], <span class="keyword">UpdateInterval</span> -&gt; <span class="number">1</span>]], <span class="string">"Subsection"</span>]</span><br></pre></td></tr></table></figure></p>
<h2 id="æ—¶åºæ•°æ®"><a href="#æ—¶åºæ•°æ®" class="headerlink" title="æ—¶åºæ•°æ®"></a>æ—¶åºæ•°æ®</h2><p>TimeSeriesçš„å¤´éƒ¨ä¾ç„¶æ˜¯TemporalData<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">v = &#123;<span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>&#125;; </span><br><span class="line">t = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">15</span>&#125;; </span><br><span class="line">ts = <span class="keyword">TimeSeries</span>[v, &#123;t&#125;]</span><br><span class="line"><span class="keyword">Head</span>[ts]<span class="comment">(* TemporalData *)</span></span><br></pre></td></tr></table></figure><br>ä¸¤æ¡è·¯å¾„ä½¿ç”¨ TemporalDataè€Œä¸æ˜¯TimeSeries<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">s1 = &#123;<span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>&#125;; </span><br><span class="line">s2 = &#123;<span class="number">4</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>&#125;; </span><br><span class="line">t = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">15</span>&#125;; </span><br><span class="line">td = <span class="keyword">TemporalData</span>[&#123;s1, s2&#125;, &#123;t&#125;]</span><br></pre></td></tr></table></figure><br>Differenceså’ŒAccumulateå¯ä»¥ç”¨äº TemporalDataï¼Œä½†æ˜¯è¦æ³¨æ„é‡‡æ ·æ˜¯å¦å‡åŒ€çš„é—®é¢˜</p>
<h2 id="æ‰“å¼€æ•°æ®åº“æ–‡ä»¶ï¼ˆSQLiteï¼‰"><a href="#æ‰“å¼€æ•°æ®åº“æ–‡ä»¶ï¼ˆSQLiteï¼‰" class="headerlink" title="æ‰“å¼€æ•°æ®åº“æ–‡ä»¶ï¼ˆSQLiteï¼‰"></a>æ‰“å¼€æ•°æ®åº“æ–‡ä»¶ï¼ˆSQLiteï¼‰</h2><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Needs</span>[<span class="string">"DatabaseLink`"</span>];</span><br><span class="line">JDBCDrivers[<span class="string">"SQLite"</span>];</span><br><span class="line">conn = OpenSQLConnection[JDBC[<span class="string">"SQLite"</span>], <span class="string">"log.db"</span>];</span><br><span class="line">data = SQLExecute[conn, <span class="string">"SELECT * FROM log"</span>];</span><br><span class="line">SQLColumnInformation[conn] // <span class="keyword">TableForm</span></span><br><span class="line">SQLExecute[conn,<span class="string">"select detail from log where name=\"ç¾¤ç»„æ¶ˆæ¯\" and detail like \"ç¾¤ï¼š123456789\""</span>]</span><br><span class="line">CloseSQLConnection[conn];</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>Mathematica</tag>
        <tag>å¯è§†åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>MXNet</title>
    <url>/2018/07/27/MXNet/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h1 id="MXNetåŸºæœ¬æŒ‡å—"><a href="#MXNetåŸºæœ¬æŒ‡å—" class="headerlink" title="MXNetåŸºæœ¬æŒ‡å—"></a>MXNetåŸºæœ¬æŒ‡å—</h1><ol>
<li><p>æ‰“å¼€mxnet <code>source activate gluon # æ³¨æ„Windowsä¸‹ä¸éœ€è¦ source</code><br>é€€å‡ºç¯å¢ƒ <code>source deactivate</code></p>
</li>
<li><p>GPUç‰ˆæœ¬è¿›å…¥ç¯å¢ƒåå¦‚æœç”¨æŒ‡å®šçš„å¡å¯ä»¥ <code>CUDA_VISIBLE_DEVICES=2 python</code>ï¼Œè¿™æ ·æ•°æ®åªèƒ½åˆ†é…åœ¨ä¸€ä¸ªGPUä¸Š</p>
</li>
<li>å¯ä»¥å°è¯•å°†æ•°æ®å…¨éƒ¨æ”¾è¿›å†…å­˜ï¼Œå¦‚æœæ˜¯ä¸è§„åˆ™æ•°æ®é›†ï¼Œnumpyå¤„ç†ä¸äº†å¯ä»¥ç”¨pythonè‡ªå¸¦çš„æ•°ç»„å¤„ç†</li>
</ol>
<a id="more"></a>
<ol start="3">
<li><code>CUDA_VISIBLE_DEVICES=2 jupyter notebook</code> ï¼Œè¿›å…¥jupyteråå†å¯¼å…¥mxnetï¼Œå¦‚æœä½¿ç”¨GPUè®­ç»ƒï¼Œä¹Ÿåªè®­ç»ƒåœ¨ä¸€å—å¡ä¸Š</li>
<li>å‡çº§ <code>pip install mxnet --upgrade</code>,å®‰è£…æ¯æ—¥æ›´æ–°ç‰ˆæœ¬å¯ä»¥åŠ ä¸Š<code>--pre</code>å‚æ•°ã€‚<code>pip search mxnet</code>å¯ä»¥çœ‹åˆ°è¿˜æœ‰è®¸å¤šmxnetç‰ˆæœ¬ï¼Œæ¯”å¦‚mxnet-cu75ã€mxnet-cu80ã€mxnet-cu90ç­‰</li>
<li>å¯ä»¥ä¸è®©MXNetå ç”¨è¿‡å¤šæ˜¾å­˜ï¼Œè®¾ç½®ä¿ç•™çš„ç™¾åˆ†æ•°   <code>export MXNET_GPU_MEM_POOL_RESERVE=5</code></li>
</ol>
<h1 id="MXNetå¦‚ä½•å¤„ç†è®­ç»ƒæ¨¡å¼å’Œæµ‹è¯•æ¨¡å¼"><a href="#MXNetå¦‚ä½•å¤„ç†è®­ç»ƒæ¨¡å¼å’Œæµ‹è¯•æ¨¡å¼" class="headerlink" title="MXNetå¦‚ä½•å¤„ç†è®­ç»ƒæ¨¡å¼å’Œæµ‹è¯•æ¨¡å¼"></a>MXNetå¦‚ä½•å¤„ç†è®­ç»ƒæ¨¡å¼å’Œæµ‹è¯•æ¨¡å¼</h1><p>Gluonï¼šè‹¥åœ¨è°ƒç ”ç½‘ç»œæ—¶è¢«<code>with autograd.record()</code>åŒ…è£¹ï¼Œé‚£ä¹ˆè¿™æ—¶Gluonæ˜¯è®­ç»ƒæ¨¡å¼ã€‚å¦‚æœæ²¡æœ‰åˆ™æ˜¯æµ‹è¯•æ¨¡å¼ã€‚å¯ä»¥å‚è§åœ¨è®ºå›çš„<a href="https://discuss.gluon.ai/t/topic/2032" target="_blank" rel="noopener">å¸–å­</a>å¾—åˆ°ä¸€äº›è¯æ˜<br>MNNetçš„ModuleåŠ è½½æ¨¡å‹å¹¶è¿ç®—é»˜è®¤æ˜¯è®­ç»ƒæ¨¡å¼ï¼Œæµ‹è¯•æ¨¡å¼éœ€è¦æŒ‡æ˜mod.forward(Batch([x]),is_train=False)ï¼ŒMNNetçš„æ–°ç‰ˆåŠ è½½å‡½æ•°(v1.2.1ä»¥ä¸Š)åŠ è½½æ¨¡å‹æ–¹å¼(<code>mx.gluon.nn.SymbolBlock.imports</code>)å¹¶è¿ç®—é»˜è®¤æ˜¯æµ‹è¯•æ¨¡å¼<br>C++ï¼šé»˜è®¤æ˜¯æµ‹è¯•æ¨¡å¼ </p>
<h1 id="æ¨¡å‹çš„å¯¼å…¥å¯¼å‡º"><a href="#æ¨¡å‹çš„å¯¼å…¥å¯¼å‡º" class="headerlink" title="æ¨¡å‹çš„å¯¼å…¥å¯¼å‡º"></a>æ¨¡å‹çš„å¯¼å…¥å¯¼å‡º</h1><p>åœ¨1.3.0ç‰ˆæœ¬ä¹‹å‰ï¼Œæˆ‘å¯¹äºHybridæ¨¡å‹é‡‡ç”¨exportå¯¼å‡º,LSTMè¿™ç§æ— æ³•HybridåŒ–çš„æ¨¡å‹é‡‡ç”¨save_paramsçš„æ–¹å¼ã€‚<br>ä½†æ˜¯save_paramsæ–¹å¼ä¸€æ–¹é¢æ— æ³•è½½å…¥C++ï¼Œä¸€æ–¹é¢æ¯æ¬¡Pythonå¯¼å…¥æ¨¡å‹éƒ½è¦é‡æ–°å®šä¹‰ç½‘ç»œç»“æ„ï¼Œå¾ˆéº»çƒ¦</p>
<p>ä»Šå¤©æ‰çŸ¥é“ä¸€ä¸ªv1.2.1ä¹‹åå¼•å…¥äº†æœ‰è¶£çš„å¯¼å…¥å‡½æ•°<code>mx.gluon.nn.SymbolBlock.imports</code>ï¼Œæ¨¡å‹é‡‡ç”¨exportå¯¼å‡ºåï¼ˆ1.3.0ç‰ˆæœ¬ä¹‹årnnã€lstmç­‰ä¹Ÿå¯ä»¥é¡ºåˆ©å¯¼å‡ºäº†ï¼‰ï¼Œå°±æœ‰paramså’Œjsonä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«å­˜å‚¨æƒé‡å’Œç½‘ç»œç»“æ„ï¼Œå³å¯é¢„æµ‹äº†</p>
<p>ä¸‹é¢è¿™ä¸ªä¾‹å­æ˜¾ç¤ºçš„ç»“æœä¸€æ ·ï¼Œä½†æ˜¯æ›´ç®€å•ä¾¿æ·ã€‚<br>DNNçš„è¾“å…¥ï¼š (batch, 535) è¾“å‡ºï¼š(batch, 43)<br>LSTMçš„è¾“å…¥ï¼š(duration, batch, 535) è¾“å‡ºï¼š(duration, batch, 43)<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx </span><br><span class="line"><span class="keyword">from</span> mxnet <span class="keyword">import</span> gluon</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line"></span><br><span class="line">data= mx.random.uniform(shape=(<span class="number">3</span>,<span class="number">535</span>))</span><br><span class="line"><span class="comment">##### New way #####</span></span><br><span class="line"><span class="comment"># import LSTM model</span></span><br><span class="line">net = gluon.nn.SymbolBlock.imports(<span class="string">'LSTM-symbol.json'</span>, [<span class="string">'data'</span>], param_file=<span class="string">'LSTM-0000.params'</span>, ctx=mx.cpu()) </span><br><span class="line"><span class="keyword">print</span> net(mx.nd.zeros(shape=(<span class="number">3</span>,<span class="number">1</span>,<span class="number">535</span>)))  <span class="comment">#100 can be other number</span></span><br><span class="line"><span class="comment"># import DNN model</span></span><br><span class="line">net = gluon.nn.SymbolBlock.imports(<span class="string">'DNN-symbol.json'</span>, [<span class="string">'data'</span>], param_file=<span class="string">'DNN-0000.params'</span>, ctx=mx.cpu()) </span><br><span class="line"><span class="keyword">print</span> net(data)  <span class="comment">#100 can be other number</span></span><br><span class="line"><span class="comment">##### Old way #####</span></span><br><span class="line"><span class="comment"># import DNN model</span></span><br><span class="line">sym = mx.symbol.load(<span class="string">'DNN-symbol.json'</span>) </span><br><span class="line">mod=mx.mod.Module(symbol=sym)</span><br><span class="line">mod.bind(data_shapes=[(<span class="string">'data'</span>,(<span class="number">1</span>,<span class="number">535</span>))])</span><br><span class="line">mod.load_params(<span class="string">'DNN-0000.params'</span>)</span><br><span class="line">Batch=namedtuple(<span class="string">'Batch'</span>,[<span class="string">'data'</span>])</span><br><span class="line">mod.forward(Batch([data]),is_train=<span class="literal">False</span>)</span><br><span class="line"><span class="keyword">print</span> mod.get_outputs()[<span class="number">0</span>]</span><br></pre></td></tr></table></figure></p>
<h1 id="æ•°æ®æ“ä½œ"><a href="#æ•°æ®æ“ä½œ" class="headerlink" title="æ•°æ®æ“ä½œ"></a>æ•°æ®æ“ä½œ</h1><h2 id="expand-dimså’Œflatten"><a href="#expand-dimså’Œflatten" class="headerlink" title="expand_dimså’Œflatten"></a>expand_dimså’Œflatten</h2><p>dataæ˜¯(3,4)çš„å½¢çŠ¶ï¼Œå¦‚æœæƒ³å˜æˆ(3,1,4),å¯ä»¥reshapeï¼Œä½†æ˜¯æ›´å¥½çš„åŠæ³•æ˜¯<code>.expand_dims(axis=1)</code>ï¼Œå†å˜å›å»ä¹Ÿåªè¦<code>.flatten()</code>å°±è¡Œï¼Œå› ä¸ºflattenå‡½æ•°ä¼šå°†è¾“å…¥çš„(d1,d2,d3â€¦)ç»´åº¦å˜ä¸º(d1,d2<em>d3</em>â€¦)</p>
<h2 id="nd-concatenateï¼ˆè¢«å¼ƒç”¨-æ”¹ä¸ºnd-concatï¼‰"><a href="#nd-concatenateï¼ˆè¢«å¼ƒç”¨-æ”¹ä¸ºnd-concatï¼‰" class="headerlink" title="nd.concatenateï¼ˆè¢«å¼ƒç”¨,æ”¹ä¸ºnd.concatï¼‰"></a>nd.concatenateï¼ˆ<strong>è¢«å¼ƒç”¨</strong>,æ”¹ä¸ºnd.concatï¼‰</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">print</span> img_list[<span class="number">0</span>].shape <span class="comment">#(1L, 3L, 64L, 64L) æ¯ä¸ªéƒ½æ˜¯è¿™æ ·çš„å½¢çŠ¶</span></span><br><span class="line"><span class="keyword">print</span> len(img_list) <span class="comment">#13233</span></span><br><span class="line">nd.concatenate(img_list).shape <span class="comment">#(13233L, 3L, 64L, 64L)</span></span><br><span class="line"></span><br><span class="line">train_data = mx.io.NDArrayIter(data=nd.concatenate(img_list),</span><br><span class="line">batch_size=<span class="number">64</span>)</span><br><span class="line">train_data.reset()</span><br><span class="line"><span class="keyword">for</span> batch <span class="keyword">in</span> train_data:</span><br><span class="line">    <span class="keyword">print</span> batch</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line"><span class="comment">#è¾“å‡ºDataBatch: data shapes: [(64L, 3L, 64L, 64L)] label shapes: []</span></span><br><span class="line"><span class="comment">#å³æ¯ä¸ªbatchæ˜¯64å¼ å›¾</span></span><br></pre></td></tr></table></figure>
<p><code>nd.concatenate([history,temp],axis=1)</code>æˆ–è€…<code>nd.concat(history,temp,dim=1)</code>å¯¹åº”<code>F.concat(history, temp, dim=1)</code></p>
<h2 id="è®¡ç®—L2Loss"><a href="#è®¡ç®—L2Loss" class="headerlink" title="è®¡ç®—L2Loss"></a>è®¡ç®—L2Loss</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"><span class="keyword">from</span> mxnet <span class="keyword">import</span> gluon</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">loss1=gluon.loss.L2Loss(batch_axis=<span class="number">1</span>)</span><br><span class="line">a=mx.nd.random.uniform(<span class="number">0</span>, <span class="number">10</span>,shape=(<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>))</span><br><span class="line">b=mx.nd.random.uniform(<span class="number">0</span>, <span class="number">10</span>,shape=(<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>))</span><br><span class="line"><span class="keyword">print</span> loss1(a,b)</span><br><span class="line"><span class="keyword">print</span> np.mean(np.square((a[:,<span class="number">0</span>,:]-b[:,<span class="number">0</span>,:]).asnumpy()))/<span class="number">2</span></span><br><span class="line"><span class="keyword">print</span> np.mean(np.square((a[:,<span class="number">1</span>,:]-b[:,<span class="number">1</span>,:]).asnumpy()))/<span class="number">2</span></span><br></pre></td></tr></table></figure>
<img src="/2018/07/27/MXNet/1.png" class="">
<h1 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h1><h2 id="RNN"><a href="#RNN" class="headerlink" title="RNN"></a>RNN</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">layer = mx.gluon.rnn.RNN(<span class="number">100</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">#åªçŸ¥é“æ¯ä¸ªtime-stepsçš„è¾“å‡ºç»´åº¦æ˜¯100ï¼Œæœ‰ä¸‰ä¸ªéšå±‚ï¼Œå…·ä½“å‡ ä¸ªtime-stepså½“å‰æœªçŸ¥</span></span><br><span class="line">layer.initialize()</span><br><span class="line">input = mx.nd.random_uniform(shape=(<span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>))</span><br><span class="line"><span class="comment"># é»˜è®¤TNCæ¨¡å¼ï¼Œæ–¹ä¾¿å–åˆ°è·¨batchçš„æ•°æ®</span></span><br><span class="line"><span class="comment"># ä»£è¡¨time-stepsæ˜¯6ï¼Œæ¯ä¸ªtime-stepså¯¹åº”çš„è¾“å…¥ç»´åº¦æ˜¯10ï¼Œbatch_sizeä¸º8</span></span><br><span class="line"><span class="comment"># 6*10-&gt;6*100</span></span><br><span class="line"><span class="comment"># by default zeros are used as begin state</span></span><br><span class="line">output = layer(input)</span><br><span class="line"><span class="keyword">print</span> output.shape</span><br></pre></td></tr></table></figure>
<h2 id="Embedding"><a href="#Embedding" class="headerlink" title="Embedding"></a>Embedding</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">net.weight.data().asnumpy()</span><br></pre></td></tr></table></figure>
<h2 id="mask-RNN"><a href="#mask-RNN" class="headerlink" title="mask-RNN"></a>mask-RNN</h2><h3 id="é‡è¦çš„SequenceMaskå‡½æ•°"><a href="#é‡è¦çš„SequenceMaskå‡½æ•°" class="headerlink" title="é‡è¦çš„SequenceMaskå‡½æ•°"></a>é‡è¦çš„SequenceMaskå‡½æ•°</h3><p>ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºè¿™ä¸ªmini-batchå†…å‡ ä¸ªæ ·æœ¬æ˜¯çœŸå®çš„ï¼Œè¿™é‡Œä»£è¡¨ä¸¤ä¸ªçœŸå®<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = mx.nd.array([[[  <span class="number">1.</span>,   <span class="number">2.</span>,   <span class="number">3.</span>],</span><br><span class="line">                  [  <span class="number">4.</span>,   <span class="number">5.</span>,   <span class="number">6.</span>]],</span><br><span class="line">                 [[  <span class="number">7.</span>,   <span class="number">8.</span>,   <span class="number">9.</span>],</span><br><span class="line">                  [ <span class="number">10.</span>,  <span class="number">11.</span>,  <span class="number">12.</span>]],</span><br><span class="line">                 [[ <span class="number">13.</span>,  <span class="number">14.</span>,   <span class="number">15.</span>],</span><br><span class="line">                  [ <span class="number">16.</span>,  <span class="number">17.</span>,   <span class="number">18.</span>]]])</span><br><span class="line"><span class="comment">#x.shape=(3L,2L,3L)</span></span><br><span class="line">res=mx.nd.SequenceMask(x,mx.nd.array([<span class="number">2</span>,<span class="number">1</span>]), use_sequence_length=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">print</span> res</span><br><span class="line"><span class="comment">#è¡¨æ˜ç¬¬ä¸€ä¸ªbatchä¿ç•™ä¸¤ä¸ªtime-stsepsï¼Œç¬¬äºŒä¸ªbatchä¿ç•™1ä¸ªtime-stsep</span></span><br><span class="line"><span class="comment">#         å¾—åˆ°</span></span><br><span class="line"><span class="comment">#   [[ 1.  2.  3.]</span></span><br><span class="line"><span class="comment">#    [ 4.  5.  6.]]</span></span><br><span class="line"><span class="comment">#   [[ 7.  8.  9.]</span></span><br><span class="line"><span class="comment">#    [ 0.  0.  0.]]</span></span><br><span class="line"><span class="comment">#   [[ 0.  0.  0.]</span></span><br><span class="line"><span class="comment">#    [ 0.  0.  0.]]]</span></span><br><span class="line"><span class="comment">#è¿™æ ·çš„è¯ res[:,0,:]å–å‡ºçš„å°±æ˜¯ç¬¬ä¸€ä¸ªbatchåŠ äº†maskçš„ç»“æœ</span></span><br><span class="line"><span class="comment">#   [[ 1.  2.  3.]</span></span><br><span class="line"><span class="comment">#    [ 7.  8.  9.]</span></span><br><span class="line"><span class="comment">#    [ 0.  0.  0.]]</span></span><br><span class="line"><span class="comment">#        res[:,1,:]å–å‡ºçš„å°±æ˜¯ç¬¬2ä¸ªbatchåŠ äº†maskçš„ç»“æœ</span></span><br><span class="line"><span class="comment">#   [[ 4.  5.  6.]</span></span><br><span class="line"><span class="comment">#    [ 0.  0.  0.]</span></span><br><span class="line"><span class="comment">#    [ 0.  0.  0.]]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="é¦–å…ˆè§£å†³å¸¦maskçš„loss"><a href="#é¦–å…ˆè§£å†³å¸¦maskçš„loss" class="headerlink" title="é¦–å…ˆè§£å†³å¸¦maskçš„loss"></a>é¦–å…ˆè§£å†³å¸¦maskçš„loss</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"></span><br><span class="line">a=mx.random.normal(<span class="number">0</span>,<span class="number">1</span>,shape=(<span class="number">50</span>,<span class="number">128</span>,<span class="number">43</span>))</span><br><span class="line">b=mx.random.normal(<span class="number">0</span>,<span class="number">1</span>,shape=(<span class="number">50</span>,<span class="number">128</span>,<span class="number">43</span>))</span><br><span class="line">mask = mx.nd.array([<span class="number">10</span>]*<span class="number">128</span>) <span class="comment">#å¦‚æœè¿™é‡Œæ˜¯[50]*128é‚£ä¹ˆè¿™ä¸¤ä¸ªlossçš„ç»“æœä¸€æ ·</span></span><br><span class="line"></span><br><span class="line">loss = mx.gluon.loss.L2Loss(batch_axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">L2LossMask</span><span class="params">(a,b,mask)</span>:</span></span><br><span class="line">    <span class="comment">#ç±»ä¼¼äºgluon.loss.L2Loss(batch_axis=1)ï¼Œä½†æ˜¯å¯ä»¥ç”¨maskæ–¹å¼è®¡ç®—</span></span><br><span class="line">    maskloss=[]</span><br><span class="line">    maska = mx.nd.SequenceMask(a, mask, use_sequence_length=<span class="literal">True</span>)</span><br><span class="line">    maskb = mx.nd.SequenceMask(b, mask, use_sequence_length=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(a.shape[<span class="number">1</span>]):</span><br><span class="line">        index = int(mask[i].asscalar())</span><br><span class="line">        maskloss.append(mx.nd.sum((maska[:index,i,:]-maskb[:index,i,:])**<span class="number">2</span>)/(<span class="number">2</span>*index*a.shape[<span class="number">2</span>]))</span><br><span class="line">    <span class="keyword">return</span> mx.nd.concat(*maskloss, dim=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> L2LossMask(a,b,mask) <span class="comment"># right</span></span><br><span class="line"><span class="keyword">print</span> loss(a,b)            <span class="comment"># wrong</span></span><br></pre></td></tr></table></figure>
<h1 id="ç½‘ç»œå¯è§†åŒ–"><a href="#ç½‘ç»œå¯è§†åŒ–" class="headerlink" title="ç½‘ç»œå¯è§†åŒ–"></a>ç½‘ç»œå¯è§†åŒ–</h1><p>sym.list_outputs()<br>åˆ—å‡ºä¸€ä¸ªæ¨¡å‹è¾“å‡ºç«¯å£çš„åå­—</p>
<p>sym.list_arguments()<br>åˆ—å‡ºä¸€ä¸ªæ¨¡å‹çš„è¾“å…¥ç«¯å£çš„åå­—ä»¥åŠæƒé‡å’Œåç½®çš„åå­—</p>
<p>sym.tojson()<br>å¯ä»¥æ‰“å°å‡ºç½‘ç»œç»“æ„</p>
<p>mod.get_outputs()<br>åˆ—å‡ºå‰é¦ˆçš„è¾“å‡º</p>
<p>æ˜¾ç¤ºç½‘ç»œç»“æ„ viz.plot_network<br>ç›´æ¥æ˜¾ç¤ºç½‘ç»œç»“æ„<code>mx.viz.plot_network(symbol=sym)</code></p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">graph = <span class="keyword">Import</span>[<span class="string">"ExampleData/mxnet_example2.json"</span>, &#123;<span class="string">"MXNet"</span>, <span class="string">"NodeGraphPlot"</span>&#125;]</span><br></pre></td></tr></table></figure>
<img src="/2018/07/27/MXNet/2.png" class="">
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">graph = <span class="keyword">Import</span>[<span class="string">"ExampleData/mxnet_example2.json"</span>, &#123;<span class="string">"MXNet"</span>, <span class="string">"NodeGraph"</span>&#125;]</span><br></pre></td></tr></table></figure>
<img src="/2018/07/27/MXNet/3.png" class="">
<h1 id="MXNeté«˜é˜¶åº”ç”¨"><a href="#MXNeté«˜é˜¶åº”ç”¨" class="headerlink" title="MXNeté«˜é˜¶åº”ç”¨"></a>MXNeté«˜é˜¶åº”ç”¨</h1><h2 id="MXNetä¸C-è”åŠ¨"><a href="#MXNetä¸C-è”åŠ¨" class="headerlink" title="MXNetä¸C++è”åŠ¨"></a>MXNetä¸C++è”åŠ¨</h2><h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol>
<li>åœ¨pythonä¸­è®­ç»ƒMXNetæ¨¡å‹</li>
<li>åœ¨pythonä¸­å¯¼å…¥æ¨¡å‹ï¼Œå¹¶è¿›è¡Œé¢„æµ‹</li>
<li>åœ¨C++ä¸­å¯¼å…¥æ¨¡å‹ï¼ˆåœ¨å°ä¾‹å­ä¸Šè¿›è¡ŒéªŒè¯ä¸¤ä¸ªæ¥å£ç»“æœä¸€è‡´ï¼‰</li>
<li>åœ¨C++é¡¹ç›®ä¸­ä½¿ç”¨æ¨¡å‹</li>
</ol>
<h3 id="é…ç½®C-å¹³å°"><a href="#é…ç½®C-å¹³å°" class="headerlink" title="é…ç½®C++å¹³å°"></a>é…ç½®C++å¹³å°</h3><ol>
<li>åœ¨C++/å¸¸è§„ä¸­æ·»åŠ â€œé™„åŠ åŒ…å«ç›®å½•â€ï¼Œå³<strong>å·¥ä½œç›®å½•</strong>ï¼Œæ–¹ä¾¿å®šä½c_predict_api.hçš„ä½ç½®ã€‚å¦‚æœèƒ½æˆåŠŸ#includeçš„è¯ï¼Œä¸è®¾ç½®ä¹Ÿè¡Œ<img src="/2018/07/27/MXNet/4.png" class=""></li>
<li>åœ¨é“¾æ¥å™¨/è¾“å…¥ä¸­å¢åŠ â€œé™„åŠ ä¾èµ–é¡¹â€ï¼Œå³libmxnet.lib<img src="/2018/07/27/MXNet/5.png" class=""></li>
<li>ä¿®æ”¹â€œæ´»åŠ¨è§£å†³æ–¹æ¡ˆå¹³å°â€ä¸ºx64<img src="/2018/07/27/MXNet/6.png" class="">
<ol start="4">
<li>æ‹·è´libmxnet.dllå’Œlibmxnet.libå’Œc_predict_api.håˆ°å·¥ä½œç›®å½•<img src="/2018/07/27/MXNet/7.png" class=""></li>
<li>cppæ–‡ä»¶åŠ å…¥#include &lt;c_predict_api.h&gt;</li>
</ol>
</li>
</ol>
<h3 id="C-ä½¿ç”¨æŒ‡å—"><a href="#C-ä½¿ç”¨æŒ‡å—" class="headerlink" title="C++ä½¿ç”¨æŒ‡å—"></a>C++ä½¿ç”¨æŒ‡å—</h3><ul>
<li>å¯è¿è¡Œå•è¾“å…¥å•è¾“å‡º é»˜è®¤é‡‡ç”¨é¢„æµ‹æ–¹å¼</li>
<li>å¯è¿è¡Œå¤šè¾“å…¥å¤šè¾“å‡º é»˜è®¤é‡‡ç”¨é¢„æµ‹æ–¹å¼</li>
<li>å¯è¿è¡Œå¤šè¾“å…¥å¤šè¾“å‡º ä½†æ˜¯åœ¨è¾“å‡ºç«¯å£å¯ä»¥åªè¾“å‡ºä¸€ä¸ªç«¯å£çš„æ•°æ®</li>
<li>ä¿®æ”¹é¢„æµ‹æ”¯æŒä¸€ä¸ªmini-batchåªéœ€è¦ä¿®æ”¹input_shape_dataä¸­çš„batch_sizeï¼Œå¹¶ä¸”å°†ä¸€ä¸ªmini-batchçš„è¾“å…¥æ•°æ®å‹å¹³é€è¿›ç½‘ç»œã€‚åœ¨è®¾ç½®è¾“å…¥è¾“å‡ºç«¯å£çš„vectorçš„å¤§å°æ—¶å€™éƒ½è¦æŠŠå®ƒè®¾ç½®ä¸ºä¸€ä¸ªbatchæ•°æ®é•¿åº¦çš„batch_sizeå€</li>
</ul>
<h2 id="åˆ©ç”¨HDF5æ–‡ä»¶åšè¿­ä»£å™¨ç”¨äºè®­ç»ƒ"><a href="#åˆ©ç”¨HDF5æ–‡ä»¶åšè¿­ä»£å™¨ç”¨äºè®­ç»ƒ" class="headerlink" title="åˆ©ç”¨HDF5æ–‡ä»¶åšè¿­ä»£å™¨ç”¨äºè®­ç»ƒ"></a>åˆ©ç”¨HDF5æ–‡ä»¶åšè¿­ä»£å™¨ç”¨äºè®­ç»ƒ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"><span class="keyword">from</span> mxnet <span class="keyword">import</span> nd,gluon,autograd</span><br><span class="line"><span class="keyword">from</span> mxnet.gluon <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">import</span> h5py</span><br><span class="line"></span><br><span class="line">net = nn.Sequential()</span><br><span class="line"><span class="keyword">with</span> net.name_scope():</span><br><span class="line">    net.add(nn.Dense(<span class="number">32</span>,in_units=<span class="number">2</span>,activation=<span class="string">"tanh"</span>))</span><br><span class="line">    net.add(nn.Dense(<span class="number">1</span>))</span><br><span class="line">net.initialize()</span><br><span class="line"></span><br><span class="line"><span class="comment"># load data from file</span></span><br><span class="line"><span class="keyword">with</span> h5py.File(<span class="string">'test_data_SE.h5'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> h5file:</span><br><span class="line">    X_h5 = h5file[<span class="string">"Input"</span>]</span><br><span class="line">    y_h5 = h5file[<span class="string">"Output"</span>]</span><br><span class="line">    num_examples=X_h5.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    batch_size = <span class="number">512</span></span><br><span class="line">    epochs=<span class="number">10</span></span><br><span class="line">    dataiter = mx.io.NDArrayIter(X_h5, y_h5, batch_size=batch_size)</span><br><span class="line">    square_loss = gluon.loss.L2Loss()</span><br><span class="line">    trainer = gluon.Trainer(net.collect_params(), <span class="string">'adam'</span>, &#123;<span class="string">'learning_rate'</span>: <span class="number">0.3</span>&#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(epochs):</span><br><span class="line">        total_loss = <span class="number">0</span></span><br><span class="line">        dataiter.reset()</span><br><span class="line">        <span class="keyword">for</span> iBatch, batch <span class="keyword">in</span> enumerate(dataiter):</span><br><span class="line">            <span class="keyword">with</span> autograd.record():</span><br><span class="line">                output = net(batch.data[<span class="number">0</span>])</span><br><span class="line">                loss = square_loss(output, batch.label[<span class="number">0</span>])</span><br><span class="line">            loss.backward()</span><br><span class="line">            trainer.step(batch_size)</span><br><span class="line">            total_loss += nd.sum(loss).asscalar()</span><br><span class="line">        print(<span class="string">"Epoch %d, average loss: %f"</span> % (epoch, total_loss/num_examples))</span><br><span class="line">        </span><br><span class="line">print(net(nd.array([[<span class="number">-1</span>,<span class="number">-0.9</span>]]))[<span class="number">0</span>].asnumpy())</span><br></pre></td></tr></table></figure>
<h2 id="å•è¾“å…¥å•è¾“å‡ºSeq2Seqæ¨¡å‹"><a href="#å•è¾“å…¥å•è¾“å‡ºSeq2Seqæ¨¡å‹" class="headerlink" title="å•è¾“å…¥å•è¾“å‡ºSeq2Seqæ¨¡å‹"></a>å•è¾“å…¥å•è¾“å‡ºSeq2Seqæ¨¡å‹</h2><h3 id="Pythonä»£ç ï¼ˆHybridBlockç‰ˆæœ¬ï¼‰"><a href="#Pythonä»£ç ï¼ˆHybridBlockç‰ˆæœ¬ï¼‰" class="headerlink" title="Pythonä»£ç ï¼ˆHybridBlockç‰ˆæœ¬ï¼‰"></a>Pythonä»£ç ï¼ˆHybridBlockç‰ˆæœ¬ï¼‰</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"><span class="keyword">from</span> mxnet.gluon <span class="keyword">import</span> nn</span><br><span class="line">print(<span class="string">"mxnet version: "</span>+mx.__version__)</span><br><span class="line"></span><br><span class="line">mx.random.seed(<span class="number">1234</span>)  <span class="comment">#Getting the same result everytime</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_net</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># construct a MLP</span></span><br><span class="line">    net = nn.HybridSequential()</span><br><span class="line">    <span class="keyword">with</span> net.name_scope():</span><br><span class="line">        net.add(nn.Dense(<span class="number">5</span>, activation=<span class="string">"relu"</span>))</span><br><span class="line">        net.add(nn.Dense(<span class="number">2</span>))</span><br><span class="line">    <span class="comment"># initialize the parameters</span></span><br><span class="line">    net.collect_params().initialize()</span><br><span class="line">    <span class="keyword">return</span> net</span><br><span class="line"></span><br><span class="line"><span class="comment"># forward</span></span><br><span class="line">x = mx.nd.array([[<span class="number">0.1</span>,<span class="number">0.2</span>,<span class="number">0.3</span>]])</span><br><span class="line">net = get_net()</span><br><span class="line">net.hybridize()</span><br><span class="line">print(<span class="string">'=== net(x) ===&#123;&#125;'</span>.format(net(x)))</span><br><span class="line"></span><br><span class="line">net.export(<span class="string">'model'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">##############   Re-importing the net  ##############</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line">sym = mx.symbol.load(<span class="string">'model-symbol.json'</span>) </span><br><span class="line">mod=mx.mod.Module(symbol=sym)</span><br><span class="line">mod.bind(data_shapes=[(<span class="string">'data'</span>,(<span class="number">1</span>,<span class="number">3</span>))])</span><br><span class="line">mod.load_params(<span class="string">'model-0000.params'</span>)</span><br><span class="line">Batch=namedtuple(<span class="string">'Batch'</span>,[<span class="string">'data'</span>])</span><br><span class="line">data=mx.nd.array([[<span class="number">0.1</span>,<span class="number">0.2</span>,<span class="number">0.3</span>]])</span><br><span class="line">mod.forward(Batch([data]),is_train=<span class="literal">False</span>)</span><br><span class="line"><span class="keyword">print</span> mod.get_outputs()</span><br></pre></td></tr></table></figure>
<h3 id="C-å¯¼å…¥æ¨¡å‹å†é¢„æµ‹-ä»£ç "><a href="#C-å¯¼å…¥æ¨¡å‹å†é¢„æµ‹-ä»£ç " class="headerlink" title="C++å¯¼å…¥æ¨¡å‹å†é¢„æµ‹ ä»£ç "></a>C++å¯¼å…¥æ¨¡å‹å†é¢„æµ‹ ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Path for c_predict_api</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mxnet/c_predict_api.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Read file to buffer</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BufferFile</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> file_path_;</span><br><span class="line">    <span class="keyword">int</span> length_;</span><br><span class="line">    <span class="keyword">char</span>* buffer_;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">BufferFile</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> file_path)</span></span></span><br><span class="line"><span class="function">        :<span class="title">file_path_</span><span class="params">(file_path)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="built_in">std</span>::ifstream <span class="title">ifs</span><span class="params">(file_path.c_str(), <span class="built_in">std</span>::ios::in | <span class="built_in">std</span>::ios::binary)</span></span>;</span><br><span class="line">        <span class="keyword">if</span> (!ifs) &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">"Can't open the file. Please check "</span> &lt;&lt; file_path &lt;&lt; <span class="string">". \n"</span>;</span><br><span class="line">            length_ = <span class="number">0</span>;</span><br><span class="line">            buffer_ = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ifs.seekg(<span class="number">0</span>, <span class="built_in">std</span>::ios::end);</span><br><span class="line">        length_ = ifs.tellg();</span><br><span class="line">        ifs.seekg(<span class="number">0</span>, <span class="built_in">std</span>::ios::beg);</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; file_path.c_str() &lt;&lt; <span class="string">" ... "</span> &lt;&lt; length_ &lt;&lt; <span class="string">" bytes\n"</span>;</span><br><span class="line"></span><br><span class="line">        buffer_ = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="keyword">sizeof</span>(<span class="keyword">char</span>) * length_];</span><br><span class="line">        ifs.read(buffer_, length_);</span><br><span class="line">        ifs.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">GetLength</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> length_;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">char</span>* <span class="title">GetBuffer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> buffer_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~BufferFile() &#123;</span><br><span class="line">        <span class="keyword">if</span> (buffer_) &#123;</span><br><span class="line">            <span class="keyword">delete</span>[] buffer_;</span><br><span class="line">            buffer_ = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintOutputResult</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">float</span>&gt;&amp; data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;(data.size()); i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.8f\n"</span>, data[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Models path for your model, you have to modify it</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> json_file = <span class="string">"./simple prediction model/model-symbol.json"</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> param_file = <span class="string">"./simple prediction model/model-0000.params"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">BufferFile <span class="title">json_data</span><span class="params">(json_file)</span></span>;</span><br><span class="line">    <span class="function">BufferFile <span class="title">param_data</span><span class="params">(param_file)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Parameters</span></span><br><span class="line">    <span class="keyword">int</span> dev_type = <span class="number">1</span>;  <span class="comment">// 1: cpu, 2: gpu</span></span><br><span class="line">    <span class="keyword">int</span> dev_id = <span class="number">1</span>;  <span class="comment">// arbitrary.</span></span><br><span class="line">    mx_uint num_input_nodes = <span class="number">1</span>;  <span class="comment">// 1 for feedforward</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* input_key[<span class="number">1</span>] = &#123; <span class="string">"data"</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>** input_keys = input_key;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// input-dims</span></span><br><span class="line">    <span class="keyword">int</span> data_len = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> mx_uint input_shape_indptr[<span class="number">2</span>] = &#123; <span class="number">0</span>, <span class="number">2</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> mx_uint input_shape_data[<span class="number">2</span>] = &#123; <span class="number">1</span>,<span class="keyword">static_cast</span>&lt;mx_uint&gt;(data_len) &#125;;</span><br><span class="line">    PredictorHandle pred_hnd = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (json_data.GetLength() == <span class="number">0</span> || param_data.GetLength() == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create Predictor</span></span><br><span class="line">    assert(<span class="number">0</span>==MXPredCreate((<span class="keyword">const</span> <span class="keyword">char</span>*)json_data.GetBuffer(),</span><br><span class="line">        (<span class="keyword">const</span> <span class="keyword">char</span>*)param_data.GetBuffer(),</span><br><span class="line">        <span class="keyword">static_cast</span>&lt;<span class="keyword">size_t</span>&gt;(param_data.GetLength()),</span><br><span class="line">        dev_type,</span><br><span class="line">        dev_id,</span><br><span class="line">        num_input_nodes,</span><br><span class="line">        input_keys,</span><br><span class="line">        input_shape_indptr,</span><br><span class="line">        input_shape_data,</span><br><span class="line">        &amp;pred_hnd));</span><br><span class="line">    assert(pred_hnd);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;mx_float&gt; vector_data = <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;mx_float&gt;(data_len);</span><br><span class="line">    mx_float* p = vector_data.data();</span><br><span class="line">    p[<span class="number">0</span>] = <span class="number">.1</span>;</span><br><span class="line">    p[<span class="number">1</span>] = <span class="number">.2</span>;</span><br><span class="line">    p[<span class="number">2</span>] = <span class="number">.3</span>;</span><br><span class="line"></span><br><span class="line">    MXPredSetInput(pred_hnd, <span class="string">"data"</span>, vector_data.data(), data_len);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Do Predict Forward</span></span><br><span class="line">    MXPredForward(pred_hnd);</span><br><span class="line"></span><br><span class="line">    mx_uint output_index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    mx_uint *shape = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//shapeç›¸å½“äº1*3çš„å‘é‡</span></span><br><span class="line">    mx_uint shape_len;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get Output Result</span></span><br><span class="line">    MXPredGetOutputShape(pred_hnd, output_index, &amp;shape, &amp;shape_len);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">size_t</span> size = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (mx_uint i = <span class="number">0</span>; i &lt; shape_len; ++i) size *= shape[i];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">float</span>&gt; <span class="title">data</span><span class="params">(size)</span></span>;</span><br><span class="line"></span><br><span class="line">    assert(<span class="number">0</span>==MXPredGetOutput(pred_hnd, output_index, &amp;(data[<span class="number">0</span>]), size));</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// Release Predictor</span></span><br><span class="line">    MXPredFree(pred_hnd);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Print Output Data</span></span><br><span class="line">    PrintOutputResult(data);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç®€å•çš„å¤šè¾“å…¥å¤šè¾“å‡ºç½‘ç»œ"><a href="#ç®€å•çš„å¤šè¾“å…¥å¤šè¾“å‡ºç½‘ç»œ" class="headerlink" title="ç®€å•çš„å¤šè¾“å…¥å¤šè¾“å‡ºç½‘ç»œ"></a>ç®€å•çš„å¤šè¾“å…¥å¤šè¾“å‡ºç½‘ç»œ</h2><h3 id="Pythonä»£ç ï¼ˆæ™®é€šç‰ˆæœ¬ï¼‰"><a href="#Pythonä»£ç ï¼ˆæ™®é€šç‰ˆæœ¬ï¼‰" class="headerlink" title="Pythonä»£ç ï¼ˆæ™®é€šç‰ˆæœ¬ï¼‰"></a>Pythonä»£ç ï¼ˆæ™®é€šç‰ˆæœ¬ï¼‰</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> mxnet <span class="keyword">import</span> nd</span><br><span class="line"><span class="keyword">from</span> mxnet.gluon <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HybridNet</span><span class="params">(nn.Block)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, **kwargs)</span>:</span></span><br><span class="line">        super(HybridNet, self).__init__(**kwargs)</span><br><span class="line">        <span class="keyword">with</span> self.name_scope():</span><br><span class="line">            self.dense0 = nn.Dense(<span class="number">3</span>)</span><br><span class="line">            self.dense1 = nn.Dense(<span class="number">3</span>)</span><br><span class="line">            self.dense2 = nn.Dense(<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self,x,y)</span>:</span></span><br><span class="line">        result1 = nd.relu(self.dense0(x))+nd.relu(self.dense1(y))</span><br><span class="line">        result2 = nd.relu(self.dense2(result1))</span><br><span class="line">        <span class="keyword">return</span> [result1,result2]</span><br><span class="line"></span><br><span class="line">net = HybridNet()</span><br><span class="line">net.initialize()</span><br><span class="line">x = nd.random.normal(shape=(<span class="number">4</span>,<span class="number">3</span>))</span><br><span class="line">y = nd.random.normal(shape=(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line">res=net(x,y)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"output1:"</span>,res[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">"output2:"</span>,res[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<h3 id="Pythonä»£ç ï¼ˆHybridBlockç‰ˆæœ¬ï¼‰-1"><a href="#Pythonä»£ç ï¼ˆHybridBlockç‰ˆæœ¬ï¼‰-1" class="headerlink" title="Pythonä»£ç ï¼ˆHybridBlockç‰ˆæœ¬ï¼‰"></a>Pythonä»£ç ï¼ˆHybridBlockç‰ˆæœ¬ï¼‰</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> mxnet <span class="keyword">import</span> nd</span><br><span class="line"><span class="keyword">from</span> mxnet.gluon <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HybridNet</span><span class="params">(nn.HybridBlock)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, **kwargs)</span>:</span></span><br><span class="line">        super(HybridNet, self).__init__(**kwargs)</span><br><span class="line">        <span class="keyword">with</span> self.name_scope():</span><br><span class="line">            self.dense0 = nn.Dense(<span class="number">3</span>)</span><br><span class="line">            self.dense1 = nn.Dense(<span class="number">3</span>)</span><br><span class="line">            self.dense2 = nn.Dense(<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hybrid_forward</span><span class="params">(self, F,x,y)</span>:</span></span><br><span class="line">        result1 = F.relu(self.dense0(x))+F.relu(self.dense1(y))</span><br><span class="line">        result2 = F.relu(self.dense2(result1))</span><br><span class="line">        <span class="keyword">return</span> [result1,result2]</span><br><span class="line"></span><br><span class="line">net = HybridNet()</span><br><span class="line">net.initialize()</span><br><span class="line">net.hybridize()</span><br><span class="line">x = nd.random.normal(shape=(<span class="number">4</span>,<span class="number">3</span>))</span><br><span class="line">y = nd.random.normal(shape=(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line">res=net(x,y)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"output1:"</span>,res[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">"output2:"</span>,res[<span class="number">1</span>]</span><br><span class="line">net.export(<span class="string">'model'</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"##############   Re-importing the net  ##############"</span>)</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line">sym = mx.symbol.load(<span class="string">'model-symbol.json'</span>) </span><br><span class="line">mod=mx.mod.Module(symbol=sym,data_names=[<span class="string">'data0'</span>,<span class="string">'data1'</span>])</span><br><span class="line">mod.bind(data_shapes=[(<span class="string">'data0'</span>,(<span class="number">1</span>,<span class="number">3</span>)),(<span class="string">'data1'</span>,(<span class="number">1</span>,<span class="number">5</span>))])</span><br><span class="line">mod.load_params(<span class="string">'model-0000.params'</span>)</span><br><span class="line">Batch=namedtuple(<span class="string">'Batch'</span>,[<span class="string">'data'</span>])</span><br><span class="line">mod.forward(Batch(data=[x,y]))</span><br><span class="line"><span class="keyword">print</span> mod.get_outputs()</span><br></pre></td></tr></table></figure>
<h3 id="C-å¯¼å…¥æ¨¡å‹å†é¢„æµ‹-ä»£ç -1"><a href="#C-å¯¼å…¥æ¨¡å‹å†é¢„æµ‹-ä»£ç -1" class="headerlink" title="C++å¯¼å…¥æ¨¡å‹å†é¢„æµ‹ ä»£ç "></a>C++å¯¼å…¥æ¨¡å‹å†é¢„æµ‹ ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mxnet/c_predict_api.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Read file to buffer</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BufferFile</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> file_path_;</span><br><span class="line">    <span class="keyword">int</span> length_;</span><br><span class="line">    <span class="keyword">char</span>* buffer_;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">BufferFile</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> file_path)</span></span></span><br><span class="line"><span class="function">        :<span class="title">file_path_</span><span class="params">(file_path)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="built_in">std</span>::ifstream <span class="title">ifs</span><span class="params">(file_path.c_str(), <span class="built_in">std</span>::ios::in | <span class="built_in">std</span>::ios::binary)</span></span>;</span><br><span class="line">        <span class="keyword">if</span> (!ifs) &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">"Can't open the file. Please check "</span> &lt;&lt; file_path &lt;&lt; <span class="string">". \n"</span>;</span><br><span class="line">            length_ = <span class="number">0</span>;</span><br><span class="line">            buffer_ = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ifs.seekg(<span class="number">0</span>, <span class="built_in">std</span>::ios::end);</span><br><span class="line">        length_ = ifs.tellg();</span><br><span class="line">        ifs.seekg(<span class="number">0</span>, <span class="built_in">std</span>::ios::beg);</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; file_path.c_str() &lt;&lt; <span class="string">" ... "</span> &lt;&lt; length_ &lt;&lt; <span class="string">" bytes\n"</span>;</span><br><span class="line"></span><br><span class="line">        buffer_ = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="keyword">sizeof</span>(<span class="keyword">char</span>) * length_];</span><br><span class="line">        ifs.read(buffer_, length_);</span><br><span class="line">        ifs.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">GetLength</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> length_;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">char</span>* <span class="title">GetBuffer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> buffer_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~BufferFile() &#123;</span><br><span class="line">        <span class="keyword">if</span> (buffer_) &#123;</span><br><span class="line">            <span class="keyword">delete</span>[] buffer_;</span><br><span class="line">            buffer_ = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintOutputResult</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">float</span>&gt;&amp; data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;(data.size()); i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.8f\n"</span>, data[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Models path for your model, you have to modify it</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> json_file  = <span class="string">"./model-symbol.json"</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> param_file = <span class="string">"./model-0000.params"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">BufferFile <span class="title">json_data</span><span class="params">(json_file)</span></span>;</span><br><span class="line">    <span class="function">BufferFile <span class="title">param_data</span><span class="params">(param_file)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Parameters</span></span><br><span class="line">    <span class="keyword">int</span> dev_type = <span class="number">1</span>;  <span class="comment">// 1: cpu, 2: gpu</span></span><br><span class="line">    <span class="keyword">int</span> dev_id = <span class="number">1</span>;  <span class="comment">// arbitrary.</span></span><br><span class="line">    mx_uint num_input_nodes = <span class="number">2</span>;</span><br><span class="line">    mx_uint num_output_nodes = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* input_key[<span class="number">2</span>] = &#123; <span class="string">"data0"</span> , <span class="string">"data1"</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>** input_keys = input_key;</span><br><span class="line">    <span class="comment">//output_key name maybe should modify</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* output_key[<span class="number">2</span>] = &#123; <span class="string">"hybridnet0__plus0"</span> , <span class="string">"hybridnet0_relu2"</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>** output_keys = output_key;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// input-dims</span></span><br><span class="line">    <span class="keyword">int</span> data0_len = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">int</span> data1_len = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">const</span> mx_uint input_shape_indptr[<span class="number">3</span>] = &#123; <span class="number">0</span>,<span class="number">2</span>,<span class="number">4</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> mx_uint input_shape_data[<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="keyword">static_cast</span>&lt;mx_uint&gt;(data0_len),<span class="number">1</span>,<span class="keyword">static_cast</span>&lt;mx_uint&gt;(data1_len) &#125;;</span><br><span class="line">    PredictorHandle pred_hnd = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (json_data.GetLength() == <span class="number">0</span> || param_data.GetLength() == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create Predictor</span></span><br><span class="line">    assert(<span class="number">0</span> == MXPredCreatePartialOut(</span><br><span class="line">        (<span class="keyword">const</span> <span class="keyword">char</span>*)json_data.GetBuffer(),</span><br><span class="line">        (<span class="keyword">const</span> <span class="keyword">char</span>*)param_data.GetBuffer(),</span><br><span class="line">        <span class="keyword">static_cast</span>&lt;<span class="keyword">size_t</span>&gt;(param_data.GetLength()),</span><br><span class="line">        dev_type,</span><br><span class="line">        dev_id,</span><br><span class="line">        num_input_nodes,</span><br><span class="line">        input_keys,</span><br><span class="line">        input_shape_indptr,</span><br><span class="line">        input_shape_data,</span><br><span class="line">        num_output_nodes,</span><br><span class="line">        output_keys,</span><br><span class="line">        &amp;pred_hnd));</span><br><span class="line">    assert(pred_hnd);    <span class="comment">//ERROR HERE</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;mx_float&gt; vector_data0 = <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;mx_float&gt;(data0_len);</span><br><span class="line">    mx_float* p0 = vector_data0.data();</span><br><span class="line">    p0[<span class="number">0</span>] = <span class="number">1</span>;p0[<span class="number">1</span>] = <span class="number">2</span>;p0[<span class="number">2</span>] = <span class="number">5</span>;</span><br><span class="line">    MXPredSetInput(pred_hnd, <span class="string">"data0"</span>, vector_data0.data(), data0_len);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;mx_float&gt; vector_data1 = <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;mx_float&gt;(data1_len);</span><br><span class="line">    mx_float* p1 = vector_data1.data();</span><br><span class="line">    p1[<span class="number">0</span>] = <span class="number">5</span>; p1[<span class="number">1</span>] = <span class="number">3</span>; p1[<span class="number">2</span>] = <span class="number">1</span>; p1[<span class="number">3</span>] = <span class="number">4</span>; p1[<span class="number">4</span>] = <span class="number">5</span>;</span><br><span class="line">    MXPredSetInput(pred_hnd, <span class="string">"data1"</span>, vector_data1.data(), data1_len);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Do Predict Forward</span></span><br><span class="line">    MXPredForward(pred_hnd);</span><br><span class="line"></span><br><span class="line">    mx_uint output0_index = <span class="number">0</span>;</span><br><span class="line">    mx_uint *shape0 = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//shapeç›¸å½“äº1*3çš„å‘é‡</span></span><br><span class="line">    mx_uint shape0_len;</span><br><span class="line">    <span class="comment">// Get Output Result</span></span><br><span class="line">    MXPredGetOutputShape(pred_hnd, output0_index, &amp;shape0, &amp;shape0_len);</span><br><span class="line">    <span class="keyword">size_t</span> size0 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (mx_uint i = <span class="number">0</span>; i &lt; shape0_len; ++i) size0 *= shape0[i];</span><br><span class="line"></span><br><span class="line">    mx_uint output1_index = <span class="number">1</span>;</span><br><span class="line">    mx_uint *shape1 = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//shapeç›¸å½“äº1*5çš„å‘é‡</span></span><br><span class="line">    mx_uint shape1_len;</span><br><span class="line">    <span class="comment">// Get Output Result</span></span><br><span class="line">    MXPredGetOutputShape(pred_hnd, output1_index, &amp;shape1, &amp;shape1_len);</span><br><span class="line">    <span class="keyword">size_t</span> size1 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (mx_uint i = <span class="number">0</span>; i &lt; shape1_len; ++i) size1 *= shape1[i];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">float</span>&gt; <span class="title">data0</span><span class="params">(size0)</span></span>;</span><br><span class="line">    assert(<span class="number">0</span> == MXPredGetOutput(pred_hnd, output0_index, &amp;(data0[<span class="number">0</span>]), size0));</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">float</span>&gt; <span class="title">data1</span><span class="params">(size1)</span></span>;</span><br><span class="line">    assert(<span class="number">0</span> == MXPredGetOutput(pred_hnd, output1_index, &amp;(data1[<span class="number">0</span>]), size1));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Print Output Data</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"output0:\n"</span>);</span><br><span class="line">    PrintOutputResult(data0);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"output1:\n"</span>);</span><br><span class="line">    PrintOutputResult(data1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Release Predictor</span></span><br><span class="line">    MXPredFree(pred_hnd);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2018/07/27/MXNet/C++.png" class="">
<h2 id="è®­ç»ƒæ¨¡æ¿"><a href="#è®­ç»ƒæ¨¡æ¿" class="headerlink" title="è®­ç»ƒæ¨¡æ¿"></a>è®­ç»ƒæ¨¡æ¿</h2><h3 id="å•è¾“å…¥å•è¾“å‡º"><a href="#å•è¾“å…¥å•è¾“å‡º" class="headerlink" title="å•è¾“å…¥å•è¾“å‡º"></a>å•è¾“å…¥å•è¾“å‡º</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"><span class="keyword">from</span> mxnet.gluon <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> mxnet <span class="keyword">import</span> nd,gluon,autograd,gpu</span><br><span class="line"><span class="keyword">import</span> h5py</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">ctx = gpu()</span><br><span class="line">net = nn.HybridSequential()</span><br><span class="line"><span class="keyword">with</span> net.name_scope():</span><br><span class="line">    net.add(nn.Dense(<span class="number">128</span>, activation=<span class="string">"relu"</span>))</span><br><span class="line">    net.add(nn.Dropout(<span class="number">0.1</span>))</span><br><span class="line">    net.add(nn.Dense(<span class="number">128</span>, activation=<span class="string">"relu"</span>))</span><br><span class="line">    net.add(nn.Dropout(<span class="number">0.1</span>))</span><br><span class="line">    net.add(nn.Dense(<span class="number">128</span>, activation=<span class="string">"relu"</span>))</span><br><span class="line">    net.add(nn.Dropout(<span class="number">0.1</span>))</span><br><span class="line">    net.add(nn.Dense(<span class="number">32</span>))</span><br><span class="line">net.initialize(ctx=ctx)</span><br><span class="line">net.hybridize()</span><br><span class="line"></span><br><span class="line">val_file = h5py.File(<span class="string">'../data/TargetModel/validation_normalization_Target.h5'</span>, <span class="string">'r'</span>)</span><br><span class="line">X_val_h5 = nd.array(val_file[<span class="string">"Input"</span>][:]).as_in_context(ctx)</span><br><span class="line">y_val_h5 = nd.array(val_file[<span class="string">"Output"</span>][:]).as_in_context(ctx)</span><br><span class="line">val_file.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># load data from file</span></span><br><span class="line"><span class="keyword">with</span> h5py.File(<span class="string">'../data/TargetModel/training_normalization_Target.h5'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> h5file:</span><br><span class="line">    X_h5 = h5file[<span class="string">"Input"</span>]</span><br><span class="line">    y_h5 = h5file[<span class="string">"Output"</span>]</span><br><span class="line">    </span><br><span class="line">    num_examples=X_h5.shape[<span class="number">0</span>]</span><br><span class="line">    min_val_loss=float(<span class="string">"inf"</span>) </span><br><span class="line">    </span><br><span class="line">    epochs=<span class="number">100</span></span><br><span class="line">    batch_size = <span class="number">128</span></span><br><span class="line">    dataiter = mx.io.NDArrayIter(X_h5, y_h5, batch_size=batch_size)</span><br><span class="line">    square_loss = gluon.loss.L2Loss()</span><br><span class="line">    trainer = gluon.Trainer(net.collect_params(), <span class="string">'sgd'</span>, &#123;<span class="string">'learning_rate'</span>: <span class="number">0.1</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(epochs):</span><br><span class="line">        total_loss = <span class="number">0</span></span><br><span class="line">        dataiter.reset()</span><br><span class="line">        <span class="keyword">for</span> iBatch, batch <span class="keyword">in</span> enumerate(dataiter):</span><br><span class="line">            <span class="keyword">with</span> autograd.record():</span><br><span class="line">                output = net(batch.data[<span class="number">0</span>].as_in_context(ctx))</span><br><span class="line">                loss = square_loss(output, batch.label[<span class="number">0</span>].as_in_context(ctx))</span><br><span class="line">            loss.backward()</span><br><span class="line">            trainer.step(batch_size)</span><br><span class="line">            total_loss += nd.sum(loss).asscalar()</span><br><span class="line">            <span class="keyword">if</span> iBatch%<span class="number">100</span>==<span class="number">0</span>:</span><br><span class="line">                print(<span class="string">"Epoch %d, Batch: %d/%d, average loss: %f"</span>%(epoch,iBatch,num_examples/batch_size,nd.mean(loss).asscalar()))</span><br><span class="line">        print(<span class="string">"Epoch %d finished, average loss of training set: %f"</span> % (epoch, total_loss/num_examples))</span><br><span class="line">        val_loss = nd.mean(square_loss(net(X_val_h5), y_val_h5)).asscalar()</span><br><span class="line">        print(<span class="string">"\n-----loss of validation set: %f-----\n"</span> % val_loss)</span><br><span class="line">        <span class="keyword">if</span>(val_loss &lt; min_val_loss):</span><br><span class="line">            min_val_loss=val_loss</span><br><span class="line">            net.export(<span class="string">'TargetModel'</span>)</span><br><span class="line">            print(<span class="string">"---validation set got a smaller loss---\n---------------Save net----------------\n"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å¯¼å…¥æµ‹è¯•"><a href="#å¯¼å…¥æµ‹è¯•" class="headerlink" title="å¯¼å…¥æµ‹è¯•"></a>å¯¼å…¥æµ‹è¯•</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"><span class="keyword">from</span> mxnet.gluon <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line">sym = mx.symbol.load(<span class="string">'TargetModel-symbol.json'</span>) </span><br><span class="line">mod=mx.mod.Module(symbol=sym)</span><br><span class="line">mod.bind(data_shapes=[(<span class="string">'data'</span>,(<span class="number">1</span>,<span class="number">1</span>+<span class="number">523</span>))])</span><br><span class="line">mod.load_params(<span class="string">'TargetModel-0000.params'</span>)</span><br><span class="line">Batch=namedtuple(<span class="string">'Batch'</span>,[<span class="string">'data'</span>])</span><br><span class="line">data=mx.nd.array([range(<span class="number">1</span>+<span class="number">523</span>)])</span><br><span class="line">mod.forward(Batch([data]),is_train=<span class="literal">False</span>)</span><br><span class="line"><span class="keyword">print</span> mod.get_outputs()</span><br></pre></td></tr></table></figure>
<h3 id="å¤šè¾“å…¥å¤šè¾“å‡º"><a href="#å¤šè¾“å…¥å¤šè¾“å‡º" class="headerlink" title="å¤šè¾“å…¥å¤šè¾“å‡º"></a>å¤šè¾“å…¥å¤šè¾“å‡º</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"><span class="keyword">from</span> mxnet.gluon <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> mxnet <span class="keyword">import</span> nd,gluon,autograd,gpu</span><br><span class="line"><span class="keyword">import</span> h5py</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">ctx=gpu()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JoinModel</span><span class="params">(nn.HybridBlock)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, **kwargs)</span>:</span></span><br><span class="line">        super(JoinModel, self).__init__(**kwargs)</span><br><span class="line">        self.encodeNet=nn.HybridSequential()</span><br><span class="line">        self.decodeNet=nn.HybridSequential()</span><br><span class="line">        self.fc=nn.HybridSequential()</span><br><span class="line">        <span class="keyword">with</span> self.name_scope():</span><br><span class="line">            self.encodeNet.add(nn.Dense(<span class="number">128</span>,activation=<span class="string">"relu"</span>))</span><br><span class="line">            self.encodeNet.add(nn.Dense(<span class="number">128</span>))</span><br><span class="line">            self.decodeNet.add(nn.Dense(<span class="number">128</span>,activation=<span class="string">"relu"</span>))</span><br><span class="line">            self.decodeNet.add(nn.Dense(<span class="number">32</span>))</span><br><span class="line">            self.fc.add(nn.Dense(<span class="number">256</span>,activation=<span class="string">"relu"</span>))</span><br><span class="line">            self.fc.add(nn.Dropout(<span class="number">0.1</span>))</span><br><span class="line">            self.fc.add(nn.Dense(<span class="number">256</span>,activation=<span class="string">"relu"</span>))</span><br><span class="line">            self.fc.add(nn.Dropout(<span class="number">0.1</span>))</span><br><span class="line">            self.fc.add(nn.Dense(<span class="number">256</span>,activation=<span class="string">"relu"</span>))</span><br><span class="line">            self.fc.add(nn.Dropout(<span class="number">0.1</span>))</span><br><span class="line">            self.fc.add(nn.Dense(<span class="number">32</span>))</span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hybrid_forward</span><span class="params">(self,F,text,history)</span>:</span></span><br><span class="line">        temp = self.encodeNet(text)</span><br><span class="line">        result1 = self.decodeNet(temp)</span><br><span class="line">        result2 = self.fc(F.concat(history, temp, dim=<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">return</span> [result1,result2]</span><br><span class="line"></span><br><span class="line">net = JoinModel()</span><br><span class="line">net.initialize(ctx=ctx)</span><br><span class="line">net.hybridize()</span><br><span class="line"></span><br><span class="line">val_file = h5py.File(<span class="string">'../data/JoinModel/validation_normalization_Join.h5'</span>, <span class="string">'r'</span>)</span><br><span class="line">text_val_h5 = nd.array(val_file[<span class="string">"Input1"</span>][:]).as_in_context(ctx)</span><br><span class="line">history_val_h5 = nd.array(val_file[<span class="string">"Input2"</span>][:]).as_in_context(ctx)</span><br><span class="line">UnitVec_val_h5 = nd.array(val_file[<span class="string">"Output1"</span>][:]).as_in_context(ctx)</span><br><span class="line">val_file.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># load data from file</span></span><br><span class="line"><span class="keyword">with</span> h5py.File(<span class="string">'../data/JoinModel/training_normalization_Join.h5'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> h5file:</span><br><span class="line">    text_h5 = h5file[<span class="string">"Input1"</span>]</span><br><span class="line">    history_h5 = h5file[<span class="string">"Input2"</span>]</span><br><span class="line">    UnitVec_h5 = h5file[<span class="string">"Output1"</span>]</span><br><span class="line">    </span><br><span class="line">    num_examples=text_h5.shape[<span class="number">0</span>]</span><br><span class="line">    min_val_loss=float(<span class="string">"inf"</span>) </span><br><span class="line">    </span><br><span class="line">    epochs=<span class="number">100</span></span><br><span class="line">    batch_size = <span class="number">128</span></span><br><span class="line">    dataiter = mx.io.NDArrayIter([text_h5,history_h5], UnitVec_h5, batch_size=batch_size)</span><br><span class="line">    square_loss = gluon.loss.L2Loss()</span><br><span class="line">    trainer = gluon.Trainer(net.collect_params(), <span class="string">'sgd'</span>, &#123;<span class="string">'learning_rate'</span>: <span class="number">0.1</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(epochs):</span><br><span class="line">        total_loss = <span class="number">0</span></span><br><span class="line">        dataiter.reset()</span><br><span class="line">        <span class="keyword">for</span> iBatch, batch <span class="keyword">in</span> enumerate(dataiter):</span><br><span class="line">            <span class="keyword">with</span> autograd.record():</span><br><span class="line">                output = net(batch.data[<span class="number">0</span>].as_in_context(ctx),batch.data[<span class="number">1</span>].as_in_context(ctx))</span><br><span class="line">                loss1 = square_loss(output[<span class="number">0</span>], batch.label[<span class="number">0</span>].as_in_context(ctx))</span><br><span class="line">                loss2 = square_loss(output[<span class="number">1</span>], batch.label[<span class="number">0</span>].as_in_context(ctx))</span><br><span class="line">                loss = loss1+loss2</span><br><span class="line">            loss.backward()</span><br><span class="line">            trainer.step(batch_size)</span><br><span class="line">            total_loss += nd.sum(loss).asscalar()</span><br><span class="line">            <span class="keyword">if</span> iBatch % <span class="number">100</span> == <span class="number">0</span>:</span><br><span class="line">                print(<span class="string">"Epoch %d, Batch: %d/%d, average loss: %f"</span>%(epoch,iBatch,num_examples/batch_size,nd.mean(loss).asscalar()))</span><br><span class="line">        print(<span class="string">"Epoch %d finished, average loss of training set: %f"</span> % (epoch, total_loss/num_examples))</span><br><span class="line">        res = net(text_val_h5,history_val_h5)</span><br><span class="line">        val_loss = nd.mean(square_loss(res[<span class="number">0</span>],UnitVec_val_h5)+square_loss(res[<span class="number">1</span>],UnitVec_val_h5)).asscalar()</span><br><span class="line">        print(<span class="string">"\n-----loss of validation set: %f-----\n"</span> % val_loss)</span><br><span class="line">        <span class="keyword">if</span>(val_loss &lt; min_val_loss):</span><br><span class="line">            min_val_loss=val_loss</span><br><span class="line">            net.export(<span class="string">'JoinModel'</span>)</span><br><span class="line">            print(<span class="string">"---validation set got a smaller loss---\n---------------Save net----------------\n"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å¯¼å…¥æµ‹è¯•-1"><a href="#å¯¼å…¥æµ‹è¯•-1" class="headerlink" title="å¯¼å…¥æµ‹è¯•"></a>å¯¼å…¥æµ‹è¯•</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"><span class="keyword">from</span> mxnet <span class="keyword">import</span> nd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment">##############   Re-importing the net  ##############</span></span><br><span class="line">print(<span class="string">"##############   Re-importing the net  ##############"</span>)</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line">sym = mx.symbol.load(<span class="string">'JoinModel-symbol.json'</span>) </span><br><span class="line">mod=mx.mod.Module(symbol=sym,data_names=[<span class="string">'data0'</span>,<span class="string">'data1'</span>])</span><br><span class="line">mod.bind(data_shapes=[(<span class="string">'data0'</span>,(<span class="number">1</span>,<span class="number">524</span>)),(<span class="string">'data1'</span>,(<span class="number">1</span>,<span class="number">128</span>))])</span><br><span class="line">mod.load_params(<span class="string">'JoinModel-0000.params'</span>)</span><br><span class="line">Batch=namedtuple(<span class="string">'Batch'</span>,[<span class="string">'data'</span>])</span><br><span class="line">x = nd.random.normal(shape=(<span class="number">1</span>,<span class="number">524</span>))</span><br><span class="line">y = nd.random.normal(shape=(<span class="number">1</span>,<span class="number">128</span>))</span><br><span class="line">mod.forward(Batch(data=[x,y]),is_train=<span class="literal">False</span>)</span><br><span class="line"><span class="keyword">print</span> mod.get_outputs()</span><br><span class="line"><span class="keyword">print</span> sym.list_outputs()</span><br></pre></td></tr></table></figure>
<h1 id="MXNetæºç é˜…è¯»"><a href="#MXNetæºç é˜…è¯»" class="headerlink" title="MXNetæºç é˜…è¯»"></a>MXNetæºç é˜…è¯»</h1><h2 id="io-py"><a href="#io-py" class="headerlink" title="io.py"></a>io.py</h2><p>ä½äºE:\Anaconda\envs\gluon\Lib\site-packages\mxnet<br>é˜…è¯»å¦‚ä½•è‡ªå®šä¹‰è¿­ä»£å™¨</p>
]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>Python</tag>
        <tag>MXNet</tag>
      </tags>
  </entry>
  <entry>
    <title>Python</title>
    <url>/2018/07/26/Python/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h1 id="ä½¿ç”¨ä¸­æ–‡"><a href="#ä½¿ç”¨ä¸­æ–‡" class="headerlink" title="ä½¿ç”¨ä¸­æ–‡"></a>ä½¿ç”¨ä¸­æ–‡</h1><p><code># -*- coding: utf-8 -*-</code> å‘Šè¯‰Pythonè§£é‡Šå™¨ï¼Œç”¨UTF-8ç¼–ç è¯»å–æºä»£ç <br><code>print u&#39;ä¸­æ–‡&#39;</code>  uè¡¨ç¤ºUnicodeå­—ç¬¦ä¸²</p>
<h1 id="Pythonè¯´æ˜"><a href="#Pythonè¯´æ˜" class="headerlink" title="Pythonè¯´æ˜"></a>Pythonè¯´æ˜</h1><p>Pythonä»£ç çš„ç¼©è¿›è§„åˆ™è¯´ï¼šæœ€å¥½ä½¿ç”¨4ä¸ªç©ºæ ¼<br><code>ipython --pylab</code> å¯¼å…¥äº†numpy(np) å’Œ matplotlib<br><a id="more"></a></p>
<h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><h2 id="é¢„å¤‡åŸºç¡€çŸ¥è¯†"><a href="#é¢„å¤‡åŸºç¡€çŸ¥è¯†" class="headerlink" title="é¢„å¤‡åŸºç¡€çŸ¥è¯†"></a>é¢„å¤‡åŸºç¡€çŸ¥è¯†</h2><ol>
<li><p>è‹¥è‡ªå®šä¹‰å‡½æ•°æ²¡æœ‰returnï¼Œå‡½æ•°æ‰§è¡Œå®Œæ¯•åè¿”å›None</p>
</li>
<li><p>ä¿æŒå­—å…¸é¡ºåºä¸å˜ä½¿ç”¨OrderedDict</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"><span class="keyword">print</span> dict([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)]) <span class="comment">#Random</span></span><br><span class="line"><span class="keyword">print</span> OrderedDict([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)]) <span class="comment">#Ordered</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å‘½ä»¤è¡Œå‚æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys </span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">"__main__"</span>: </span><br><span class="line">    <span class="keyword">print</span> len(sys.argv) </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> sys.argv: </span><br><span class="line">        <span class="keyword">print</span> i,</span><br><span class="line"><span class="comment">#save as test.py</span></span><br><span class="line"><span class="comment">#python test.py </span></span><br><span class="line"><span class="comment">#result: 1 2 3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç”¨râ€™â€¦â€™æ¥æŠ‘åˆ¶è½¬ä¹‰<br>æ¯”å¦‚<code>path = r&#39;C:\xzhou\Desktop&#39;</code></p>
</li>
<li><p>å…³äºå¸ƒå°”è¿ç®—<br>PythonæŠŠ0ã€ç©ºå­—ç¬¦ä¸²â€™â€™å’ŒNoneçœ‹æˆ False<br>å…¶ä»–æ•°å€¼å’Œéç©ºå­—ç¬¦ä¸²éƒ½çœ‹æˆ True<br>ä¸è¿‡ä¸è¦å®Œå…¨ä¾èµ–è¿™ä¸€ç‚¹</p>
</li>
<li><p>List</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">L=[<span class="string">'Michael'</span>, <span class="string">'Bob'</span>, <span class="string">'Tracy'</span>]  <span class="comment"># åˆ›å»ºList</span></span><br><span class="line"><span class="comment">#å¯ç”¨ç´¢å¼• L [0], L [2], L [-1], L [-3], L [0:3]</span></span><br><span class="line">L [<span class="number">-1</span>::<span class="number">-1</span>]   <span class="comment">#å¾—åˆ° L çš„é€†åº['Tracy', 'Bob', 'Michael'] </span></span><br><span class="line">L [::<span class="number">-1</span>]     <span class="comment">#å¾—åˆ° L çš„é€†åº['Tracy', 'Bob', 'Michael'] </span></span><br><span class="line">L [<span class="number">-1</span>:<span class="number">0</span>:<span class="number">-1</span>]  <span class="comment">#å¾—åˆ°['Tracy', 'Bob']</span></span><br><span class="line">L .append(<span class="string">'Paul'</span>)  <span class="comment">#æ”¹å˜äº†L</span></span><br><span class="line">L .insert(<span class="number">0</span>, <span class="string">'Paul'</span>)  <span class="comment"># æ”¹å˜äº†L  L ç°åœ¨ä¸º['Paul', 'Michael', 'Bob', 'Tracy', 'Paul']</span></span><br><span class="line">L .pop()  <span class="comment">#è¿”å›'Paul' L ç°åœ¨ä¸º['Paul', 'Michael', 'Bob', 'Tracy'] </span></span><br><span class="line">L .pop(<span class="number">0</span>) <span class="comment">#è¿”å›'Bob' L ç°åœ¨ä¸º ['Michael', 'Bob', 'Tracy']</span></span><br><span class="line">L [<span class="number">2</span>] = <span class="string">'Paul'</span> <span class="comment"># L ç°åœ¨ä¸º['Michael', 'Bob', 'Paul']</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>è¿­ä»£åˆ—è¡¨:<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=range(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> iter(a): </span><br><span class="line">   <span class="keyword">print</span> i</span><br></pre></td></tr></table></figure></p>
<p>åˆ—è¡¨çš„æ‹¼æ¥ï¼ˆstr,tupleä¹Ÿå¯ä»¥è¿™æ ·,dictå’Œsetä¸è¡Œï¼‰:<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = []</span><br><span class="line">b = [<span class="number">1</span>,]</span><br><span class="line">c = [<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">print</span> a+b+c <span class="comment">#[1,2,3]</span></span><br><span class="line"><span class="keyword">print</span> c * <span class="number">2</span> <span class="comment">#[2,3,2,3]</span></span><br><span class="line"><span class="keyword">print</span> []+[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]]+[[<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>]] <span class="comment">#[[1,2],[3,4],[5,6],[7,8]]</span></span><br></pre></td></tr></table></figure></p>
<ol start="7">
<li>Tuple<br>Tupleæ²¡æœ‰append()æ–¹æ³•ï¼Œä¹Ÿæ²¡æœ‰insert()å’Œpop()æ–¹æ³•ã€‚<br>è·å–Tupleå…ƒç´ çš„æ–¹å¼å’ŒListä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ t[0]ï¼Œt[-1]ç­‰ç´¢å¼•æ–¹å¼è®¿é—®å…ƒç´ ï¼Œä½†æ˜¯ä¸èƒ½èµ‹å€¼æˆåˆ«çš„å…ƒç´ </li>
</ol>
<p>Tupleå’ŒListä¸€æ ·ï¼Œå¯ä»¥åŒ…å« 0 ä¸ªã€1ä¸ªå’Œä»»æ„å¤šä¸ªå…ƒç´ <br>t = ()å¯¹åº”s=[]<br>t=(1,)å¯¹åº”s=[1], ä¸ºäº†é˜²æ­¢æ­§ä¹‰è€Œä¸ä½¿ç”¨(1)</p>
<p>ä¸è¿‡å½“TupleåŒ…æ‹¬éTupleç±»å‹æ—¶å¯æ”¹å˜<br>å¦‚t = (â€˜aâ€™, â€˜bâ€™, [â€˜Aâ€™, â€˜Bâ€™])å¯æ”¹å˜[â€˜Aâ€™, â€˜Bâ€™]å†…çš„å…ƒç´ <br>ä½†t = (â€˜aâ€™, â€˜bâ€™, (â€˜Aâ€™, â€˜Bâ€™))ä¸å¯ä»¥</p>
<ol start="8">
<li><p>dict<br>len(d)å¾—åˆ°å­—å…¸é•¿åº¦<br>d.get(â€˜Bartâ€™)å¾—åˆ°â€™Bartâ€™å¯¹åº”çš„é”®ï¼Œä¸å­˜åœ¨è¿”å›None</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">d = &#123;<span class="string">'a'</span>:[<span class="number">1</span>,<span class="number">2</span>],<span class="string">'b'</span>:[<span class="string">'hello'</span>,<span class="string">'xiao'</span>,<span class="number">3</span>]&#125;</span><br><span class="line"><span class="keyword">print</span> d.items()</span><br><span class="line"><span class="comment"># éå†é”®</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> d:</span><br><span class="line">    <span class="keyword">print</span> key,</span><br><span class="line"><span class="comment"># éå†é”®å€¼</span></span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> d.items(): <span class="comment">#åˆ›å»ºè¿­ä»£å™¨ï¼Œæ•ˆç‡æ›´é«˜</span></span><br><span class="line">    <span class="keyword">print</span> key,value</span><br><span class="line"><span class="comment"># æ›´å¿«çš„éå†é”®å€¼ï¼Œä¹Ÿçœå†…å­˜</span></span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> d.iteritems(): <span class="comment">#åˆ›å»ºè¿­ä»£å™¨ï¼Œæ•ˆç‡æ›´é«˜</span></span><br><span class="line">    <span class="keyword">print</span> key,value</span><br><span class="line"><span class="comment"># éå†å€¼</span></span><br><span class="line"><span class="keyword">for</span> v <span class="keyword">in</span> d.values():</span><br><span class="line">    <span class="keyword">print</span> v,</span><br><span class="line"><span class="comment"># æ›´å¿«é€Ÿçš„éå†å€¼ï¼Œä¹Ÿçœå†…å­˜</span></span><br><span class="line"><span class="keyword">for</span> v <span class="keyword">in</span> d.itervalues(): </span><br><span class="line">    <span class="keyword">print</span> v,</span><br></pre></td></tr></table></figure>
<p>å¦å¤–å€¼å¾—æ³¨æ„çš„æ˜¯keyåªèƒ½é€‰æ‹©ä¸èƒ½è¢«æ”¹å˜çš„æ•°æ®ç±»å‹å¦‚æ•´æ•°ã€å­—ç¬¦ä¸²ã€Tupleï¼Œä¸èƒ½ç”¨List</p>
</li>
<li><p>setç±»å‹<br>å› ä¸ºå¼ºè°ƒçš„äº‹å¹¶é›†ï¼Œæ‰€ä»¥æ’åºæ— è§„å¾‹ä¹Ÿä¸æ”¯æŒç´¢å¼•<br>æ”¯æŒ len(s), â€˜Aâ€™ in s ç­‰</p>
</li>
</ol>
<p>setçš„å†…éƒ¨ç»“æ„å’Œdictå¾ˆåƒï¼Œå”¯ä¸€åŒºåˆ«æ˜¯ä¸å­˜å‚¨valueï¼Œå› æ­¤ï¼Œåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨setä¸­é€Ÿåº¦å¾ˆå¿«ã€‚<br>setå­˜å‚¨çš„å…ƒç´ å’Œdictçš„keyç±»ä¼¼ï¼Œå¿…é¡»æ˜¯ä¸å˜å¯¹è±¡ï¼Œå› æ­¤ï¼Œä»»ä½•å¯å˜å¯¹è±¡æ˜¯ä¸èƒ½æ”¾å…¥setä¸­çš„ã€‚<br>æœ€åï¼Œsetå­˜å‚¨çš„å…ƒç´ ä¹Ÿæ˜¯æ²¡æœ‰é¡ºåºçš„ã€‚<br>é€‚ç”¨åœºåˆï¼šè®©ç”¨æˆ·è¾“å…¥æ˜ŸæœŸä¸€è‡³æ˜ŸæœŸæ—¥çš„æŸå¤©ï¼Œåˆ¤æ–­ç”¨æˆ·çš„è¾“å…¥æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ˜ŸæœŸï¼Ÿ</p>
<p>æ›´æ–°set: å¢åŠ å…ƒç´ æ˜¯s.add(â€˜Aâ€™), åˆ é™¤æ˜¯s.remove(â€˜Aâ€™), åˆ é™¤çš„å…ƒç´ ä¸åœ¨setä¸­ï¼Œremoveä¼šæŠ¥é”™</p>
<ol start="10">
<li><p>å®šä¹‰å¯å˜å‚æ•°å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(*args)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> args</span><br><span class="line">fn() <span class="comment">#() </span></span><br><span class="line">fn(<span class="string">'a'</span>) <span class="comment">#('a',)</span></span><br><span class="line">fn(<span class="string">'a'</span>, <span class="string">'b'</span>) <span class="comment">#('a', 'b')</span></span><br><span class="line">fn([<span class="string">'a'</span>, <span class="string">'b'</span>]) <span class="comment">#(['a', 'b'],)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>enumerate å¾ˆæœ‰ç”¨çš„å‡½æ•°ï¼Œç”¨äºç´¢å¼•ã€è¿­ä»£</p>
</li>
<li><p>zip()å‡½æ•°<br>å¯ä»¥æŠŠä¸¤ä¸ª list å˜æˆä¸€ä¸ª listï¼Œç±»ä¼¼äºè½¬ç½®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">zip([<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>], [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>])</span><br><span class="line"><span class="comment"># [(10, 'A'), (20, 'B'), (30, 'C')]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ—è¡¨ç”Ÿæˆå¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">3</span>)]   <span class="comment">#[1, 4, 9]</span></span><br><span class="line">[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">6</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]  <span class="comment">#[4, 16, 36]</span></span><br><span class="line">[m + n <span class="keyword">for</span> m <span class="keyword">in</span> <span class="string">'ABC'</span> <span class="keyword">for</span> n <span class="keyword">in</span> <span class="string">'123'</span>]  <span class="comment">#['A1', 'A2', 'A3', 'B1', 'B2', 'B3', 'C1', 'C2', 'C3']</span></span><br><span class="line">&#123;phone:i <span class="keyword">for</span> i, phone <span class="keyword">in</span> enumerate(set(y))&#125; æ­é…å­—å…¸å“¦ğŸ˜¯</span><br></pre></td></tr></table></figure>
</li>
<li><p>å˜é‡å¯ä»¥æŒ‡å‘å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">len=abs</span><br><span class="line"><span class="comment">#len([1,2,3]) æŠ¥é”™</span></span><br><span class="line"><span class="keyword">print</span> len(<span class="number">-5</span>)      <span class="comment">#5  è¯´æ˜å‡½æ•°åå°±æ˜¯æŒ‡å‘å‡½æ•°çš„å˜é‡</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">g</span><span class="params">(a,b,f)</span>:</span>      <span class="comment">#é«˜é˜¶å‡½æ•°ï¼ˆå¯ä»¥æ¥å—å‡½æ•°çš„å‡½æ•°ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> f(a)+f(b)</span><br><span class="line"><span class="keyword">print</span> g(<span class="number">-3</span>,<span class="number">6</span>,abs)  <span class="comment">#9</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>mapå‡½æ•°ï¼ˆåŒMathematicaçš„Mapï¼‰ï¼š<br><code>map(lambda i:i**2, [1, 2, 3]) #å¾—åˆ°[1, 4, 9]</code></p>
</li>
<li>reduceå‡½æ•°ï¼ˆç±»ä¼¼Mathematicaçš„Foldï¼‰ï¼š<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reduce(<span class="keyword">lambda</span> i,j:i+j, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="number">10</span>)  <span class="comment">#16 Fold[#1 + #2 &amp;, 10, &#123;1, 2, 3&#125;]</span></span><br><span class="line">reduce(<span class="keyword">lambda</span> i,j:i+j, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])     <span class="comment">#6  Fold[#1 + #2 &amp;, &#123;1, 2, 3&#125;]</span></span><br></pre></td></tr></table></figure></li>
<li><p>filterå‡½æ•°ï¼ˆç±»ä¼¼Mathematicaçš„Select ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">filter(lambda i:i%2&#x3D;&#x3D;0, range(10)) #[0, 2, 4, 6, 8] </span><br><span class="line">filter(lambda str:str and str.strip()&gt;0, [&#39;test&#39;, None, &#39;&#39;, &#39;str&#39;, &#39; &#39;, ...: &#39;END&#39;])</span><br><span class="line">#è¾“å‡º[&#39;test&#39;, &#39;str&#39;, &#39;END&#39;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>sortedå‡½æ•°å¯ä»¥ç”¨æ¥æ’åº:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sorted([<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">9</span>]) <span class="comment">#è¾“å‡º[1, 2, 5, 5, 9] </span></span><br><span class="line">sorted([<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">9</span>],<span class="keyword">lambda</span> i,j:cmp(j,i)) <span class="comment">#è¾“å‡º[9, 5, 5, 2, 1] </span></span><br><span class="line">sorted([<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">9</span>],<span class="keyword">lambda</span> i,j:cmp(i,j)) <span class="comment">#è¾“å‡º[1, 2, 5, 5, 9]</span></span><br><span class="line"><span class="comment"># Application</span></span><br><span class="line">a = [<span class="string">'5_3'</span>,<span class="string">'2_6'</span>,<span class="string">'4_9'</span>,<span class="string">'2_1'</span>]</span><br><span class="line">sorted(a, key = <span class="keyword">lambda</span> i: (i.split(<span class="string">'_'</span>)[<span class="number">0</span>], i.split(<span class="string">'_'</span>)[<span class="number">1</span>]))</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿”å›å‡½æ•°çš„å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc_prod</span><span class="params">(lst)</span>:</span> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lazy_prod</span><span class="params">()</span>:</span> </span><br><span class="line">        <span class="keyword">return</span> reduce((<span class="keyword">lambda</span> x,y: x*y),lst) </span><br><span class="line">    <span class="keyword">return</span> lazy_prod</span><br><span class="line"></span><br><span class="line">f = calc_prod([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="keyword">print</span> f()</span><br></pre></td></tr></table></figure>
</li>
<li><p>é—­åŒ…ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">()</span>:</span> </span><br><span class="line">    fs = [] </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">4</span>): </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span> </span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line">        fs.append(f) </span><br><span class="line">    <span class="keyword">print</span> fs </span><br><span class="line">    <span class="keyword">return</span> fs</span><br><span class="line"></span><br><span class="line">f1, f2, f3 = count()  <span class="comment">#f1() f2() f3() éƒ½æ˜¯3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>çº¯å‡½æ•°å†…åŠ å…¥æ¡ä»¶åˆ¤æ–­<br><code>lambda x: -x if x &lt; 0 else x</code></p>
</li>
<li><p>é¢å‘å¯¹è±¡ç¼–ç¨‹ åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä½¿ç”¨é”®å€¼å¯¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, gender, birth, **kw)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.gender = gender</span><br><span class="line">        self.birth = birth</span><br><span class="line">        <span class="keyword">for</span> k, v <span class="keyword">in</span> kw.iteritems():</span><br><span class="line">            setattr(self, k, v)</span><br><span class="line">xiaoming = Person(<span class="string">'Xiao Ming'</span>, <span class="string">'Male'</span>, <span class="string">'1990-1-1'</span>, job=<span class="string">'Student'</span>)</span><br><span class="line"><span class="keyword">print</span> xiaoming.name    <span class="comment">#Xiao Ming</span></span><br><span class="line"><span class="keyword">print</span> xiaoming.job     <span class="comment">#Student</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>decoratorè£…é¥°å™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(x)</span>:</span> </span><br><span class="line">    <span class="keyword">return</span> x*<span class="number">2</span> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(f)</span>:</span> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(x)</span>:</span> </span><br><span class="line">        <span class="keyword">print</span> <span class="string">'Using decorator...\ncall '</span> + f.__name__+ <span class="string">'()'</span> </span><br><span class="line">        <span class="keyword">return</span> f(x) </span><br><span class="line">    <span class="keyword">return</span> fn </span><br><span class="line">f1 = decorator(f1) </span><br><span class="line"><span class="keyword">print</span> f1(<span class="number">5</span>) </span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(x)</span>:</span> </span><br><span class="line">    <span class="keyword">return</span> x*x </span><br><span class="line"><span class="keyword">print</span> f2(<span class="number">5</span>)</span><br><span class="line"><span class="comment">#æ‰“å°å‡ºäº†ï¼š</span></span><br><span class="line"><span class="comment">#Using decorator... </span></span><br><span class="line"><span class="comment">#call f1() </span></span><br><span class="line"><span class="comment">#10 </span></span><br><span class="line"><span class="comment">#Using decorator...</span></span><br><span class="line"><span class="comment">#call f2()</span></span><br><span class="line"><span class="comment">#25</span></span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™æ— å‚æ•°çš„decoratorè£…é¥°å™¨ç”¨äºè®°å½•å‡½æ•°è¿è¡Œæ•ˆç‡ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">performance</span><span class="params">(f)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">        t1 = time.time()</span><br><span class="line">        r = f(*args, **kw)</span><br><span class="line">        t2 = time.time()</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'call %s() in %fs'</span> % (f.__name__, (t2 - t1))</span><br><span class="line">        <span class="keyword">return</span> r</span><br><span class="line">    <span class="keyword">return</span> fn</span><br><span class="line"></span><br><span class="line"><span class="meta">@performance</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factorial</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> reduce(<span class="keyword">lambda</span> x,y: x*y, range(<span class="number">1</span>, n+<span class="number">1</span>))</span><br><span class="line"><span class="keyword">print</span> factorial(<span class="number">10</span>)</span><br><span class="line"><span class="comment">#call factorial() in 0.000005s </span></span><br><span class="line"><span class="comment">#3628800</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åå‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line">sorted_ignore_case = functools.partial(sorted, cmp=<span class="keyword">lambda</span> s1, s2: cmp(s1.upper(), s2.upper()))</span><br><span class="line"><span class="keyword">print</span> sorted_ignore_case([<span class="string">'bob'</span>, <span class="string">'about'</span>, <span class="string">'Zoo'</span>, <span class="string">'Credit'</span>])</span><br><span class="line"><span class="comment">#ç¬¬ä¸€ä¸ªcmpæ˜¯sortedå‡½æ•°å‚æ•°ä¸­çš„ä¸€ä¸ªé”®</span></span><br><span class="line"><span class="comment">#è¾“å‡º['about', 'bob', 'Credit', 'Zoo']</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å¾—åˆ°å…ƒç´ ä½ç½®çš„indexå‡½æ•°ï¼š<br>index() å‡½æ•°ç”¨äºä»åˆ—è¡¨ä¸­æ‰¾å‡ºæŸä¸ªå€¼ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ç´¢å¼•ä½ç½®ã€‚<br>æ‰€ä»¥lis.index(min(lis))å¯ä»¥å¾—åˆ°æœ€å°å€¼çš„ç´¢å¼•ï¼Œnumpy.argminå…¶å®å°±æ˜¯å¹²è¿™ä¸ªçš„</p>
</li>
</ol>
<h3 id="ç´¯åŠ å‡½æ•°"><a href="#ç´¯åŠ å‡½æ•°" class="headerlink" title="ç´¯åŠ å‡½æ•°"></a>ç´¯åŠ å‡½æ•°</h3><p>python3<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> accumulate</span><br><span class="line">list(accumulate(range(<span class="number">10</span>)))</span><br><span class="line"><span class="comment">#[0, 1, 3, 6, 10, 15, 21, 28, 36, 45]</span></span><br><span class="line"><span class="keyword">import</span> operator</span><br><span class="line">list(accumulate(range(<span class="number">1</span>,<span class="number">5</span>), operator.mul))</span><br><span class="line"><span class="comment">#[1, 2, 6, 24]</span></span><br></pre></td></tr></table></figure></p>
<h2 id="æ˜“é”™ç‚¹"><a href="#æ˜“é”™ç‚¹" class="headerlink" title="æ˜“é”™ç‚¹"></a>æ˜“é”™ç‚¹</h2><ol>
<li>type(round(12.3))æ˜¯floatç±»å‹</li>
<li>x[a:a+N]å®é™…ä¸Šxçš„é•¿åº¦å°±æ˜¯N  x[:a]+x[a:]==x</li>
<li>0 % N == 0.0 (N != 0) </li>
<li>æ™®é€šæ•°ç»„æ˜¯åœ°å€ä¼ é€’<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.arange(<span class="number">10</span>)</span><br><span class="line">b = a[<span class="number">3</span>:<span class="number">6</span>]</span><br><span class="line">b[<span class="number">2</span>] = <span class="number">1000</span></span><br><span class="line"><span class="comment"># aç«Ÿç„¶è¢«bæ”¹å˜äº†ï¼Œæ³¨æ„</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"a is "</span>+ str(a)  <span class="comment">#a is [ 0 1 2 3 4 1000 6 7 8 9] </span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"b is "</span>+ str(b)  <span class="comment">#b is [ 3 4 1000]</span></span><br></pre></td></tr></table></figure></li>
<li>numpyçš„stdä¸Mathematicaã€Matlabä¸åŒ<br>è®¾ç½®<code>np.std(lis,ddof=1)</code>å³ç›¸åŒã€‚åŸå› åœ¨äºæ–¹å·®æ˜¯é™¤ä»¥æ ·æœ¬é•¿åº¦N(numpyé»˜è®¤)ï¼Œè¿˜æ˜¯N-1ï¼ˆmathematica æ— åä¼°è®¡ï¼‰ã€‚</li>
</ol>
<h1 id="pythonç³»ç»Ÿç®¡ç†ç›¸å…³"><a href="#pythonç³»ç»Ÿç®¡ç†ç›¸å…³" class="headerlink" title="pythonç³»ç»Ÿç®¡ç†ç›¸å…³"></a>pythonç³»ç»Ÿç®¡ç†ç›¸å…³</h1><h2 id="æŸ¥çœ‹pythonå®‰è£…ç›®å½•"><a href="#æŸ¥çœ‹pythonå®‰è£…ç›®å½•" class="headerlink" title="æŸ¥çœ‹pythonå®‰è£…ç›®å½•"></a>æŸ¥çœ‹pythonå®‰è£…ç›®å½•</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">path = sys.executable</span><br><span class="line">print(path)</span><br></pre></td></tr></table></figure>
<h2 id="pipå‡çº§åŒ…"><a href="#pipå‡çº§åŒ…" class="headerlink" title="pipå‡çº§åŒ…"></a>pipå‡çº§åŒ…</h2><p><code>pip install --pre mxnet-cu80 --upgrade</code></p>
<h1 id="ç¬¬ä¸‰æ–¹åº“"><a href="#ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="ç¬¬ä¸‰æ–¹åº“"></a>ç¬¬ä¸‰æ–¹åº“</h1><h2 id="scipy"><a href="#scipy" class="headerlink" title="scipy"></a>scipy</h2><p>åŒ…æ‹¬fft,fftshift,çª—å‡½æ•°ç­‰ä¿¡å·å¤„ç†ç®—æ³•</p>
<h2 id="Numpy"><a href="#Numpy" class="headerlink" title="Numpy"></a>Numpy</h2><h3 id="å¤æ•°è®¡ç®—"><a href="#å¤æ•°è®¡ç®—" class="headerlink" title="å¤æ•°è®¡ç®—"></a>å¤æ•°è®¡ç®—</h3><p><code>X=np.array([1-1j, 1+0.000000000000001j, 4+9j],dtype=complex)</code><br>X.realå¾—åˆ°å®éƒ¨ X.imagå¾—å¸¦è™šéƒ¨<br>X.imag[np.abs(X.imag)&lt;0.1]ç­›é€‰å‡ºç¬¬äºŒä¸ªå…ƒç´ <br>np.unwrap(np.angle(X))å¯ä»¥è§£å·ç»•Xçš„ç›¸ä½</p>
<h3 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h3><h4 id="ä¸€èˆ¬ç´¢å¼•"><a href="#ä¸€èˆ¬ç´¢å¼•" class="headerlink" title="ä¸€èˆ¬ç´¢å¼•"></a>ä¸€èˆ¬ç´¢å¼•</h4><p><code>a=np.zeros((3,4))</code><br>a[:,1:3] å¾—åˆ°çš„æ˜¯3<em>2çš„çŸ©é˜µ<br>a[:,[1]] å¾—åˆ°çš„æ˜¯3</em>1çš„çŸ©é˜µ<br>a[:, 1 ] å¾—åˆ°çš„æ˜¯(3,)çš„æ•°ç»„</p>
<h4 id="æ ¹æ®æ¡ä»¶ç´¢å¼•"><a href="#æ ¹æ®æ¡ä»¶ç´¢å¼•" class="headerlink" title="æ ¹æ®æ¡ä»¶ç´¢å¼•"></a>æ ¹æ®æ¡ä»¶ç´¢å¼•</h4><p>ç¬¦åˆæ¡ä»¶åˆ™xå¦åˆ™y<br>API:numpy.where(condition[, x, y])<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.where([[<span class="literal">True</span>, <span class="literal">False</span>], [<span class="literal">True</span>, <span class="literal">True</span>]], [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]], [[<span class="number">9</span>, <span class="number">8</span>], [<span class="number">7</span>, <span class="number">6</span>]])</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>array([[1, 8],<br>        [3, 4]])</p>
</blockquote>
<p>åªæœ‰æ¡ä»¶çš„è¯è¿”å›condition.nonzero()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = np.arange(<span class="number">9.</span>).reshape(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line">np.where( x &gt; <span class="number">5</span> )</span><br></pre></td></tr></table></figure>
<blockquote>
<p>(array([2, 2, 2]), array([0, 1, 2]))</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x[np.where( x &gt; <span class="number">3.0</span> )]               <span class="comment"># Note: result is 1D.</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>array([ 4.,  5.,  6.,  7.,  8.])</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.where(x &lt; <span class="number">5</span>, x, <span class="number">-1</span>)               <span class="comment"># Note: broadcasting.</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>array([[ 0.,  1.,  2.],<br>        [ 3.,  4., -1.],<br>        [-1., -1., -1.]])</p>
</blockquote>
<h3 id="åˆ é™¤æŸä¸€ç»´åº¦æ•°æ®"><a href="#åˆ é™¤æŸä¸€ç»´åº¦æ•°æ®" class="headerlink" title="åˆ é™¤æŸä¸€ç»´åº¦æ•°æ®"></a>åˆ é™¤æŸä¸€ç»´åº¦æ•°æ®</h3><p>np.delete(arr, 1, axis=0)<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>], [<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]])</span><br><span class="line">np.delete(arr, <span class="number">1</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>array([[ 1,  2,  3,  4],<br>       [ 9, 10, 11, 12]])</p>
</blockquote>
<p><code>np.delete(arr, np.s_[::2], 1)</code> ç”¨<code>np.s_</code>æ„é€ ç´¢å¼•</p>
<blockquote>
<p>array([[ 2,  4],<br>        [ 6,  8],<br>        [10, 12]])</p>
</blockquote>
<p><code>np.delete(arr, [1,3,5], None)</code></p>
<blockquote>
<p>array([ 1,  3,  5,  7,  8,  9, 10, 11, 12])</p>
</blockquote>
<h3 id="allå‡½æ•°"><a href="#allå‡½æ•°" class="headerlink" title="allå‡½æ•°"></a>allå‡½æ•°</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=np.arange(<span class="number">-3</span>,<span class="number">3</span>)</span><br><span class="line">np.all(abs(a)&lt;<span class="number">5</span>) <span class="comment">#True</span></span><br><span class="line">a=np.arange(<span class="number">-3</span>,<span class="number">6</span>)</span><br><span class="line">np.all(abs(a)&lt;<span class="number">5</span>) <span class="comment">#False</span></span><br></pre></td></tr></table></figure>
<h3 id="æ›´æ”¹æ•°æ®ç±»å‹"><a href="#æ›´æ”¹æ•°æ®ç±»å‹" class="headerlink" title="æ›´æ”¹æ•°æ®ç±»å‹"></a>æ›´æ”¹æ•°æ®ç±»å‹</h3><p>astypeå‡½æ•°<br>å¦‚<code>a.astype(np.int32)</code></p>
<h3 id="æ™®é€šæ•°ç»„ä¸numpyæ•°ç»„äº’è½¬"><a href="#æ™®é€šæ•°ç»„ä¸numpyæ•°ç»„äº’è½¬" class="headerlink" title="æ™®é€šæ•°ç»„ä¸numpyæ•°ç»„äº’è½¬"></a>æ™®é€šæ•°ç»„ä¸numpyæ•°ç»„äº’è½¬</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.arange(<span class="number">3</span>).tolist() <span class="comment">#to list</span></span><br><span class="line">np.asarray([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>])   <span class="comment">#to numpy</span></span><br></pre></td></tr></table></figure>
<h3 id="axisçš„ç†è§£"><a href="#axisçš„ç†è§£" class="headerlink" title="axisçš„ç†è§£"></a>axisçš„ç†è§£</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=np.arange(<span class="number">20</span>).reshape(<span class="number">2</span>,<span class="number">10</span>) </span><br><span class="line">a.sum(axis=<span class="number">0</span>) </span><br><span class="line"><span class="comment">#array([10, 12, 14, 16, 18, 20, 22, 24, 26, 28])</span></span><br><span class="line">np.diff(a,axis=<span class="number">0</span>) </span><br><span class="line"><span class="comment">#å¾—åˆ°array([[10, 10, 10, 10, 10, 10, 10, 10, 10, 10]]) </span></span><br><span class="line">a.sum(axis=<span class="number">1</span>) </span><br><span class="line"><span class="comment">#array([ 45, 145])</span></span><br><span class="line"><span class="comment">#axis=0æŠŠåˆ—å½“åšæˆå¯¹å¤„ç†çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">#axis=1æŠŠè¡Œå½“åšæˆå¯¹å¤„ç†çš„å¯¹è±¡</span></span><br></pre></td></tr></table></figure>
<h3 id="å¹¿æ’­æœºåˆ¶"><a href="#å¹¿æ’­æœºåˆ¶" class="headerlink" title="å¹¿æ’­æœºåˆ¶"></a>å¹¿æ’­æœºåˆ¶</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.array([<span class="number">1</span>,<span class="number">2</span>])*np.array([<span class="number">3</span>,<span class="number">4</span>]) <span class="comment">#np.array([3,8]) è¡Œå‘é‡çš„å†…ç§¯ </span></span><br><span class="line">np.array([<span class="number">1</span>,<span class="number">2</span>])*np.array([[<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>,<span class="number">6</span>]])  <span class="comment">#np.array([[3,8],[5,12]]) è¡Œå‘é‡ä¹˜ä»¥çŸ©é˜µ </span></span><br><span class="line">np.array([<span class="number">1</span>,<span class="number">2</span>]).reshape(<span class="number">-1</span>,<span class="number">1</span>)*np.array([[<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>,<span class="number">6</span>]]) <span class="comment">#np.array([[3,4],[10,12]]) åˆ—å‘é‡ä¹˜ä»¥çŸ©é˜µ </span></span><br><span class="line">np.array([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]])*np.array([[<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>]]) <span class="comment">#çŸ©é˜µçš„ç‚¹ä¹˜</span></span><br></pre></td></tr></table></figure>
<h3 id="Element-wise"><a href="#Element-wise" class="headerlink" title="Element-wise"></a>Element-wise</h3><p><code>np.less([1, 2], [2, 2])</code>è¿”å›array([True, False], dtype=bool)</p>
<h3 id="è¡Œå‘é‡åˆ—å‘é‡çš„è½¬åŒ–"><a href="#è¡Œå‘é‡åˆ—å‘é‡çš„è½¬åŒ–" class="headerlink" title="è¡Œå‘é‡åˆ—å‘é‡çš„è½¬åŒ–"></a>è¡Œå‘é‡åˆ—å‘é‡çš„è½¬åŒ–</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]).reshape((<span class="number">-1</span>, <span class="number">1</span>)) <span class="comment"># &lt;--- THIS IS THE TRICK</span></span><br><span class="line">np.array([[<span class="number">5</span>, <span class="number">4</span>]]).T</span><br><span class="line"></span><br><span class="line">np.array([<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>]).shape  <span class="comment">#(3,) å‘é‡</span></span><br><span class="line">np.array([[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>]]).shape  <span class="comment">#(1,3) è¡Œå‘é‡</span></span><br></pre></td></tr></table></figure>
<h3 id="å‡½æ•°å¼ç¼–ç¨‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹"></a>å‡½æ•°å¼ç¼–ç¨‹</h3><h4 id="Outer"><a href="#Outer" class="headerlink" title="Outer"></a>Outer</h4><img src="/2018/07/26/Python/11.png" class="">
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">m=np.arange(<span class="number">5</span>);</span><br><span class="line">n=np.arange(<span class="number">5</span>);</span><br><span class="line">a=np.subtract.outer(m,n)  <span class="comment">#ç»“æœå’Œmmaä¸€æ ·</span></span><br></pre></td></tr></table></figure>
<h4 id="Inner"><a href="#Inner" class="headerlink" title="Inner"></a>Inner</h4><img src="/2018/07/26/Python/12.png" class="">
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.arange(<span class="number">12</span>).reshape((<span class="number">4</span>,<span class="number">3</span>))</span><br><span class="line">b = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">np.inner(a, b)  <span class="comment">#array([ 5, 14, 23, 32]) ç»“æœåŒMMA</span></span><br></pre></td></tr></table></figure>
<h3 id="æ‹¼æ¥"><a href="#æ‹¼æ¥" class="headerlink" title="æ‹¼æ¥"></a>æ‹¼æ¥</h3><h4 id="æ ‡å‡†æ•°å­¦å½¢å¼çš„æ‹¼æ¥"><a href="#æ ‡å‡†æ•°å­¦å½¢å¼çš„æ‹¼æ¥" class="headerlink" title="æ ‡å‡†æ•°å­¦å½¢å¼çš„æ‹¼æ¥"></a>æ ‡å‡†æ•°å­¦å½¢å¼çš„æ‹¼æ¥</h4><h5 id="æŒ‰åˆ—æ‹¼æ¥"><a href="#æŒ‰åˆ—æ‹¼æ¥" class="headerlink" title="æŒ‰åˆ—æ‹¼æ¥"></a>æŒ‰åˆ—æ‹¼æ¥</h5><p>åŒ…æ‹¬å‘é‡æ‹¼å‘é‡ å‘é‡æ‹¼çŸ©é˜µ çŸ©é˜µæ‹¼çŸ©é˜µ<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">b = np.array([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">c = np.vstack((a,b))</span><br><span class="line"><span class="keyword">print</span> c <span class="comment">#array([[1, 2, 3], [2, 3, 4]])</span></span><br><span class="line"><span class="keyword">print</span> np.vstack((a,c)) <span class="comment">#array([[1 2 3], [1 2 3], [2 3 4]])</span></span><br><span class="line"><span class="keyword">print</span> np.vstack((c,c)) <span class="comment">#array([[1 2 3], [2 3 4], [1 2 3], [2 3 4]])</span></span><br></pre></td></tr></table></figure></p>
<h5 id="æŒ‰è¡Œæ‹¼æ¥"><a href="#æŒ‰è¡Œæ‹¼æ¥" class="headerlink" title="æŒ‰è¡Œæ‹¼æ¥"></a>æŒ‰è¡Œæ‹¼æ¥</h5><p>åŒ…æ‹¬å‘é‡æ‹¼å‘é‡ å‘é‡æ‹¼çŸ©é˜µ çŸ©é˜µæ‹¼çŸ©é˜µ<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.array([[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]])</span><br><span class="line">b = np.array([[<span class="number">2</span>], [<span class="number">3</span>], [<span class="number">4</span>]])</span><br><span class="line">c = np.hstack((a,b))</span><br><span class="line"><span class="keyword">print</span> c <span class="comment">#array([[1, 2], [2, 3], [3, 4]])</span></span><br><span class="line"><span class="keyword">print</span> np.hstack((a,c)) <span class="comment">#array([[1, 1, 2], [2, 2, 3], [3, 3, 4]])</span></span><br><span class="line"><span class="keyword">print</span> np.hstack((c,c)) <span class="comment">#array([[1, 2, 1, 2], [2, 3, 2, 3], [3, 4, 3, 4]])</span></span><br></pre></td></tr></table></figure></p>
<h4 id="ä»¿matlabå¼æ‹¼æ¥"><a href="#ä»¿matlabå¼æ‹¼æ¥" class="headerlink" title="ä»¿matlabå¼æ‹¼æ¥"></a>ä»¿matlabå¼æ‹¼æ¥</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line">b = np.array([[<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line">np.concatenate((a, b), axis=<span class="number">0</span>)</span><br><span class="line"><span class="comment">#array([[1, 2], [3, 4], [5, 6]])</span></span><br><span class="line">np.concatenate((a, b.T), axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment">#array([[1, 2, 5], [3, 4, 6]])</span></span><br></pre></td></tr></table></figure>
<h4 id="å¤šä¸ªnumpyæ•°ç»„çš„æ‹¼æ¥"><a href="#å¤šä¸ªnumpyæ•°ç»„çš„æ‹¼æ¥" class="headerlink" title="å¤šä¸ªnumpyæ•°ç»„çš„æ‹¼æ¥"></a>å¤šä¸ªnumpyæ•°ç»„çš„æ‹¼æ¥</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.r_[np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]), <span class="number">0</span>, <span class="number">0</span>, np.array([<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])]</span><br><span class="line"><span class="comment">#array([[1, 2, 3, 0, 0, 4, 5, 6]])</span></span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®çš„å¡«å……"><a href="#æ•°æ®çš„å¡«å……" class="headerlink" title="æ•°æ®çš„å¡«å……"></a>æ•°æ®çš„å¡«å……</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">np.lib.pad(a, (<span class="number">2</span>, <span class="number">3</span>), <span class="string">'edge'</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>array([1, 1, 1, 2, 3, 4, 5, 5, 5, 5])</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">np.lib.pad(a, ((<span class="number">3</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">3</span>)), <span class="string">'minimum'</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>array([[1, 1, 1, 2, 1, 1, 1],<br>       [1, 1, 1, 2, 1, 1, 1],<br>       [1, 1, 1, 2, 1, 1, 1],<br>       [1, 1, 1, 2, 1, 1, 1],<br>       [3, 3, 3, 4, 3, 3, 3],<br>       [1, 1, 1, 2, 1, 1, 1],</p>
</blockquote>
<h3 id="æ‰¾åˆ°æ•°æ®çš„uniqueå…ƒç´ "><a href="#æ‰¾åˆ°æ•°æ®çš„uniqueå…ƒç´ " class="headerlink" title="æ‰¾åˆ°æ•°æ®çš„uniqueå…ƒç´ "></a>æ‰¾åˆ°æ•°æ®çš„uniqueå…ƒç´ </h3><p>æ‰¾åˆ°æ•°ç»„æ¯ä¸ªå…ƒç´ å‡ºç°å‡ æ¬¡<br>mmaä»£ç <br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>&#125; // <span class="keyword">Counts</span></span><br><span class="line">&lt;|<span class="number">1</span> -&gt; <span class="number">4</span>, <span class="number">5</span> -&gt; <span class="number">2</span>, <span class="number">3</span> -&gt; <span class="number">3</span>, <span class="number">2</span> -&gt; <span class="number">4</span>, <span class="number">4</span> -&gt; <span class="number">1</span>|</span><br></pre></td></tr></table></figure></p>
<h4 id="ä¿æŒé¡ºåº"><a href="#ä¿æŒé¡ºåº" class="headerlink" title="ä¿æŒé¡ºåº"></a>ä¿æŒé¡ºåº</h4><p>pythonä½¿ç”¨è¿­ä»£å™¨å‡½æ•°<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> groupby</span><br><span class="line">a = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>]</span><br><span class="line">[len(list(group)) <span class="keyword">for</span> key, group <span class="keyword">in</span> groupby(a)]</span><br></pre></td></tr></table></figure></p>
<h4 id="ä¸ä¿æŒé¡ºåº"><a href="#ä¸ä¿æŒé¡ºåº" class="headerlink" title="ä¸ä¿æŒé¡ºåº"></a>ä¸ä¿æŒé¡ºåº</h4><p>é‡‡ç”¨np.uniqueå‡½æ•°<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>]</span><br><span class="line">np.unique(a, return_counts=<span class="literal">True</span>)</span><br><span class="line"><span class="comment">#(array([1, 2, 3, 4, 5]), array([4, 4, 3, 1, 2]))</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">Counter(a)</span><br><span class="line"><span class="comment">#Counter(&#123;1: 4, 2: 4, 3: 3, 5: 2, 4: 1&#125;)</span></span><br></pre></td></tr></table></figure></p>
<h2 id="matplotlibåº“"><a href="#matplotlibåº“" class="headerlink" title="matplotlibåº“"></a>matplotlibåº“</h2><h3 id="ç­‰å€¼çº¿å›¾-ContourPlot"><a href="#ç­‰å€¼çº¿å›¾-ContourPlot" class="headerlink" title="ç­‰å€¼çº¿å›¾ ContourPlot"></a>ç­‰å€¼çº¿å›¾ ContourPlot</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x,y)</span>:</span></span><br><span class="line">    z = (<span class="number">1</span>-x/<span class="number">2</span>+x**<span class="number">5</span>+y**<span class="number">3</span>)*np.exp(-x**<span class="number">2</span>-y**<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> z</span><br><span class="line"> </span><br><span class="line">n = <span class="number">256</span></span><br><span class="line"> </span><br><span class="line">x = np.linspace(<span class="number">-1</span>,<span class="number">1</span>,n)</span><br><span class="line">y = np.linspace(<span class="number">-1</span>,<span class="number">1</span>,n)</span><br><span class="line">X,Y = np.meshgrid(x,y)</span><br><span class="line"> </span><br><span class="line">fig = plt.figure()</span><br><span class="line">surf1 = plt.contourf(X, Y, f(X,Y))</span><br><span class="line">fig.colorbar(surf1)</span><br></pre></td></tr></table></figure>
<img src="/2018/07/26/Python/1.png" class="">
<h3 id="ä¸‰ç»´å›¾-Plot3D"><a href="#ä¸‰ç»´å›¾-Plot3D" class="headerlink" title="ä¸‰ç»´å›¾ Plot3D"></a>ä¸‰ç»´å›¾ Plot3D</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = Axes3D(fig)</span><br><span class="line"><span class="comment"># X, Y value</span></span><br><span class="line">X = np.arange(<span class="number">-4</span>, <span class="number">4</span>, <span class="number">0.25</span>)</span><br><span class="line">Y = np.arange(<span class="number">-4</span>, <span class="number">4</span>, <span class="number">0.25</span>)</span><br><span class="line">X, Y = np.meshgrid(X, Y)    <span class="comment"># x-y å¹³é¢çš„ç½‘æ ¼</span></span><br><span class="line">Z = np.sin(np.sqrt(X ** <span class="number">2</span> + Y ** <span class="number">2</span>))</span><br><span class="line">ax.plot_surface(X, Y, Z, rstride=<span class="number">1</span>, cstride=<span class="number">1</span>, cmap=plt.get_cmap(<span class="string">'rainbow'</span>))</span><br></pre></td></tr></table></figure>
<img src="/2018/07/26/Python/2.png" class="">
<h3 id="æŸ±çŠ¶å›¾"><a href="#æŸ±çŠ¶å›¾" class="headerlink" title="æŸ±çŠ¶å›¾"></a>æŸ±çŠ¶å›¾</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">mu, sigma = <span class="number">100</span>, <span class="number">15</span></span><br><span class="line">x = mu + sigma * np.random.randn(<span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line">hist, bins = np.histogram(x, bins=<span class="number">30</span>)</span><br><span class="line">width = <span class="number">0.9</span> * (bins[<span class="number">1</span>] - bins[<span class="number">0</span>])</span><br><span class="line">center = (bins[:<span class="number">-1</span>] + bins[<span class="number">1</span>:]) / <span class="number">2</span></span><br><span class="line">plt.bar(center, hist, align=<span class="string">'center'</span>, width=width)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2018/07/26/Python/3.png" class="">
<h3 id="å…¶ä»–å¯è§†åŒ–åº“"><a href="#å…¶ä»–å¯è§†åŒ–åº“" class="headerlink" title="å…¶ä»–å¯è§†åŒ–åº“"></a>å…¶ä»–å¯è§†åŒ–åº“</h3><ol>
<li>Seabornï¼šSeabornè·Ÿmatplotlibæœ€å¤§çš„åŒºåˆ«å°±æ˜¯å®ƒçš„é»˜è®¤ç»˜å›¾é£æ ¼å’Œè‰²å½©æ­é…éƒ½å…·æœ‰ç°ä»£ç¾æ„Ÿã€‚ç”±äºSeabornæ˜¯æ„å»ºåœ¨matplotlibçš„åŸºç¡€ä¸Šçš„ï¼Œä½ éœ€è¦äº†è§£matplotlibä»è€Œæ¥è°ƒæ•´Seabornçš„é»˜è®¤å‚æ•°ã€‚</li>
<li>ä¸è¦ç”¨Bokehå’Œggplot2ï¼Œå‰ä¸€ä¸ªè¯­æ³•å…¼å®¹ä¸å¥½ï¼Œæ™¦æ¶©éš¾æ‡‚ï¼Œåä¸€ä¸ªä½œè€…å¼ƒå‘äº†ä¸”bugå¤š</li>
<li>pygalè¶…ç¾ä¸½ï¼Œè¯­æ³•è¶…ç®€å•ï¼Œå¯ä»¥ç›´æ¥è¾“å‡ºSVGçš„Tooltipå½¢å¼çš„çŸ¢é‡å›¾ï¼Œä½†æ˜¯åªèƒ½è¾“å‡ºSVGæ ¼å¼æ–‡ä»¶ä¸èƒ½ç›´æ¥çœ‹å›¾çš„æ•ˆæœ</li>
<li>plotlyå¾ˆç¾ï¼Œä¹Ÿæ˜¯ç¥å™¨ä¹‹ä¸€ï¼è‡´åŠ›äºäº¤äº’å›¾è¡¨çš„åˆ¶ä½œï¼Œä½†æ˜¯å®ƒæä¾›åœ¨åˆ«çš„åº“ä¸­å¾ˆéš¾æ‰¾åˆ°çš„å‡ ç§å›¾è¡¨ç±»å‹ï¼Œæ¯”å¦‚ç­‰å€¼çº¿å›¾ï¼Œæ ‘å½¢å›¾å’Œä¸‰ç»´å›¾è¡¨ã€‚å¦‚ä½•ç¦»çº¿ä½¿ç”¨å‚è§<a href="https://plot.ly/python/offline/" target="_blank" rel="noopener">Here!</a> ç¾ç¾å“’~<br>ä½†æ˜¯ç”±äºæˆ‘å¾ˆç†Ÿæ‚‰Mathematicaï¼Œä½œå›¾åŸºæœ¬ä¸Šå°±æ˜¯é å¥¹äº†ã€‚å¦‚æœæ˜¯åŠ¨æ€å›¾ï¼Œæˆ‘ä½¿ç”¨JavaScriptå’ŒD3ã€‚</li>
</ol>
<h3 id="å¯è§†åŒ–å¤§è§„æ¨¡æ•°æ®é›†çš„åº“-Datashader"><a href="#å¯è§†åŒ–å¤§è§„æ¨¡æ•°æ®é›†çš„åº“-Datashader" class="headerlink" title="å¯è§†åŒ–å¤§è§„æ¨¡æ•°æ®é›†çš„åº“ Datashader"></a>å¯è§†åŒ–å¤§è§„æ¨¡æ•°æ®é›†çš„åº“ Datashader</h3><p>å®‰è£…<br><code>conda install -c bokeh datashader</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import datashader as ds</span><br><span class="line">import datashader.transfer_functions as tf</span><br><span class="line">import pandas as pd</span><br><span class="line">df &#x3D; pd.read_csv(&#39;user_data.csv&#39;)</span><br><span class="line"></span><br><span class="line">cvs &#x3D; ds.Canvas(plot_width&#x3D;400, plot_height&#x3D;400)</span><br><span class="line">agg &#x3D; cvs.points(df, &#39;x_col&#39;, &#39;y_col&#39;, ds.mean(&#39;z_col&#39;))</span><br><span class="line">img &#x3D; tf.shade(agg, cmap&#x3D;[&#39;lightblue&#39;, &#39;darkblue&#39;], how&#x3D;&#39;log&#39;)</span><br></pre></td></tr></table></figure>
<img src="/2018/07/26/Python/5.jpg" class="">
<h3 id="åœ¨Jupyterä¸­ç”»å›¾"><a href="#åœ¨Jupyterä¸­ç”»å›¾" class="headerlink" title="åœ¨Jupyterä¸­ç”»å›¾"></a>åœ¨Jupyterä¸­ç”»å›¾</h3><p>3Dæ•£ç‚¹å›¾<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">%matplotlib notebook</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">fig = pyplot.figure()</span><br><span class="line">ax = Axes3D(fig)</span><br><span class="line"></span><br><span class="line">sequence_containing_x_vals = X[:, <span class="number">0</span>].asnumpy()</span><br><span class="line">sequence_containing_y_vals = X[:, <span class="number">1</span>].asnumpy()</span><br><span class="line">sequence_containing_z_vals = y.asnumpy()</span><br><span class="line"></span><br><span class="line">ax.scatter(sequence_containing_x_vals, sequence_containing_y_vals, sequence_containing_z_vals)</span><br><span class="line">pyplot.show()</span><br></pre></td></tr></table></figure></p>
<p>æ˜¾ç¤ºå›¾åƒ<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.imshow(image_data)</span><br></pre></td></tr></table></figure></p>
<h2 id="æ“ä½œç³»ç»Ÿåº“-os"><a href="#æ“ä½œç³»ç»Ÿåº“-os" class="headerlink" title="æ“ä½œç³»ç»Ÿåº“ os"></a>æ“ä½œç³»ç»Ÿåº“ os</h2><ul>
<li>è°ƒç”¨ç³»ç»Ÿcmdçš„lsç¨‹åºæ‰“å°å½“å‰ç›®å½•ï¼Œå¹¶ä¸”è¿”å›æ˜¯å¦æˆåŠŸï¼ˆ0å³ä¸ºæˆåŠŸï¼‰<br><code>os.system(&#39;ls&#39;)</code></li>
<li>os.mkdir(path)å‡½æ•°åˆ›å»ºç›®å½•ï¼ˆåˆ›å»ºä¸€çº§ç›®å½•)</li>
<li>os.makedirs(path)å‡½æ•°åˆ›å»ºå¤šçº§ç›®å½•</li>
<li>os.listdir(path)å¯ä»¥å¾—åˆ°ä¸€ä¸ªåŒ…å«å½“å‰ç›®å½•ä¸‹æ–‡ä»¶å’Œå­ç›®å½•çš„Liståˆ—è¡¨ï¼ˆä½†æ˜¯æ˜¯ä¹±åºçš„ï¼Œéœ€è¦sortedï¼‰</li>
<li>os.walk() æ–¹æ³•ç”¨äºé€šè¿‡åœ¨ç›®å½•æ ‘ç§æ¸¸èµ°è¾“å‡ºåœ¨ç›®å½•ä¸­çš„æ–‡ä»¶åï¼Œå‘ä¸Šæˆ–è€…å‘ä¸‹</li>
<li>os.path.split ç”¨äºåˆ†å‰²è·¯å¾„ä¸ºç›®å½•è·¯å¾„å’Œä¸å¸¦åç¼€çš„æ–‡ä»¶å</li>
<li>os.path.split å¾—åˆ°ä¸å¸¦åç¼€çš„æ–‡ä»¶å</li>
</ul>
<h2 id="æ˜¾ç¤ºè¿›åº¦æ¡"><a href="#æ˜¾ç¤ºè¿›åº¦æ¡" class="headerlink" title="æ˜¾ç¤ºè¿›åº¦æ¡"></a>æ˜¾ç¤ºè¿›åº¦æ¡</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> tqdm(range(<span class="number">100</span>)):</span><br><span class="line">    sleep(<span class="number">0.01</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#ä¹Ÿå¯ä»¥ç”¨äºè¿­ä»£å™¨ ä½†æ˜¯è¦ä¼ totalå‚æ•°å‘Šè¯‰å®ƒè¿­ä»£å™¨çš„å¤§å°</span></span><br><span class="line"><span class="keyword">for</span> index, batch <span class="keyword">in</span> tqdm(enumerate(dataiter),total=num_examples/batch_size,unit=<span class="string">"mini-batchs"</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p><code>print(&quot;Epoch %d&quot; % epoch)</code>å¯ä»¥æ”¹ä¸º<code>tqdm.write(&quot;Epoch %d&quot; % epoch)</code></p>
<img src="/2018/07/26/Python/4.gif" class="">
<h2 id="æ‰¾åˆ°æŸä¸€åç¼€çš„æ–‡ä»¶-globåº“"><a href="#æ‰¾åˆ°æŸä¸€åç¼€çš„æ–‡ä»¶-globåº“" class="headerlink" title="æ‰¾åˆ°æŸä¸€åç¼€çš„æ–‡ä»¶ globåº“"></a>æ‰¾åˆ°æŸä¸€åç¼€çš„æ–‡ä»¶ globåº“</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">print</span> glob.glob(<span class="string">"./source/*.cpp"</span>)</span><br></pre></td></tr></table></figure>
<p>é€’å½’æŸ¥æ‰¾å¯ä»¥ç”¨glob2åº“,æ³¨æ„ä½¿ç”¨äº† **<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> glob2</span><br><span class="line"><span class="keyword">print</span> glob2.glob(<span class="string">"./source/**/*.cpp"</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="h5pyä½¿ç”¨æŒ‡å—"><a href="#h5pyä½¿ç”¨æŒ‡å—" class="headerlink" title="h5pyä½¿ç”¨æŒ‡å—"></a>h5pyä½¿ç”¨æŒ‡å—</h2><h3 id="è¯»å–h5æ–‡ä»¶"><a href="#è¯»å–h5æ–‡ä»¶" class="headerlink" title="è¯»å–h5æ–‡ä»¶"></a>è¯»å–h5æ–‡ä»¶</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> h5py</span><br><span class="line">f = h5py.File(<span class="string">'test_data_SE.h5'</span>, <span class="string">'r'</span>)</span><br><span class="line">f.keys()</span><br><span class="line"><span class="comment">#[u'Input', u'Output']</span></span><br><span class="line">f[<span class="string">'Input'</span>]</span><br><span class="line"><span class="comment">#&lt;HDF5 dataset "Input": shape (1681, 2), type "&lt;f8"&gt;</span></span><br><span class="line">f[<span class="string">'Input'</span>][:] <span class="comment">#å¾—åˆ°æ‰€æœ‰æ•°æ®</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<h2 id="å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹åº“"><a href="#å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹åº“" class="headerlink" title="å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹åº“"></a>å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹åº“</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">square</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x*x</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Run</span><span class="params">(cmd)</span>:</span></span><br><span class="line">    <span class="keyword">assert</span>(os.system(cmd)==<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ParallelMap</span><span class="params">(func,argList,threads=<span class="number">5</span>)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> threads&gt;multiprocessing.cpu_count():</span><br><span class="line">        threads=multiprocessing.cpu_count()</span><br><span class="line">    pool = multiprocessing.Pool(processes=threads)</span><br><span class="line">    res=pool.map(func, argList)</span><br><span class="line">    pool.close()</span><br><span class="line">    pool.join()</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ParallelRun</span><span class="params">(cmds,threads=<span class="number">5</span>)</span>:</span></span><br><span class="line">    ParallelMap(Run,cmds,threads=threads)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">print</span> ParallelMap(square,range(<span class="number">10</span>))</span><br><span class="line">    ParallelRun([<span class="string">'time'</span>,<span class="string">'dir'</span>])</span><br></pre></td></tr></table></figure>
<h3 id="ç®€å•ç¤ºä¾‹-ï¼ˆç»“åˆæ·±åº¦å­¦ä¹ ï¼‰"><a href="#ç®€å•ç¤ºä¾‹-ï¼ˆç»“åˆæ·±åº¦å­¦ä¹ ï¼‰" class="headerlink" title="ç®€å•ç¤ºä¾‹ ï¼ˆç»“åˆæ·±åº¦å­¦ä¹ ï¼‰"></a>ç®€å•ç¤ºä¾‹ ï¼ˆç»“åˆæ·±åº¦å­¦ä¹ ï¼‰</h3><p>åˆ›å»ºä¸€ä¸ªè¾“å…¥ï¼Œä¸€ä¸ªè¾“å‡ºçš„çš„ç½‘ç»œæ‰€éœ€çš„hdf5æ–‡ä»¶</p>
<h4 id="æ–°ç‰ˆ"><a href="#æ–°ç‰ˆ" class="headerlink" title="æ–°ç‰ˆ"></a>æ–°ç‰ˆ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> h5py</span><br><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"></span><br><span class="line">N = <span class="number">1000</span></span><br><span class="line">X = np.random.normal(<span class="number">0</span>, <span class="number">1</span>, (N, <span class="number">12</span>))</span><br><span class="line">y = np.random.randint(<span class="number">0</span>, <span class="number">2</span>, N)</span><br><span class="line"></span><br><span class="line"><span class="comment"># write data to file</span></span><br><span class="line"><span class="keyword">with</span> h5py.File(<span class="string">'myfile.hdf5'</span>, <span class="string">"w"</span>) <span class="keyword">as</span> ofile:</span><br><span class="line">    ofile.create_dataset(<span class="string">"X"</span>, data=X)</span><br><span class="line">    ofile.create_dataset(<span class="string">"y"</span>, data=y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># load data from file</span></span><br><span class="line">ifile = h5py.File(<span class="string">'myfile.hdf5'</span>, <span class="string">'r'</span>)</span><br><span class="line"></span><br><span class="line">X_h5 = ifile[<span class="string">"X"</span>]</span><br><span class="line">y_h5 = ifile[<span class="string">"y"</span>]</span><br><span class="line"></span><br><span class="line">batch_size = <span class="number">200</span></span><br><span class="line">dataiter = mx.io.NDArrayIter(X_h5, y_h5, batch_size=batch_size)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> iBatch, batch <span class="keyword">in</span> enumerate(dataiter):</span><br><span class="line">    print(iBatch, batch.data[<span class="number">0</span>].asnumpy().shape)</span><br><span class="line">ifile.close()</span><br></pre></td></tr></table></figure>
<h4 id="æ—§ç‰ˆ"><a href="#æ—§ç‰ˆ" class="headerlink" title="æ—§ç‰ˆ"></a>æ—§ç‰ˆ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> h5py</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">float_size=<span class="number">4</span></span><br><span class="line"></span><br><span class="line">input_node=<span class="number">2</span></span><br><span class="line">output_node=<span class="number">1</span></span><br><span class="line">input_file=<span class="string">'test_data_SE.dat'</span></span><br><span class="line">out_file=<span class="string">'test_data_SE.h5'</span></span><br><span class="line"></span><br><span class="line">input_and_output_node=input_node+output_node</span><br><span class="line"><span class="keyword">with</span> open(input_file,<span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.seek(<span class="number">0</span>,os.SEEK_END)</span><br><span class="line">    file_len=f.tell()/(float_size*input_and_output_node)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> h5py.File(out_file, <span class="string">"w"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    Input =  f.create_dataset(<span class="string">'Input'</span>,  (<span class="number">1681</span>,input_node ),dtype=<span class="string">'float'</span>, chunks=<span class="literal">True</span>)</span><br><span class="line">    Output = f.create_dataset(<span class="string">'Output'</span>, (<span class="number">1681</span>,output_node),dtype=<span class="string">'float'</span>, chunks=<span class="literal">True</span>)</span><br><span class="line">    fin=open(input_file,<span class="string">'rb'</span>)</span><br><span class="line">    index=range(file_len)</span><br><span class="line">    random.shuffle(index)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> index:</span><br><span class="line">        fin.seek(float_size*input_and_output_node*i,os.SEEK_SET)</span><br><span class="line">        Input[i,:]  = np.array(struct.unpack(<span class="string">'&lt;'</span>+str(input_node )+<span class="string">'f'</span>,fin.read(float_size*input_node)))</span><br><span class="line">        Output[i,:] = np.array(struct.unpack(<span class="string">'&lt;'</span>+str(output_node)+<span class="string">'f'</span>,fin.read(float_size*output_node)))</span><br><span class="line">    fin.close()</span><br></pre></td></tr></table></figure>
<h1 id="Pythonå°å·¥å…·"><a href="#Pythonå°å·¥å…·" class="headerlink" title="Pythonå°å·¥å…·"></a>Pythonå°å·¥å…·</h1><h2 id="å¤šè¿›ç¨‹åŠ å¿«è¿­ä»£é€Ÿåº¦"><a href="#å¤šè¿›ç¨‹åŠ å¿«è¿­ä»£é€Ÿåº¦" class="headerlink" title="å¤šè¿›ç¨‹åŠ å¿«è¿­ä»£é€Ÿåº¦"></a>å¤šè¿›ç¨‹åŠ å¿«è¿­ä»£é€Ÿåº¦</h2><p>åŸå§‹ä»£ç ï¼š<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line">dir = <span class="string">'./wav_phone'</span></span><br><span class="line">sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> filename <span class="keyword">in</span> glob.glob(os.path.join(dir,<span class="string">"*.wav"</span>))[:<span class="number">10000</span>]:</span><br><span class="line">    sum += len(open(filename, <span class="string">'rb'</span>).read())</span><br><span class="line"><span class="keyword">print</span> sum</span><br></pre></td></tr></table></figure><br><code>time python test.py</code>è¾“å‡º</p>
<blockquote>
<p>43567952<br>python test.py  1.01s user 0.66s system 98% cpu 1.688 total</p>
</blockquote>
<p>æ”¹è¿›åï¼š<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> glob, concurrent.futures</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load</span><span class="params">(f)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> len(open(f, <span class="string">'rb'</span>).read())</span><br><span class="line"></span><br><span class="line">dir = <span class="string">'./wav_phone'</span></span><br><span class="line">sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">with</span> concurrent.futures.ProcessPoolExecutor() <span class="keyword">as</span> executor:</span><br><span class="line">    files = glob.glob(os.path.join(dir,<span class="string">"*.wav"</span>))[:<span class="number">10000</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> executor.map(load, files):</span><br><span class="line">        sum += i</span><br><span class="line">    <span class="keyword">print</span> sum</span><br></pre></td></tr></table></figure><br><code>time python test.py</code>è¾“å‡º</p>
<blockquote>
<p>43567952<br>python test.py  3.48s user 2.03s system 148% cpu 3.724 total</p>
</blockquote>
<h2 id="æ£€æŸ¥ä¸¤ä¸ªæ–‡ä»¶å¤¹æ˜¯å¦å®Œå…¨ä¸€æ ·"><a href="#æ£€æŸ¥ä¸¤ä¸ªæ–‡ä»¶å¤¹æ˜¯å¦å®Œå…¨ä¸€æ ·" class="headerlink" title="æ£€æŸ¥ä¸¤ä¸ªæ–‡ä»¶å¤¹æ˜¯å¦å®Œå…¨ä¸€æ ·"></a>æ£€æŸ¥ä¸¤ä¸ªæ–‡ä»¶å¤¹æ˜¯å¦å®Œå…¨ä¸€æ ·</h2><p>ä¸ä¸€æ ·çš„ä¼šæ‰“å°å‡ºå¯¹åº”çš„æ–‡ä»¶<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#-*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> glob <span class="keyword">import</span> glob</span><br><span class="line"></span><br><span class="line"><span class="comment">#ref_Dir1æ˜¯å‚è€ƒæ–‡ä»¶å¤¹ é€šå¸¸æ–‡ä»¶å¤¹å†…æ–‡ä»¶ä¼šå°‘ä¸€äº›</span></span><br><span class="line">ref_Dir1 = <span class="string">r'\\172.16.46.88\xzhou\Downloads\Yanping_13k_NFE\Unit2Vec_WaveformGeneration\online\hus_rootDir\hus_WaveRNN'</span></span><br><span class="line">Dir2 = <span class="string">r'\\172.16.46.80\xzhou2\Yanping_13k_NFE\Unit2Vec_WaveformGeneration\online\hus_rootDir\hus_WaveRNN'</span></span><br><span class="line"><span class="comment">#æŒ‡æ¯”è¾ƒsuffixçš„æ–‡ä»¶ï¼Œå…¨éƒ¨æ–‡ä»¶suffix = '*'</span></span><br><span class="line">suffix = <span class="string">'*.wav'</span></span><br><span class="line"></span><br><span class="line">SameNum = <span class="number">0.</span></span><br><span class="line">AllNum = <span class="number">0.</span></span><br><span class="line">files = sorted(glob(os.path.join(ref_Dir1,suffix)))</span><br><span class="line"><span class="keyword">print</span> <span class="string">'reference dir is %s'</span> % ref_Dir1</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">    bn = os.path.basename(file)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'process %f%%\r'</span> % (AllNum/len(files)*<span class="number">100</span>),</span><br><span class="line">    file1 = os.path.join(ref_Dir1, bn)</span><br><span class="line">    file2 = os.path.join(Dir2, bn)</span><br><span class="line">    SameQ = open(file1,<span class="string">'rt'</span>).read() == open(file2,<span class="string">'rt'</span>).read()</span><br><span class="line">    <span class="keyword">if</span> SameQ: </span><br><span class="line">        SameNum += <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'%-20s'</span> % bn</span><br><span class="line">    AllNum += <span class="number">1</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'Similar rate is %f%%'</span> % (SameNum/AllNum*<span class="number">100</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="å¾—åˆ°ä¸€ä¸ªå¤æ‚å·¥ç¨‹ï¼ˆæ–‡ä»¶å¤¹ï¼‰çš„ç›®å½•æ ‘ï¼Œå¹¶å°†ä»£ç è¯´æ˜ç­‰è¾“å‡ºè‡³å¦ä¸€æ–‡ä»¶å¤¹"><a href="#å¾—åˆ°ä¸€ä¸ªå¤æ‚å·¥ç¨‹ï¼ˆæ–‡ä»¶å¤¹ï¼‰çš„ç›®å½•æ ‘ï¼Œå¹¶å°†ä»£ç è¯´æ˜ç­‰è¾“å‡ºè‡³å¦ä¸€æ–‡ä»¶å¤¹" class="headerlink" title="å¾—åˆ°ä¸€ä¸ªå¤æ‚å·¥ç¨‹ï¼ˆæ–‡ä»¶å¤¹ï¼‰çš„ç›®å½•æ ‘ï¼Œå¹¶å°†ä»£ç è¯´æ˜ç­‰è¾“å‡ºè‡³å¦ä¸€æ–‡ä»¶å¤¹"></a>å¾—åˆ°ä¸€ä¸ªå¤æ‚å·¥ç¨‹ï¼ˆæ–‡ä»¶å¤¹ï¼‰çš„ç›®å½•æ ‘ï¼Œå¹¶å°†ä»£ç è¯´æ˜ç­‰è¾“å‡ºè‡³å¦ä¸€æ–‡ä»¶å¤¹</h2><p>ç›®çš„æ˜¯å¤‡ä»½ä»£ç ä»¥åŠè¯´æ˜æ–‡ä»¶<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os,shutil</span><br><span class="line"></span><br><span class="line">originalDir = <span class="string">'./dir'</span></span><br><span class="line">targetDir = <span class="string">'./dir_code'</span></span><br><span class="line"></span><br><span class="line">suffix = [<span class="string">'.py'</span>,<span class="string">'.cpp'</span>,<span class="string">'.hpp'</span>,<span class="string">'.c'</span>,<span class="string">'.h'</span>,<span class="string">'.pl'</span>,<span class="string">'.nb'</span>,<span class="string">'.m'</span>,<span class="string">'.js'</span>,<span class="string">'.html'</span>,<span class="string">'.doc'</span>,<span class="string">'.docx'</span>,<span class="string">'.ppt'</span>,<span class="string">'.pptx'</span>,<span class="string">'.xls'</span>,<span class="string">'.xlsx'</span>,<span class="string">'.pdf'</span>,<span class="string">'.jpg'</span>,<span class="string">'.png'</span>,<span class="string">'.gif'</span>,<span class="string">'.txt'</span>]</span><br><span class="line"><span class="keyword">for</span> dirName, subdirList, fileList <span class="keyword">in</span> os.walk(originalDir):</span><br><span class="line">    <span class="keyword">print</span> dirName</span><br><span class="line">    <span class="keyword">for</span> mydir <span class="keyword">in</span> subdirList:</span><br><span class="line">        Ori_abspath_this = os.path.join(dirName, mydir)</span><br><span class="line">        relative_Path = os.path.relpath(Ori_abspath_this, originalDir)</span><br><span class="line">        Tar_abspathy_this = os.path.join(targetDir, relative_Path)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(Tar_abspathy_this):</span><br><span class="line">            os.mkdir(Tar_abspathy_this)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            os.makedirs(Tar_abspathy_this)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> myfile <span class="keyword">in</span> fileList:</span><br><span class="line">        <span class="keyword">if</span> os.path.splitext(myfile)[<span class="number">1</span>] <span class="keyword">in</span> suffix:</span><br><span class="line">        Ori_abspath_this = os.path.join(dirName, myfile)</span><br><span class="line">        relative_Path = os.path.relpath(Ori_abspath_this, originalDir)</span><br><span class="line">        Tar_abspathy_this = os.path.join(targetDir, relative_Path)</span><br><span class="line">        shutil.copyfile(Ori_abspath_this,Tar_abspathy_this)</span><br></pre></td></tr></table></figure></p>
<h2 id="æ£€æŸ¥é¡¹ç›®æŸäº›ä»£ç ä»£ç æ˜¯å¦éƒ½åŒ…å«äº†æŸäº›å­—ç¬¦"><a href="#æ£€æŸ¥é¡¹ç›®æŸäº›ä»£ç ä»£ç æ˜¯å¦éƒ½åŒ…å«äº†æŸäº›å­—ç¬¦" class="headerlink" title="æ£€æŸ¥é¡¹ç›®æŸäº›ä»£ç ä»£ç æ˜¯å¦éƒ½åŒ…å«äº†æŸäº›å­—ç¬¦"></a>æ£€æŸ¥é¡¹ç›®æŸäº›ä»£ç ä»£ç æ˜¯å¦éƒ½åŒ…å«äº†æŸäº›å­—ç¬¦</h2><p>æ¯”å¦‚æœ‰memcpyçš„è¡Œæ˜¯å¦éƒ½åŒ…å«sizeof<br>ä½¿ç”¨äº†glob2åº“ è¿™ä¸ªç›¸æ¯”globä¸ä»…å¯ä»¥æ‰¾åˆ°ç›®å½•ä¸‹çš„ç‰¹å®šåç¼€æ–‡ä»¶è¿˜å¯ä»¥<strong>é€’å½’</strong>æŸ¥è¯¢å®ƒçš„å­ç›®å½•ä¸‹çš„æ–‡ä»¶<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> glob2</span><br><span class="line">files=glob2.glob(<span class="string">"./source/**/*.cpp"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">    num=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> open(file,<span class="string">'rt'</span>):</span><br><span class="line">        num=num+<span class="number">1</span></span><br><span class="line">        line=line.strip()</span><br><span class="line">        <span class="keyword">if</span> line.startswith(<span class="string">'memcpy'</span>):</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">'sizeof'</span> <span class="keyword">not</span> <span class="keyword">in</span> line):</span><br><span class="line">                <span class="keyword">print</span> line+<span class="string">'\t\t'</span>+file+<span class="string">'\t'</span>+str(num)</span><br></pre></td></tr></table></figure><br><img src="/2018/07/26/Python/6.png" class=""></p>
<p>å¯ä»¥æ˜¾ç¤ºè¡Œ    æ–‡ä»¶å    è¡Œå·ï¼Œæ•ˆæœè¿˜æ˜¯ä¸é”™çš„ï¼Œå› ä¸ºå¯ä»¥è‡ªå®šä¹‰å‘€~</p>
<h2 id="å¯¼å…¥å¯¼å‡ºæ•°æ®"><a href="#å¯¼å…¥å¯¼å‡ºæ•°æ®" class="headerlink" title="å¯¼å…¥å¯¼å‡ºæ•°æ®"></a>å¯¼å…¥å¯¼å‡ºæ•°æ®</h2><h3 id="æ¸…é™¤æ–‡ä»¶æ•°æ®"><a href="#æ¸…é™¤æ–‡ä»¶æ•°æ®" class="headerlink" title="æ¸…é™¤æ–‡ä»¶æ•°æ®"></a>æ¸…é™¤æ–‡ä»¶æ•°æ®</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'test.txt'</span>,<span class="string">'w'</span>) <span class="keyword">as</span> f_out:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h2 id="å‡†å¤‡ç»´åŸºç™¾ç§‘ä¸­æ–‡è¯­æ–™åº“"><a href="#å‡†å¤‡ç»´åŸºç™¾ç§‘ä¸­æ–‡è¯­æ–™åº“" class="headerlink" title="å‡†å¤‡ç»´åŸºç™¾ç§‘ä¸­æ–‡è¯­æ–™åº“"></a>å‡†å¤‡ç»´åŸºç™¾ç§‘ä¸­æ–‡è¯­æ–™åº“</h2><p>å‚è€ƒç½‘å€[]</p>
<h3 id="æ–‡æœ¬æ•°æ®"><a href="#æ–‡æœ¬æ•°æ®" class="headerlink" title="æ–‡æœ¬æ•°æ®"></a>æ–‡æœ¬æ•°æ®</h3><h4 id="np-loadtxt"><a href="#np-loadtxt" class="headerlink" title="np.loadtxt"></a>np.loadtxt</h4><p>å¿½ç•¥é¦–è¡Œï¼Œæ•°æ®æ˜¯æµ®ç‚¹æ•°<br><code>np.loadtxt(&#39;test.txt&#39;,dtype=float,skiprows=1)</code><br>è¯»å–ç‰¹å®šçš„åˆ—ä½¿ç”¨å‚æ•°<code>usecols</code>,å¤šåˆ—æ˜¯<code>usecols=(1,3)</code>ï¼Œå•åˆ—æ˜¯<code>usecols=(3,)</code></p>
<h4 id="np-genfromtxt"><a href="#np-genfromtxt" class="headerlink" title="np.genfromtxt"></a>np.genfromtxt</h4><p>åªè¯»å–ç¬¬ä¸€ä¸‰åˆ—æµ®ç‚¹æ•°æ®ä¸”å¿½ç•¥é¦–è¡Œ<code>np.genfromtxt(&#39;test.txt&#39;,dtype=float,usecols=(1,3),skip_header=1)</code></p>
<h4 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> struct,os</span><br><span class="line"></span><br><span class="line">mat = np.arange(<span class="number">15</span>).reshape((<span class="number">3</span>,<span class="number">5</span>)).astype(np.float32)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'test.txt'</span>,<span class="string">'w'</span>) <span class="keyword">as</span> f_out:</span><br><span class="line">    <span class="keyword">for</span> lis <span class="keyword">in</span> mat:</span><br><span class="line">        <span class="comment">#Write every row</span></span><br><span class="line">        f_out.writelines(map(<span class="keyword">lambda</span> i:str(i)+<span class="string">'\t'</span>,lis)+[<span class="string">'\n'</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'test.txt'</span>,<span class="string">'r'</span>) <span class="keyword">as</span> f_in:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f_in.readlines():</span><br><span class="line">        <span class="keyword">print</span> line</span><br></pre></td></tr></table></figure>
<h3 id="äºŒè¿›åˆ¶æ•°æ®"><a href="#äºŒè¿›åˆ¶æ•°æ®" class="headerlink" title="äºŒè¿›åˆ¶æ•°æ®"></a>äºŒè¿›åˆ¶æ•°æ®</h3><h4 id="å¿«é€Ÿè¯»å–äºŒè¿›åˆ¶æ•°æ®"><a href="#å¿«é€Ÿè¯»å–äºŒè¿›åˆ¶æ•°æ®" class="headerlink" title="å¿«é€Ÿè¯»å–äºŒè¿›åˆ¶æ•°æ®"></a>å¿«é€Ÿè¯»å–äºŒè¿›åˆ¶æ•°æ®</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#é€Ÿåº¦æ…¢</span></span><br><span class="line">data=np.array(struct.unpack(<span class="string">'&lt;'</span>+str(lis_len)+<span class="string">'f'</span>,fin.read()))</span><br><span class="line"><span class="comment">#é€Ÿåº¦å¿«</span></span><br><span class="line">data = np.fromfile(datafile,dtype=np.float32)</span><br><span class="line"><span class="comment">#ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨è¿™ç¬¬äºŒç§å¿«é€Ÿè¯»å–çš„æ–¹å¼ï¼Œå®šä¹‰å¦‚ä¸‹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">BinaryRead</span><span class="params">(datafile,column)</span>:</span></span><br><span class="line">    data = np.fromfile(datafile,dtype=np.float32)</span><br><span class="line">    LengthOfFile=len(data)</span><br><span class="line">    <span class="keyword">assert</span>(LengthOfFile)</span><br><span class="line">    <span class="keyword">assert</span>((LengthOfFile%column)==<span class="number">0</span>)</span><br><span class="line">    data.shape = [LengthOfFile/column,column]</span><br><span class="line">    <span class="keyword">return</span> data</span><br></pre></td></tr></table></figure>
<h4 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> struct,os</span><br><span class="line">float_size=<span class="number">4</span></span><br><span class="line"></span><br><span class="line">mat = np.arange(<span class="number">15</span>).reshape((<span class="number">3</span>,<span class="number">5</span>)).astype(np.float32)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'test.dat'</span>,<span class="string">'wb'</span>) <span class="keyword">as</span> f_out:</span><br><span class="line">    <span class="keyword">for</span> lis <span class="keyword">in</span> mat:</span><br><span class="line">        <span class="comment">#Write every row</span></span><br><span class="line">        f_out.write(struct.pack(<span class="string">'&lt;5f'</span>,*lis))</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'test.dat'</span>,<span class="string">'rb'</span>) <span class="keyword">as</span> f_in:</span><br><span class="line">    <span class="comment">#Read every row</span></span><br><span class="line">    f_in.seek(<span class="number">0</span>,os.SEEK_END)</span><br><span class="line">    row_Num = int(f_in.tell()/(float_size*<span class="number">5</span>))</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"row number is "</span>+str(row_Num)</span><br><span class="line">    f_in.seek(<span class="number">0</span>,os.SEEK_SET)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(row_Num):</span><br><span class="line">        <span class="keyword">print</span> np.array(struct.unpack(<span class="string">'&lt;5f'</span>,f_in.read(float_size*<span class="number">5</span>)))</span><br><span class="line">    <span class="comment"># Got mat again.</span></span><br></pre></td></tr></table></figure>
<h3 id="å¯¼å‡ºå­—å…¸ï¼ˆä½¿ç”¨JSONï¼‰"><a href="#å¯¼å‡ºå­—å…¸ï¼ˆä½¿ç”¨JSONï¼‰" class="headerlink" title="å¯¼å‡ºå­—å…¸ï¼ˆä½¿ç”¨JSONï¼‰"></a>å¯¼å‡ºå­—å…¸ï¼ˆä½¿ç”¨JSONï¼‰</h3><p>æ‰“å°åˆ°å±å¹•<br>indentå¯ä»¥æ§åˆ¶ç¼©è¿›å•ä½ï¼Œç¾åŒ–JSONç”¨çš„<br><code>print json.dumps(mydict, indent=2)</code><br>è¾“å‡ºåˆ°æ–‡ä»¶<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'Unit2Vec_tSNE.json'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> outfile:</span><br><span class="line">    json.dump(mydict, outfile, indent=<span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="å¯¼å‡ºå­—å…¸ï¼ˆä½¿ç”¨pickleï¼‰"><a href="#å¯¼å‡ºå­—å…¸ï¼ˆä½¿ç”¨pickleï¼‰" class="headerlink" title="å¯¼å‡ºå­—å…¸ï¼ˆä½¿ç”¨pickleï¼‰"></a>å¯¼å‡ºå­—å…¸ï¼ˆä½¿ç”¨pickleï¼‰</h3><p>å¯ä»¥ä¿å­˜å­—å…¸ã€åˆ—è¡¨ã€numpyæ•°æ®ç­‰<br>pickle.dump(æ•°æ®, æ–‡ä»¶ï¼Œ[ä½¿ç”¨åè®®])è¡¨ç¤ºå°†è¦æŒä¹…åŒ–çš„æ•°æ®ï¼Œä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨åè®®æœ‰3ç§ï¼Œç´¢å¼•0ä¸ºASCIIï¼Œ1æ˜¯æ—§å¼2è¿›åˆ¶ï¼Œ2æ˜¯æ–°å¼äºŒè¿›åˆ¶åè®®ï¼Œä¸åŒä¹‹å¤„åœ¨äºåè€…æ›´é«˜æ•ˆä¸€äº›ã€‚é»˜è®¤çš„è¯dumpæ–¹æ³•ä½¿ç”¨ä½¿ç”¨åè®®0ã€‚<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">data1 = &#123;<span class="string">'a'</span>: [<span class="number">1</span>, <span class="number">2.0</span>, <span class="number">3</span>, <span class="number">4</span>+<span class="number">6j</span>],</span><br><span class="line">         <span class="string">'b'</span>: (<span class="string">'string'</span>, <span class="string">u'Unicode string'</span>),</span><br><span class="line">         <span class="string">'c'</span>: <span class="literal">None</span>&#125;</span><br><span class="line"></span><br><span class="line">data2 = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]]</span><br><span class="line">data3 = np.arange(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'data.pkl'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> output_file:</span><br><span class="line">    <span class="comment"># Using -1 to make it more stable and less file size</span></span><br><span class="line">    pickle.dump(data1, output_file, <span class="number">-1</span>)</span><br><span class="line">    pickle.dump(data2, output_file, <span class="number">-1</span>)</span><br><span class="line">    pickle.dump(data3, output_file, <span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'data.pkl'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> input_fine: <span class="comment">#must be 'rb' in Windows</span></span><br><span class="line">    data4 = pickle.load(input_fine)</span><br><span class="line">    data5 = pickle.load(input_fine)</span><br><span class="line">    data6 = pickle.load(input_fine)</span><br><span class="line">    <span class="keyword">print</span> data4</span><br><span class="line">    <span class="keyword">print</span> data5</span><br><span class="line">    <span class="keyword">print</span> np.sum(data6) <span class="comment">#0+1+2+3+4==10</span></span><br></pre></td></tr></table></figure></p>
<h1 id="Anacondaä½¿ç”¨å¤‡å¿˜å½•"><a href="#Anacondaä½¿ç”¨å¤‡å¿˜å½•" class="headerlink" title="Anacondaä½¿ç”¨å¤‡å¿˜å½•"></a>Anacondaä½¿ç”¨å¤‡å¿˜å½•</h1><h2 id="å®‰è£…ç¯å¢ƒ"><a href="#å®‰è£…ç¯å¢ƒ" class="headerlink" title="å®‰è£…ç¯å¢ƒ"></a>å®‰è£…ç¯å¢ƒ</h2><p>conda create -n ç¯å¢ƒå<br>conda create -n ç¯å¢ƒå python=3.6</p>
<h2 id="åˆ é™¤ç¯å¢ƒ"><a href="#åˆ é™¤ç¯å¢ƒ" class="headerlink" title="åˆ é™¤ç¯å¢ƒ"></a>åˆ é™¤ç¯å¢ƒ</h2><p>conda remove -n ç¯å¢ƒå â€“all</p>
<h2 id="æŸ¥çœ‹æ‰€å¤„ç¯å¢ƒ"><a href="#æŸ¥çœ‹æ‰€å¤„ç¯å¢ƒ" class="headerlink" title="æŸ¥çœ‹æ‰€å¤„ç¯å¢ƒ"></a>æŸ¥çœ‹æ‰€å¤„ç¯å¢ƒ</h2><p>conda info -e</p>
<h2 id="å‡çº§Conda"><a href="#å‡çº§Conda" class="headerlink" title="å‡çº§Conda"></a>å‡çº§Conda</h2><p>conda update conda</p>
<h2 id="è§£å†³é”™è¯¯"><a href="#è§£å†³é”™è¯¯" class="headerlink" title="è§£å†³é”™è¯¯"></a>è§£å†³é”™è¯¯</h2><p>å‡ºç°<code>Intel MKL FATAL ERROR: Cannot load libmkl_avx2.so or libmkl_def.so</code>é”™è¯¯<br>æ‰§è¡Œ<code>conda install nomkl</code>å°±å¯ä»¥äº†ã€‚åœ¨è®¡ç®—<a href="https://github.com/slaypni/fastdtw" target="_blank" rel="noopener">DTW</a>ç®—æ³•çš„åº“æ—¶é‡åˆ°</p>
<h3 id="è§£å†³h5pyçš„âš ï¸"><a href="#è§£å†³h5pyçš„âš ï¸" class="headerlink" title="è§£å†³h5pyçš„âš ï¸"></a>è§£å†³h5pyçš„âš ï¸</h3><p>pip install numpy==1.13.0</p>
<h3 id="æ‰¾ä¸åˆ°conda"><a href="#æ‰¾ä¸åˆ°conda" class="headerlink" title="æ‰¾ä¸åˆ°conda"></a>æ‰¾ä¸åˆ°conda</h3><p>å¯¹äºLinux: å¦‚æœæœ€ç»ˆconda not found åªéœ€è¦ç»ˆç«¯è¾“å…¥<code>export PATH=&quot;/home/xzhou/anaconda2/bin:$PATH&quot;</code>å°±è¡Œï¼Œä¸ºäº†æ°¸ä¹…ç”Ÿæ•ˆåŠ å…¥è¿™è¡Œä»£ç è¿›~/.bashrc, ç„¶å<code>source ~/.bashrc</code><br>å¯¹äºwindow: scriptsæ–‡ä»¶å¤¹è·¯å¾„ä½œä¸ºç¯å¢ƒå˜é‡</p>
<h3 id="ipythonçš„ç¯å¢ƒä¸æ­£å¸¸"><a href="#ipythonçš„ç¯å¢ƒä¸æ­£å¸¸" class="headerlink" title="ipythonçš„ç¯å¢ƒä¸æ­£å¸¸"></a>ipythonçš„ç¯å¢ƒä¸æ­£å¸¸</h3><p>å½“æ¿€æ´»ä¸€ä¸ªç¯å¢ƒå ipythonçš„sys.executableä¸å¯¹åŠ²<br>åªéœ€è¦conda install ipythonè¿›è¡Œäº†<br><del>Reactivate the environment or run hash -r (in bash) or rehash (in zsh). å°±è¡Œäº†</del></p>
<h3 id="Condaä¸èƒ½è”ç½‘"><a href="#Condaä¸èƒ½è”ç½‘" class="headerlink" title="Condaä¸èƒ½è”ç½‘"></a>Condaä¸èƒ½è”ç½‘</h3><p>æ³¨æ„å½“condaä¸èƒ½ç”¨æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨æ‰‹æœºUSBå…±äº«ç½‘ç»œï¼Œä½†æ˜¯ä¸€å®šè¦å…³é—­å¾®è½¯è¾“å…¥æ³•ï¼Œä¸ç„¶ä¼šå¯¼è‡´è“å±ã€‚æœ€å¥½ç”¨4Gç½‘ç»œï¼Œæ›´æ–°é¡ºåˆ©ã€‚ä½¿ç”¨ç§‘å¤§é•œåƒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¼˜å…ˆä½¿ç”¨æ¸…å conda é•œåƒã€‚</span><br><span class="line">conda config --prepend channels https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;free&#x2F;</span><br><span class="line"></span><br><span class="line"># æˆ–è€…é€‰ç”¨ç§‘å¤§ conda é•œåƒã€‚</span><br><span class="line">conda config --prepend channels http:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;free&#x2F;</span><br><span class="line"></span><br><span class="line">conda config --set show_channel_urls yes</span><br><span class="line"></span><br><span class="line"># ç§»é™¤é•œåƒ</span><br><span class="line">conda config --remove channels https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;free&#x2F;</span><br></pre></td></tr></table></figure>
<h2 id="å¾…Check"><a href="#å¾…Check" class="headerlink" title="å¾…Check"></a>å¾…Check</h2><p>å¦‚æœconda create -n test_env python=2.7 åˆ›å»ºå‡ºçš„ç¯å¢ƒå¹¶ä¸åœ¨envsé‡Œï¼Œé‚£ä¹ˆæ‰§è¡Œ<br>conda create â€“prefix /tmp/test-env python=2.7</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>å¯è§†åŒ–</tag>
        <tag>Python</tag>
        <tag>MXNet</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux</title>
    <url>/2018/07/26/Linux/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h1 id="å‘½ä»¤è¡ŒæŒ‡ä»¤"><a href="#å‘½ä»¤è¡ŒæŒ‡ä»¤" class="headerlink" title="å‘½ä»¤è¡ŒæŒ‡ä»¤"></a>å‘½ä»¤è¡ŒæŒ‡ä»¤</h1><p>Linuxè¦æŸ¥çœ‹æ‰€æœ‰å’Œpdfç›¸å…³çš„å‘½ä»¤ å¯ä»¥è¾“å…¥pdf å†æŒ‰Tabé”®</p>
<h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ul>
<li><code>ls -l</code>çœ‹å½“å‰ç›®å½•ä¸‹æ–‡ä»¶çš„åŸºæœ¬å±æ€§</li>
<li><code>ls -a</code>çœ‹éšè—æ–‡ä»¶</li>
<li><code>ls|wc -l</code>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ–‡ä»¶+æ–‡ä»¶å¤¹æ•°</li>
<li><code>ls -l|grep ^d|wc -l</code>æ˜¾ç¤ºå½“å‰ç›®å½•æ–‡ä»¶å¤¹æ•°</li>
<li><code>ls -l|grep ^-|wc -l</code>æ˜¾ç¤ºå½“å‰ç›®å½•æ–‡ä»¶æ•°</li>
<li><code>ls|gawk -F. &#39;{print $2}&#39;|sort -u</code>å¾—åˆ°åç¼€ç±»å‹ï¼ˆç©ºç™½æ˜¯ç›®å½•ï¼‰ </li>
</ul>
<h2 id="å‹ç¼©"><a href="#å‹ç¼©" class="headerlink" title="å‹ç¼©"></a>å‹ç¼©</h2><ul>
<li>bz2æ–‡ä»¶è§£å‹ç¼©ï¼šå‹ç¼©ï¼š<code>bzip2 file</code> è§£å‹ï¼š<code>bzip2 -dk file.bz2</code>ã€‚-dè¡¨ç¤ºè§£å‹ï¼Œ-kè¡¨ç¤ºä¸åˆ é™¤æºæ–‡ä»¶</li>
<li>raræ–‡ä»¶è§£å‹ç¼©ï¼šå‹ç¼©ç›®å½•ï¼š<code>rar a test ./script/</code>ï¼ŒæŸ¥çœ‹å‹ç¼©åŒ…æ–‡ä»¶å†…å®¹æ˜¯ï¼š<code>rar l test.rar</code>ï¼Œè§£å‹ï¼š<code>unrar e test.rar ./script/</code></li>
<li>taræ–‡ä»¶ï¼šå‹ç¼©ç›®å½•ï¼š<code>tar -cvf test.tar ./test</code>ï¼Œè§£å‹ï¼š<code>tar -xvf test.tar</code></li>
<li>zipï¼šå‹ç¼©ç›®å½•ï¼š<code>zip -r test.zip ./test</code>ï¼Œè§£å‹ï¼š<code>unzip test.zip</code></li>
<li>æŸ¥çœ‹zipæ–‡ä»¶ï¼š<code>unzip -l files.zip | less</code>æˆ–è€…<code>vim files.zip</code></li>
<li>fuse-zip å¯ä»¥å®ç°zipæ–‡ä»¶çš„æŒ‚è½½ï¼Œniubilityï¼</li>
</ul>
<h2 id="æ–‡ä»¶æ“ä½œ"><a href="#æ–‡ä»¶æ“ä½œ" class="headerlink" title="æ–‡ä»¶æ“ä½œ"></a>æ–‡ä»¶æ“ä½œ</h2><ul>
<li>æœåŠ¡å™¨æ–‡ä»¶æ‹·è´åˆ°æœ¬åœ°ï¼š<code>scp xzhou@172.16.46.88:/home/xzhou/Downloads/test.rar ./Downloads/test.rar</code></li>
<li>æœ¬åœ°æ–‡ä»¶æ‹·è´åˆ°dockerå®¹å™¨ï¼š<code>docker cp ./testwine.zip å®¹å™¨ID:/home/xzhou/Downloads</code></li>
<li>æŸ¥æ‰¾æ–‡ä»¶ï¼š<code>find * test.rar</code></li>
<li>åˆ é™¤æ–‡ä»¶å¤¹ <code>rm -rf test</code></li>
<li>treeå¯ä»¥çœ‹åˆ°ç›®å½•æ ‘ç»“æ„</li>
<li><code>sshfs xzhou@172.16.46.88:/home/xzhou/project 88_mount/</code>å°†è¿œç¨‹æœåŠ¡å™¨88çš„æ–‡ä»¶å¤¹/home/xzhou/projectæŒ‚è½½åˆ°æœ¬æœºçš„<code>88_mount/</code>ç›®å½•ä¸‹ï¼Œç®¡ç†å‘˜éœ€è¦<code>sshfs xzhou@172.16.46.88:/home/xzhou/project 88_mount/ -o allow_other</code>ï¼Œå–æ¶ˆæŒ‚è½½<code>fusermount -u 88_mount/</code></li>
<li><code>fusermount</code>æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æŒ‡ä»¤ï¼Œå¦‚æœæŒ‚è½½ä¸æˆåŠŸå°±ç”¨è¿™ä¸ªæŒ‡ä»¤å–æ¶ˆæŒ‚è½½ã€‚ä½†æ˜¯å¶å°”ä¼šæ— æ³•å–æ¶ˆï¼Œæ˜¾ç¤ºdevice is busyï¼ŒåŸå› å°±æ˜¯æœ‰è¿›ç¨‹å ç€è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚é‚£ä¹ˆéœ€è¦å…ˆ<code>ps aux|grep xzhou</code>æ‰¾åˆ°è‡ªå·±çš„è¿›ç¨‹çœ‹çœ‹ä»€ä¹ˆä¸æ­¤ç›¸å…³ï¼Œç„¶å<code>kill -s 9 PROCESS_ID</code>ï¼Œç„¶åå†å–æ¶ˆæŒ‚è½½ã€‚</li>
<li>å½“ç„¶ä¹Ÿå¯ä»¥æŒ‚è½½å…¶ä»–æœåŠ¡å™¨çš„anaconda(è¿™æ—¶å€™æ³¨æ„æºæ–‡ä»¶å¤¹å’Œç›®æ ‡æ–‡ä»¶å¤¹çš„åå­—ä¸€è‡´ï¼Œè€ƒè™‘åˆ°ä¸æƒ³ä¿®æ”¹ç¯å¢ƒå˜é‡)ï¼Œä½†æ˜¯æ³¨æ„é¦–å…ˆéœ€è¦å°†æœ¬åœ°çš„<code>~/.bashrc</code>æ–‡ä»¶æ³¨é‡Šæ‰condaéƒ¨åˆ†å†sourceæŒ‡ä»¤ï¼Œç„¶åå†æŒ‚è½½ï¼ˆä¸ç„¶ä¼šå‡ºç°æ— å“åº”ï¼‰ï¼Œå†å–æ¶ˆæ³¨é‡Šå†sourceæŒ‡ä»¤</li>
<li><code>ln -s /tmp/test1.txt test2.txt</code> å°†åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºç¬¦å·æ–‡ä»¶â€œtest2.txtâ€ï¼Œ<code>ln -s /tmp/test1.txt</code> å°†åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºç¬¦å·æ–‡ä»¶â€œtest1.txtâ€ã€‚åˆ é™¤é“¾æ¥ç¬¦å·æ–‡ä»¶è¯­æ³•æ˜¯<code>rm file</code>æˆ–è€…<code>rm dir</code></li>
<li>æ–‡ä»¶å¤¹ç®€å•åˆå¹¶å‘½ä»¤:å°†1å’Œ2æ–‡ä»¶å¤¹å†…å®¹åˆå¹¶åˆ°3<code>mkdir 3;mv -i 1 3;mv -i 2 3</code>ï¼Œè¿™æ—¶å€™1å’Œ2æ–‡ä»¶å¤¹å°±æ˜¯ç©ºçš„äº†ã€‚ä½†æ˜¯å½“æ–‡ä»¶å¤¹æ–‡ä»¶åºå¤§æ—¶ä¼šæŠ¥é”™<code>-bash: /bin/mv: Argument list too long</code>,éœ€è¦ä½¿ç”¨æŒ‡ä»¤<code>find 1 -name &#39;*.*&#39; -exec mv {} 3 \;</code>å’Œ<code>find 2 -name &#39;*.*&#39; -exec mv {} 3 \;</code></li>
<li>å°†7è¡Œçš„æ–‡æœ¬åˆ†æˆå‰åä¸¤éƒ¨åˆ†ï¼š<code>cat test.lst|head -n 3</code>(å‰3) <code>cat test.lst|tail -n +4</code>(å4)</li>
</ul>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ul>
<li><code>cat std_std_wiki.txt|grep --color=always -n &#39;query&#39;|less -R</code> æ˜¾ç¤ºæŸ¥è¯¢çš„ç»“æ„ã€‚-Ræ˜¯Repaint screen, discarding buffered input.</li>
</ul>
<h1 id="Macå¯¹åº”Windowsçš„æŒ‰é”®"><a href="#Macå¯¹åº”Windowsçš„æŒ‰é”®" class="headerlink" title="Macå¯¹åº”Windowsçš„æŒ‰é”®"></a>Macå¯¹åº”Windowsçš„æŒ‰é”®</h1><p><kbd>Command (or Cmd) âŒ˜</kbd><br><kbd>Shift â‡§</kbd><br><kbd>Option (or Alt) âŒ¥</kbd><br><kbd>Control (or Ctrl) âŒƒ</kbd><br><kbd>Caps Lock â‡ª</kbd> </p>
<a id="more"></a>
<h2 id="æ–‡å­—å¤„ç†"><a href="#æ–‡å­—å¤„ç†" class="headerlink" title="æ–‡å­—å¤„ç†"></a>æ–‡å­—å¤„ç†</h2><ul>
<li>Linuxç³»ç»Ÿä¸­çš„<strong>wc</strong>(Word Count)å‘½ä»¤çš„åŠŸèƒ½ä¸ºç»Ÿè®¡æŒ‡å®šæ–‡ä»¶ä¸­çš„å­—èŠ‚æ•°ã€å­—æ•°ã€è¡Œæ•°ï¼Œå¹¶å°†ç»Ÿè®¡ç»“æœæ˜¾ç¤ºè¾“å‡º</li>
</ul>
<h3 id="PDFç›¸å…³"><a href="#PDFç›¸å…³" class="headerlink" title="PDFç›¸å…³"></a>PDFç›¸å…³</h3><h4 id="PDF-gt-TXT"><a href="#PDF-gt-TXT" class="headerlink" title="PDF-&gt;TXT"></a>PDF-&gt;TXT</h4><p>pdftotextå¯ä»¥å¾—åˆ°pdfå¯¹åº”çš„çº¯æ–‡æœ¬ç‰ˆæœ¬</p>
<h4 id="å­—ä½“åµŒå…¥"><a href="#å­—ä½“åµŒå…¥" class="headerlink" title="å­—ä½“åµŒå…¥"></a>å­—ä½“åµŒå…¥</h4><p>ä¼šè®®æäº¤è®ºæ–‡è¦æ±‚PDFå­—ä½“åµŒå…¥<br>å¼ºåˆ¶å­—ä½“åµŒå…¥ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pdf2ps template.pdf</span><br><span class="line">ps2pdf -dPDFSETTINGS=/prepress template.ps template.pdf</span><br></pre></td></tr></table></figure><br>éªŒè¯ï¼š<code>pdffonts template.pdf</code><br>å¯ä»¥çœ‹åˆ°æ‰€æœ‰å­—ä½“å·²è¢«åµŒå…¥<br><img src="/2018/07/26/Linux/1.png" class=""></p>
<h4 id="æ˜¾ç¤ºPDFä¿¡æ¯-MacOS"><a href="#æ˜¾ç¤ºPDFä¿¡æ¯-MacOS" class="headerlink" title="æ˜¾ç¤ºPDFä¿¡æ¯ (MacOS)"></a>æ˜¾ç¤ºPDFä¿¡æ¯ (MacOS)</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew install xpdf</span><br><span class="line">pdfinfo test.pdf</span><br></pre></td></tr></table></figure>
<h4 id="PDFä¿®æ”¹ä½œè€…ç­‰metadata-MacOS"><a href="#PDFä¿®æ”¹ä½œè€…ç­‰metadata-MacOS" class="headerlink" title="PDFä¿®æ”¹ä½œè€…ç­‰metadata (MacOS)"></a>PDFä¿®æ”¹ä½œè€…ç­‰metadata (MacOS)</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew install exiftool</span><br><span class="line">exiftool -Title&#x3D;&quot;Change This Title&quot; -Subject&#x3D;&quot;Fun and PDF&quot; change_my_meta.pdf</span><br></pre></td></tr></table></figure>
<h2 id="å›¾åƒå¤„ç†"><a href="#å›¾åƒå¤„ç†" class="headerlink" title="å›¾åƒå¤„ç†"></a>å›¾åƒå¤„ç†</h2><p>Macéœ€è¦ brew install imagemagickæ‰èƒ½ä½¿ç”¨convert</p>
<p>gifè½¬ä¸€äº›åˆ—å›¾ç‰‡ï¼ˆå¸§ä¸ºå•ä½ï¼‰ <code>convert test.gif test%05d.png</code><br>ä¸€ç³»åˆ—pngè½¬è§†é¢‘ <code>ffmpeg -i test%05d.png test.mp4</code></p>
<p>å¦‚æœéœ€è¦å°†è§†é¢‘é€Ÿåº¦å˜æ…¢è¦åŠ é€‰é¡¹ <code>-filter:v &quot;setpts=2.0*PTS&quot;</code><br>è¦è®©ç¬¦åˆMP4V2æ ¼å¼éœ€è¦åŠ é€‰é¡¹ <code>-brand mp42</code><br>æ¯”å¦‚<code>ffmpeg -i test%05d.png -filter:v &quot;setpts=2.0*PTS&quot; -brand mp42 test.mp4</code></p>
<h2 id="ç³»ç»Ÿ"><a href="#ç³»ç»Ÿ" class="headerlink" title="ç³»ç»Ÿ"></a>ç³»ç»Ÿ</h2><h3 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h3><ul>
<li><code>getconf LONG_BIT</code>å¾—åˆ°Linuxç³»ç»Ÿæ˜¯x86è¿˜æ˜¯x32</li>
<li><code>cat /proc/driver/nvidia/version</code>æŸ¥çœ‹CUDAé©±åŠ¨ç‰ˆæœ¬</li>
<li><code>who -b</code> æŸ¥çœ‹æœ€åä¸€æ¬¡ç³»ç»Ÿå¯åŠ¨çš„æ—¶é—´ <code>who -r</code> æŸ¥çœ‹å½“å‰ç³»ç»Ÿè¿è¡Œæ—¶é—´</li>
<li>æŸ¥çœ‹æ‰€ç”¨çš„æ¡Œé¢ç¯å¢ƒ <code>env|grep DESKTOP=</code></li>
<li><code>lsb_release -a</code>æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬(æ²¡æœ‰å°±ç”¨<code>yum install lsb</code>æˆ–è€…<code>cat /etc/os-release</code>)</li>
<li>å…³æœº <code>shutdown -r now</code></li>
</ul>
<h4 id="å®‰è£…è½¯ä»¶çš„ä¾èµ–åº“"><a href="#å®‰è£…è½¯ä»¶çš„ä¾èµ–åº“" class="headerlink" title="å®‰è£…è½¯ä»¶çš„ä¾èµ–åº“"></a>å®‰è£…è½¯ä»¶çš„ä¾èµ–åº“</h4><p>Ubuntu:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo sed -Ei &#39;s&#x2F;^# deb-src &#x2F;deb-src &#x2F;&#39; &#x2F;etc&#x2F;apt&#x2F;sources.list</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get build-dep wine-stable</span><br></pre></td></tr></table></figure><br>CentOS:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum-builddep -y wine</span><br></pre></td></tr></table></figure></p>
<h3 id="å¢åŠ ç”¨æˆ·"><a href="#å¢åŠ ç”¨æˆ·" class="headerlink" title="å¢åŠ ç”¨æˆ·"></a>å¢åŠ ç”¨æˆ·</h3><p>å…ˆç™»å½•rootç”¨æˆ·</p>
<ol>
<li>adduser xzhou</li>
<li>passwd xzhou ä¼¼ä¹ä¸éœ€è¦ å› ä¸ºç¬¬ä¸€æ­¥è¾“å…¥äº†å¯†ç </li>
</ol>
<p>å¢åŠ ç½‘ç»œèµ„æºå…±äº«æ–‡ä»¶å¤¹</p>
<ol start="3">
<li>sudo nano /etc/samba/smb.conf</li>
<li>sudo smbpasswd -a xzhou</li>
<li>sudo service smbd restart</li>
</ol>
<h2 id="æ˜¾å¡-GPUè®¡ç®—"><a href="#æ˜¾å¡-GPUè®¡ç®—" class="headerlink" title="æ˜¾å¡ GPUè®¡ç®—"></a>æ˜¾å¡ GPUè®¡ç®—</h2><ul>
<li><code>watch -n 1 nvidia-smi</code> æ¯ç§’åˆ·æ–°ä¸€æ¬¡ nvidia-smi</li>
</ul>
<h2 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h2><ul>
<li><code>ps ax | grep python</code>  å¯ä»¥çœ‹åˆ°å…¶ä»–äººåœ¨è¿è¡Œçš„Pythonä»£ç </li>
<li>å·²çŸ¥PIDæŸ¥çœ‹æŒ‡ä»¤æ‰€åœ¨ç›®å½•ï¼š<code>lsof -p PID|grep cwd</code></li>
<li><code>kill -s 9 PID</code> å¼ºåˆ¶æ€æ­»è¿›ç¨‹æ ‡è¯†å·PIDçš„è¿›ç¨‹</li>
<li>å·²çŸ¥PIDå¦‚ä½•æŸ¥çœ‹å®Œæ•´æŒ‡ä»¤:<code>ps PID</code></li>
<li>å·²çŸ¥ç«¯å£æŸ¥è¿›ç¨‹æ˜¯ <code>lsof â€“i:ç«¯å£å·</code></li>
</ul>
<h2 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h2><ul>
<li>å®æ—¶æŸ¥çœ‹ç½‘é€Ÿ <code>sudo apt-get install nethogs &amp; sudo nethogs</code></li>
<li>æŸ¥çœ‹å…¬ç½‘IP <code>curl api.ipify.org</code> æŸ¥çœ‹ç§æœ‰IP <code>ifconfig</code></li>
</ul>
<h1 id="è¿œç¨‹æ§åˆ¶"><a href="#è¿œç¨‹æ§åˆ¶" class="headerlink" title="è¿œç¨‹æ§åˆ¶"></a>è¿œç¨‹æ§åˆ¶</h1><h2 id="å®‰è£…VNC-server"><a href="#å®‰è£…VNC-server" class="headerlink" title="å®‰è£…VNC-server"></a>å®‰è£…VNC-server</h2><p><code>ps -ef|grep -i vnc</code> æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„vncserverçš„è¿›ç¨‹<br><code>vncserver -kill :1</code>      #å…³é—­è¿™ä¸ªè¿æ¥<br><code>vncserver :1</code> é‡å¯vncserver</p>
<h2 id="å®‰è£…teamvieweræˆ–xrdp"><a href="#å®‰è£…teamvieweræˆ–xrdp" class="headerlink" title="å®‰è£…teamvieweræˆ–xrdp"></a>å®‰è£…teamvieweræˆ–xrdp</h2><h1 id="ç¾åŒ–å’Œæ±‰åŒ–man"><a href="#ç¾åŒ–å’Œæ±‰åŒ–man" class="headerlink" title="ç¾åŒ–å’Œæ±‰åŒ–man"></a>ç¾åŒ–å’Œæ±‰åŒ–man</h1><h2 id="æ±‰åŒ–"><a href="#æ±‰åŒ–" class="headerlink" title="æ±‰åŒ–"></a>æ±‰åŒ–</h2><ol>
<li><code>sudo apt-get install sudo !!-zh</code>???</li>
<li>æŸ¥çœ‹man æ‰‹å†Œå®‰è£…åˆ°å“ªé‡Œï¼Œ<code>dpkg -L manpages-zh | less</code><br>æŸ¥çœ‹åˆ°å®‰è£…åœ¨/usr/share/man/zh_CN</li>
<li>è®¾ä¸€ä¸ªä¸­æ–‡manåˆ«å,     ä¿®æ”¹ ~/.bashrc æ·»åŠ ä¸€ä¸ªalias :<br><code>alias cman=&#39;man -M /usr/share/man/zh_CN&#39;</code>ï¼Œæˆ–è€…ç”¨å‘½ä»¤<code>sed -i &#39;$a alias cman=&quot;man -M /usr/share/man/zh_CN&quot;&#39; .bashrc</code>(åœ¨æœ€åä¸€è¡Œåå¢åŠ ä¸€è¡Œï¼Œå¹¶å†™å…¥æ–‡ä»¶)</li>
<li><code>source ~/.bashrc</code> é‡å¯ç»ˆç«¯ <code>cman ls</code>å°±æ˜¯æ±‰åŒ–çš„manï¼Œ<code>man ls</code>å°±æ˜¯è‹±æ–‡çš„man<br>##ç¾åŒ–</li>
<li><code>sudo apt-get install most</code></li>
<li>ä¿®æ”¹ ~/.bashrc æ·»åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡ :<code>export PAGER=&quot;/usr/bin/most -s&quot;</code>,æˆ–è€…ç”¨å‘½ä»¤<code>sed -i &#39;$a export PAGER=&quot;/usr/bin/most -s&quot;&#39; .bashrc</code>(åœ¨æœ€åä¸€è¡Œåå¢åŠ ä¸€è¡Œï¼Œå¹¶å†™å…¥æ–‡ä»¶)</li>
<li><code>source ~/.bashrc</code> é‡å¯ç»ˆç«¯ <code>man ls</code>å°±æ˜¯è‹±æ–‡çš„ç¾åŒ–ç‰ˆçš„man</li>
</ol>
<h1 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h1><h2 id="è®©ä¸Šä¸€ä¸ªå‘½ä»¤ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œ"><a href="#è®©ä¸Šä¸€ä¸ªå‘½ä»¤ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œ" class="headerlink" title="è®©ä¸Šä¸€ä¸ªå‘½ä»¤ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œ"></a>è®©ä¸Šä¸€ä¸ªå‘½ä»¤ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œ</h2><p><code>apt-get install ranger</code>ç„¶åæŠ¥æƒé™ä¸è¶³å†æ•²å…¥<code>sudo !!</code>è¿è¡Œä¸Šä¸€æ¡å‘½ä»¤</p>
<h2 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h2><p>å‘½ä»¤è¡Œæ—¥å¸¸ç³»å¿«æ·é”®</p>
<p><kbd>Ctrl</kbd> + <kbd>U</kbd> - å‰ªåˆ‡å…‰æ ‡å‰çš„å†…å®¹<br><kbd>Ctrl</kbd> + <kbd>K</kbd> - å‰ªåˆ‡å…‰æ ‡è‡³è¡Œæœ«çš„å†…å®¹<br><kbd>Ctrl</kbd> + <kbd>Y</kbd> - ç²˜è´´<br><kbd>Ctrl</kbd> + <kbd>E</kbd> - ç§»åŠ¨å…‰æ ‡åˆ°è¡Œæœ«<br><kbd>Ctrl</kbd> + <kbd>A</kbd> - ç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–<br><kbd>Ctrl</kbd> + <kbd>F</kbd> - è·³å‘ä¸‹ä¸€ä¸ªç©ºæ ¼<br><kbd>Ctrl</kbd> + <kbd>B</kbd> - è·³å›ä¸Šä¸€ä¸ªç©ºæ ¼<br><kbd>Alt</kbd> + <kbd>Backspace</kbd> - åˆ é™¤å‰ä¸€ä¸ªå•è¯<br><kbd>Ctrl</kbd> + <kbd>W</kbd> - å‰ªåˆ‡å…‰æ ‡åä¸€ä¸ªå•è¯<br><kbd>Shift</kbd> + <kbd>Insert</kbd> - å‘ç»ˆç«¯å†…ç²˜è´´æ–‡æœ¬</p>
<h2 id="æš‚åœå¹¶åœ¨åå°è¿è¡Œå‘½ä»¤"><a href="#æš‚åœå¹¶åœ¨åå°è¿è¡Œå‘½ä»¤" class="headerlink" title="æš‚åœå¹¶åœ¨åå°è¿è¡Œå‘½ä»¤"></a>æš‚åœå¹¶åœ¨åå°è¿è¡Œå‘½ä»¤</h2><p><kbd>Ctrl</kbd> + <kbd>Z</kbd> - æš‚åœåº”ç”¨ç¨‹åºï¼ˆæ¯”å¦‚æ­£åœ¨ç”¨nanoç¼–è¾‘test.txtï¼‰<br>fg - é‡æ–°å°†ç¨‹åºå”¤åˆ°å‰å°<br>jobs - æŸ¥çœ‹ä»»åŠ¡æ•°ç›®<br>åªè¦æŒ‰<kbd>Ctrl</kbd> + <kbd>Z</kbd>ï¼Œå‰å°çš„å‘½ä»¤å°±ä¼šæš‚åœï¼Œç”»é¢å°±åˆ‡å›åˆ°å‘½ä»¤è¡Œäº†ã€‚ç„¶åä½ å°±èƒ½è¿è¡Œä½ æƒ³è¦è¿è¡Œçš„å‘½ä»¤ï¼Œç­‰å‘½ä»¤è¿è¡Œå®Œååœ¨ç»ˆç«¯çª—å£è¾“å…¥fgå°±å¯ä»¥å›åˆ°å…ˆå‰æš‚åœçš„ä»»åŠ¡</p>
<h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><h3 id="æ™®é€šä¸‹è½½"><a href="#æ™®é€šä¸‹è½½" class="headerlink" title="æ™®é€šä¸‹è½½"></a>æ™®é€šä¸‹è½½</h3><p>ä½¿ç”¨axel<br><code>apt-get install axel</code><br>ä½¿ç”¨ç®€å• <code>axel URL</code><br>æˆ‘å¸¸ç”¨çš„æŒ‡ä»¤:å¤šçº¿ç¨‹(10ä¸ª)ä¸‹è½½å¹¶æ”¹å˜è¿›åº¦æ¡æ ·å¼ï¼š<code>axel -n 32 -a URL</code></p>
<h3 id="ä¸‹è½½è§†é¢‘"><a href="#ä¸‹è½½è§†é¢‘" class="headerlink" title="ä¸‹è½½è§†é¢‘"></a>ä¸‹è½½è§†é¢‘</h3><p>ä½¿ç”¨you-getå’Œyoutube-dlä»¥åŠ<a href="http://docker run alpine cat /etc/os-release.flvcd.com/">ç¡•é¼ </a><br>ä»Youtubeè§†é¢‘ä¸­ä¸‹è½½éŸ³é¢‘ï¼ˆwavæ ¼å¼ï¼‰æ”¯æŒbç«™<br>youtube-dl â€“extract-audio â€“audio-format wav URL</p>
<p>æ¯”å¦‚æˆ‘æƒ³ä¸‹è½½è¿™ä¸ª<a href="http://www.miaopai.com/show/R~22buLsn55r7IVQKvMjZ4Le2mJ7PS7BqxjbAg__.htm" target="_blank" rel="noopener">æƒ…éå¾—å·²</a>çš„éŸ³é¢‘</p>
<ol>
<li>ä½¿ç”¨python3å®‰è£…you-get</li>
<li><code>you-get http://www.miaopai.com/show/R~22buLsn55r7IVQKvMjZ4Le2mJ7PS7BqxjbAg__.htm</code></li>
<li><code>ffmpeg -i é˜¿å¡è´æ‹‰ç‰ˆæƒ…éå¾—å·².mp4 -f mp3 -vn é˜¿å¡è´æ‹‰ç‰ˆæƒ…éå¾—å·².mp3</code><br>å‚æ•°è§£é‡Šï¼š<br>-i è¡¨ç¤ºinputï¼Œå³è¾“å…¥æ–‡ä»¶<br>-f è¡¨ç¤ºformatï¼Œå³è¾“å‡ºæ ¼å¼<br>-vnè¡¨ç¤ºvedio notï¼Œå³è¾“å‡ºä¸åŒ…å«è§†é¢‘</li>
<li><code>play é˜¿å¡è´æ‹‰ç‰ˆæƒ…éå¾—å·².mp3</code> (éœ€è¦å®‰è£…soxåº“)</li>
</ol>
<h3 id="åå°ä¸‹è½½è§†é¢‘"><a href="#åå°ä¸‹è½½è§†é¢‘" class="headerlink" title="åå°ä¸‹è½½è§†é¢‘"></a>åå°ä¸‹è½½è§†é¢‘</h3><p>å¦‚æœç°åœ¨å¾ˆå¤šä¸ªbç«™è§†é¢‘éœ€è¦ä¸‹è½½ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯CTRL + Z and fg ç»“åˆ youtube-dlï¼Œå®è·µå‘ç°ä¸è¡Œï¼ŒæŒ‚èµ·æ—¶ä¸‹è½½ä¼šæš‚åœã€‚ä¹‹å‰æˆ‘ç©è¿‡æ ‘è“æ´¾ï¼Œå¾ˆå¤šLinuxçŸ¥è¯†éƒ½æ˜¯ä»é‚£é‡Œå­¦åˆ°çš„</p>
<p>æ‰€ä»¥æˆ‘å‘ç°äº†screenå‘½ä»¤. MacOSæ˜¯è‡ªå¸¦çš„,Linuxä½¿ç”¨<code>sudo apt-get install screen</code>å®‰è£…</p>
<p>ç»ˆç«¯è¾“å…¥ï¼ˆXshellè½¯ä»¶é‡Œæ“ä½œä¸€æ ·çš„ï¼‰:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">screen youtube-dl --extract-audio --audio-format mp3 https://www.bilibili.com/video/av6846882</span><br></pre></td></tr></table></figure><br>å®ƒä¼šä¸‹è½½ç¬¬ä¸€ä¸ªè§†é¢‘ï¼Œè¿™æ—¶å€™æŒ‰ä½<kbd>Ctrl</kbd>+<kbd>A</kbd>ç„¶å<kbd>Ctrl</kbd>+<kbd>D</kbd>ä¼šå›åˆ°ç»ˆç«¯ï¼Œä½†æ˜¯è§†é¢‘ä¾ç„¶åœ¨ä¸‹è½½ï¼Œè¿™æ—¶å€™å†æ¬¡ç»ˆç«¯è¾“å‡ºæ–°çš„è§†é¢‘PIDï¼Œå°±ä¼šä¸‹è½½ç¬¬äºŒä¸ªï¼Œä»¥æ­¤ç±»æ¨â€¦</p>
<p>æŸ¥çœ‹æ‰€ä»¥ä»»åŠ¡æ˜¯<code>screen -ls</code>,æ‰€æœ‰è§†é¢‘ä¸€æ—¦å®Œæˆä¸‹è½½ï¼Œ<code>screen -ls</code>å°±ä¼šè¾“å‡º<code>No Sockets found in bilibala...</code>ã€‚è¯´æ˜ä¸€ä¸ªä»»åŠ¡å®Œæˆå®ƒä¼šè‡ªåŠ¨é€€å‡ºé‚£ä¸ªè™šæ‹Ÿç»ˆç«¯çš„</p>
<p>å¦‚æœæˆ‘ä»¬å…³é—­ç»ˆç«¯ä¸å½±å“screenï¼Œä¸ä¿¡ä½ é‡æ–°æ‰“å¼€ç»ˆç«¯è¯•è¯•<code>screen -ls</code></p>
<p>æ¢å¤ä¸€ä¸ªè™šæ‹Ÿç»ˆç«¯å‘½ä»¤æ˜¯<code>screen -r IDå·</code><br>å¦‚æœç»ˆç«¯æœ¬èº«è‡ªå·±ä¸èƒ½ç»“æŸï¼Œå°±<code>screen -r IDå·</code>ç„¶å<code>exit</code></p>
<h1 id="è™šæ‹ŸåŒ–æŠ€æœ¯"><a href="#è™šæ‹ŸåŒ–æŠ€æœ¯" class="headerlink" title="è™šæ‹ŸåŒ–æŠ€æœ¯"></a>è™šæ‹ŸåŒ–æŠ€æœ¯</h1><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><h3 id="æŒ‡ä»¤-1"><a href="#æŒ‡ä»¤-1" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h3><ul>
<li>æœç´¢é•œåƒ<code>docker search é•œåƒID</code></li>
<li>ä½¿ç”¨åå°è¿è¡Œ(-d)å®¹å™¨<code>docker run -d é•œåƒID</code></li>
<li>è¿è¡ŒåŸºäºå®¹å™¨å<code>docker run --name mycontainer é•œåƒID</code></li>
<li>è¿è¡Œæ—¶æš´éœ²ç«¯å£<code>-p &lt;host-port&gt;:&lt;container-port&gt;</code>(å¦‚æœæ²¡æŒ‡å®šhost-port,ä¸»æœºä¼šéšæœºæŒ‡å®šä¸€ä¸ªå¯ä½¿ç”¨çš„portå»å’Œcontainerçš„portåšè¿æ¥ï¼Œæ­¤æ—¶å¯ç”¨<code>docker port å®¹å™¨ID å®¹å™¨æš´éœ²çš„ç«¯å£</code>æˆ–è€…<code>docker ps</code>æ£€æŸ¥)</li>
<li>è¿è¡Œæ—¶æŒ‚è½½å®¿ä¸»æœºç›®å½•<code>-v &lt;host-dir&gt;:&lt;container-dir&gt;</code></li>
<li>è¿è¡Œå®¹å™¨çš„shellå‘½ä»¤<code>docker run -it ubuntu bash</code></li>
<li>æŸ¥çœ‹å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ <code>docker ps</code>ï¼Œæ˜¾ç¤ºå·²ç»é€€å‡ºçš„å®¹å™¨ <code>docker ps -a</code></li>
<li>åˆ—å‡ºå®¹å™¨è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚ipåœ°å€<code>docker inspect å®¹å™¨ID</code></li>
<li>åˆ—å‡ºå®¹å™¨çš„æ ‡å‡†è¾“å‡ºstdoutå’Œstderr<code>docker logs å®¹å™¨ID</code></li>
<li>æ˜¾ç¤ºæ‰€æœ‰é•œåƒ <code>docker images</code></li>
<li>å¯åŠ¨/åœæ­¢æŸä¸ªå®¹å™¨ <code>docker start/stop å®¹å™¨ID</code></li>
<li>åˆ é™¤é•œåƒ <code>docker rmi é•œåƒID</code></li>
<li>åˆ é™¤æ‰€æœ‰TAGä¸º<none>çš„é•œåƒ <code>docker images|grep none|awk &#39;{print $3}&#39;|xargs docker rmi</code></li>
<li>åˆ é™¤å®¹å™¨ <code>docker rm å®¹å™¨ID</code></li>
<li>åˆ é™¤æ‰€æœ‰å®¹å™¨ <code>docker rm $(docker ps -aq)</code></li>
<li>åœ¨å®¹å™¨è¿è¡Œå‘½ä»¤æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯ <code>docker run ubuntu cat /etc/os-release</code>ï¼Œæ²¡æœ‰è¿™ä¸ªé•œåƒåˆ™åˆ›å»ºé•œåƒï¼ˆç”¨å®Œå¯åˆ é™¤å®¹å™¨ï¼‰</li>
<li>å¼€å¯å®¹å™¨äº¤äº’æ¨¡å¼ï¼š<code>docker run -it ubuntu</code> exité€€å‡º</li>
<li>æ‰“å¼€äº¤äº’å¼ç»ˆç«¯ <code>docker start -i å®¹å™¨ID</code>ï¼Œæ¯æ¬¡ä½¿ç”¨å°±ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å°±è¡Œ</li>
</ul>
<h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><p>ä¸€ä¸ªèŒƒä¾‹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FROM nginx:1.11-alpine</span><br><span class="line">COPY index.html &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html</span><br><span class="line">EXPOSE 80</span><br><span class="line"># equal to nginx -g daemon off;</span><br><span class="line">CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œï¼š<br><code>docker build -t my-nginx-image:latest .</code><br><code>docker run -d -p 80:80 my-nginx-image:latest</code><br><code>curl -i http://docker</code>(å¾—åˆ°å®Œæ•´çš„http response)</p>
<p>Dockerfileçš„ONBUILDæŒ‡ä»¤ï¼š</p>
<ul>
<li>æ—§dockerfileä¸­æœ‰ONBUILDå‰ç¼€çš„æŒ‡ä»¤åœ¨docker buildçš„æ—¶å€™ä¸ä¼šæ‰§è¡Œ</li>
<li>æ–°çš„dockerfileåœ¨docker buildçš„æ—¶å€™ä¼šå®Œæ•´æ‰§è¡ŒåŸºç¡€é•œåƒçš„dockerfileæŒ‡ä»¤ï¼ˆåŒ…å«ONBUILD çš„ï¼‰ä»¥åŠè‡ªå·±çš„dockerfileåŒ…å«çš„æŒ‡ä»¤</li>
<li>æœ‰æ•ˆç®€çŸ­ç»§æ‰¿æ—§dockerfileæ—¶éœ€è¦å†™çš„æŒ‡ä»¤é‡</li>
<li>ç¥–çˆ¶dockerfileä¸­çš„ONBUILDåœ¨å­™å­dockerfileåšdocker buildæ—¶ä¸ä¼šæ‰§è¡Œ</li>
</ul>
<p>ä½¿ç”¨.dockerignoreå¯é¿å…å¢åŠ æ— ç”¨çš„æ–‡ä»¶æˆ–è€…æ•æ„Ÿæ–‡ä»¶è¿›å…¥buildçš„è¿‡ç¨‹</p>
<h2 id="å»ºç«‹Dockerfile"><a href="#å»ºç«‹Dockerfile" class="headerlink" title="å»ºç«‹Dockerfile"></a>å»ºç«‹Dockerfile</h2><ul>
<li>æ ¹æ®<a href="https://github.com/xiaozhah/WineDocker/blob/master/Dockerfile" target="_blank" rel="noopener">Dockerfile</a>å»ºç«‹æ–‡ä»¶ <code>docker build -t wineubuntu . --no-cache --rm</code></li>
<li>âš ï¸ Dockerfileä¸åŒäºSingularityFile å®ƒçš„å»ºç«‹æ¯ä¸ªRUNæ˜¯ç‹¬ç«‹çš„ï¼Œå› æ­¤æ¶‰åŠç›¸å¯¹ç›®å½•æ—¶è¦å°å¿ƒ</li>
<li>â€“no-cacheä»£è¡¨ä¸ä½¿ç”¨ç¼“å­˜ï¼Œè¿™æ ·å»ºç«‹å‡ºé”™ä¸èƒ½ä»ä¸­é—´æŸä¸€æ­¥é‡æ¥; â€“rmä»£è¡¨åˆ é™¤å»ºç«‹ä¸­çš„ä¸´æ—¶å®¹å™¨</li>
<li><code>-t &lt;repository:tag&gt;</code>è¡¨ç¤ºç”Ÿæˆé•œåƒçš„repositoryåç§°ï¼ˆå³imageåç§°ï¼‰ï¼Œä»¥åŠé€šå¸¸ä½œä¸ºåŒºåˆ†ä¸åŒç‰ˆæœ¬çš„TAG</li>
<li>æäº¤è‡³ä»“åº“ <code>docker push xzhou2333/wineubuntu</code></li>
</ul>
<h3 id="é•œåƒæ‰“åŒ…å‘å¸ƒ"><a href="#é•œåƒæ‰“åŒ…å‘å¸ƒ" class="headerlink" title="é•œåƒæ‰“åŒ…å‘å¸ƒ"></a>é•œåƒæ‰“åŒ…å‘å¸ƒ</h3><ul>
<li><a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a>æ³¨å†Œè´¦æˆ·å¼€å¯æ–°çš„ä»“åº“å¹¶åœ¨ç»ˆç«¯ç™»å½•æ­¤è´¦å·<code>docker login</code></li>
<li><code>docker commit å®¹å™¨ID xzhou2333/winecentos</code>,è¿™æ—¶å€™å°±å¤šå‡ºä¸€ä¸ªé•œåƒäº†</li>
<li><code>docker push xzhou2333/winecentos</code></li>
</ul>
<h2 id="Singularity"><a href="#Singularity" class="headerlink" title="Singularity"></a>Singularity</h2><h3 id="æŒ‡ä»¤-2"><a href="#æŒ‡ä»¤-2" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h3><p>â€“H æŒ‡å®šå®¶ç›®å½•<br>â€“containall æŒ‡å®šä»¥isolatedçš„æ–¹å¼è¿è¡Œé•œåƒ(ä¹Ÿå°±æ˜¯è¯´ä¸€èˆ¬é»˜è®¤ä¼šæŒ‚è½½å®¿ä¸»æœºhomeç›®å½•,pwdå½“å‰å·¥ä½œç›®å½•ä»¥åŠ/tmpç›®å½•,ä½†æ˜¯ç°åœ¨éƒ½ä¸æŒ‚è½½)<br>â€“pwd æŒ‡å®šè¿›å…¥å®¹å™¨åçš„åˆå§‹å·¥ä½œç›®å½•</p>
<h3 id="é•œåƒæ‰“åŒ…å‘å¸ƒ-1"><a href="#é•œåƒæ‰“åŒ…å‘å¸ƒ-1" class="headerlink" title="é•œåƒæ‰“åŒ…å‘å¸ƒ"></a>é•œåƒæ‰“åŒ…å‘å¸ƒ</h3><ul>
<li>æ³¨å†Œ<a href="https://www.singularity-hub.org" target="_blank" rel="noopener">Singularity Hub</a>è´¦æˆ·å¼€å¯æ–°çš„ä»“åº“</li>
<li>å…³è”Githubçš„Singularityä»“åº“ï¼Œ<a href="https://github.com/xiaozhah/WineSingularity" target="_blank" rel="noopener">ä¾‹å¦‚</a></li>
<li>äº‘ç«¯æ„å»ºé•œåƒ é™æ—¶ä¸¤å°æ—¶</li>
</ul>
<h1 id="wine"><a href="#wine" class="headerlink" title="wine"></a>wine</h1><h2 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h2><p>ä¸€èˆ¬æƒ…å†µä¸‹ç®€å•çš„å¯ä»¥ç»ˆç«¯æ‰§è¡Œçš„exeæ‰§è¡Œå°±æ˜¯ï¼š<code>wine test.exe</code><br>é¦–å…ˆwineä¸æ˜¯windowsæ¨¡æ‹Ÿå™¨ä¹Ÿå°±åŸºæœ¬æ²¡æœ‰æ€§èƒ½æŸå¤±ã€‚<br>æˆ‘æµ‹è¯•äº†wineçš„æ€§èƒ½ï¼Œä½¿ç”¨çš„ä»£ç æ¥è‡ª<a href="https://rosettacode.org/wiki/Perfect_numbers#C" target="_blank" rel="noopener">Perfect_numbers</a>ï¼ŒOSX,Windows,Ubuntu,Ubuntu(Wine),æ‰§è¡Œæ—¶é—´åˆ†åˆ«æ˜¯61.87sã€58.89sã€50.88sã€50.93sã€‚æ‰€ä»¥è¿˜çœŸæ˜¯å¾ˆå¿«ï¼ŒåŸºæœ¬æ²¡æœ‰æ€§èƒ½æŸå¤±ã€‚<br>ä½†æ˜¯æœ‰ä¸€æ¬¡æˆ‘çš„C++å·¥ç¨‹æ˜¯VS2015ç¼–è¯‘çš„ï¼Œå…¶ä¸­åº•å±‚è°ƒç”¨äº†windows.hï¼Œæƒ³åœ¨Linuxç¼–è¯‘å¾ˆéº»çƒ¦ï¼Œå› æ­¤å°è¯•wineã€‚å¦å¤–è¿™ä¸ªexeæ˜¯ä¼šè°ƒç”¨MXNetçš„C++APIï¼ˆå› ä¸ºåŒ…å«ç¥ç»ç½‘ç»œçš„å‰é¦ˆè¿ç®—ï¼‰ï¼Œéœ€è¦ä»¥ä¸‹Dllåº“</p>
<blockquote>
<p>libgcc_s_seh-1.dll  libgfortran-3.dll  libmxnet.dll  libopenblas.dll  libquadmath-0.dll</p>
</blockquote>
<p>åœ¨Linuxä¸Šç›´æ¥æ‰§è¡ŒæŠ¥é”™ï¼Œè¯´æ˜¯æŸä¸ªå‡½æ•°æœ‰æœªå®ç°çš„å‡½æ•°(wine: Call from 0x7b44cbda to unimplemented function vcomp140.dll._vcomp_for_static_simple_init_i8, aborting)<br>æˆ‘æ˜¯ç”¨VS2015ç¼–è¯‘çš„å˜›æ‰€ä»¥wineçš„å¯èƒ½åœ¨vcè¿è¡Œæ—¶çš„ç‰ˆæœ¬ä½äº†ï¼Œéœ€è¦æ›´æ–°ã€‚å®ƒä¼šä¸‹è½½åŸç”Ÿvcomp140.dllç„¶åæ›´æ–°è¦†ç›–åŸæœ¬çš„dll<br>ç»ˆç«¯æ‰§è¡Œ<code>winetricks -q vcrun2015</code>ã€‚<br>å¦‚æœæ˜¯ç”¨sshè¿ä¸Šçš„æ²¡æœ‰å›¾å½¢ç•Œé¢çš„è¯ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨<code>xvfb-run winetricks -q vcrun2015</code>,è®©Linuxæ¨¡æ‹Ÿä¸€ä¸ªæ¡Œé¢(éœ€è¦å®‰è£…xvfbè½¯ä»¶)<br>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ol>
<li>å®‰è£…wine è§<a href="https://wiki.winehq.org/Ubuntu_zhcn" target="_blank" rel="noopener">å®‰è£… WineHQ å®‰è£…åŒ…</a></li>
<li><code>sudo apt-get install cabextract</code>(ç¬¬äº”æ­¥éœ€è¦)</li>
<li><strong>é€€å‡ºsudoæƒé™</strong></li>
<li><a href="https://wiki.winehq.org/Winetricks" target="_blank" rel="noopener">å®‰è£…Winetricks</a></li>
<li>ä¸ºäº†è¿è¡Œç”±VS2015ç¼–è¯‘å‡ºæ¥çš„ç¨‹åºå®‰è£…vc2015è¿è¡Œæ—¶ <code>xvfb-run ./winetricks -q vcrun2015</code>ï¼ˆå¯é€‰ï¼Œä½†æ˜¯ä¸å®‰è£…æœ‰äº›è½¯ä»¶å¯èƒ½æ— æ³•è¿è¡Œï¼Œxvfb-runä¹Ÿæ˜¯å¯é€‰é¡¹ï¼‰</li>
<li>å°†dllä¸exeæ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹å³å¯ã€‚<code>wine test.exe</code></li>
</ol>
<h2 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h2><p>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ol>
<li>å®‰è£…wine è§<a href="https://wiki.winehq.org/CentOS/RHEL" target="_blank" rel="noopener">å®‰è£… WineHQ å®‰è£…åŒ… CentOS/RHEL</a>,ç„¶å<code>yum install xorg-x11-server-Xvfb wget</code></li>
<li><strong>é€€å‡ºsudoæƒé™</strong></li>
<li><a href="https://wiki.winehq.org/Winetricks" target="_blank" rel="noopener">å®‰è£…Winetricks</a>ï¼Œè¿™æ—¶å€™ä¸€èˆ¬64ä½çš„ç»ˆç«¯exeå³å¯è¿è¡Œäº†(wine test.exeä¸è¡Œå†æ•²ä¸€ç¼–å°±è¡Œäº†â€¦)</li>
<li>ä¸ºäº†è¿è¡Œç”±VS2015ç¼–è¯‘å‡ºæ¥çš„ç¨‹åºå®‰è£…vc2015è¿è¡Œæ—¶ <code>./winetricks -q vcrun2015</code>ï¼ˆå¯é€‰ï¼Œä½†æ˜¯ä¸å®‰è£…æœ‰äº›è½¯ä»¶å¯èƒ½æ— æ³•è¿è¡Œï¼Œxvfb-runä¹Ÿæ˜¯å¯é€‰é¡¹ï¼‰</li>
<li><del>ç¬¬å››æ­¥æŠ¥é”™ï¼š(fixme:service:scmdatabase_autostart_services Auto-start service Lâ€MountMgrâ€ failed to start: 2,fixme:service:scmdatabase_autostart_services Auto-start service Lâ€WineBusâ€ failed to start: 2)å‚è€ƒ<a href="https://jingyan.baidu.com/article/d169e1867ba57f436611d8d2.html" target="_blank" rel="noopener">ç™¾åº¦çŸ¥é“</a>ï¼Œå³<br><code>find / -name mountmgr.sys
cp /usr/lib64/wine/fakedlls/mountmgr.sys /home/xzhou/.wine/drive_c/windows/system32/drivers/
find / -name winebus.sys
cp /usr/lib64/wine/fakedlls/winebus.sys /home/xzhou/.wine/drive_c/windows/system32/drivers/</code></del></li>
<li><del>è§£å†³ç¬¬äº”æ­¥ä¹‹åç¬¬å››æ­¥ç»§ç»­æŠ¥é”™Bad EXE Format.å› ä¸ºCentOS 7æ²¡æœ‰32ä½ç‰ˆæœ¬ï¼ŒEPELçš„wine æ²¡æœ‰32ä½wineï¼Œåªæœ‰64ä½wineã€‚è€Œvc_redist.x86.exeæ˜¯ä¸€ä¸ª32ä½ç¨‹åºã€‚å‚è€ƒ<a href="https://www.yuzhi100.com/article/centos-7-anzhuang-wine-3" target="_blank" rel="noopener">CentOS 7 ä½¿ç”¨ Yum å®‰è£…ä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆ Wine 3</a>ç»§ç»­å®‰è£…32ä½çš„wine</del></li>
<li><del>å®‰è£…å®Œæˆåç¬¬å››æ­¥çš„Bad EXE Formatæ¶ˆé™¤ï¼Œé”™è¯¯å˜æˆ<code>0009:fixme:actctx:parse_depend_manifests Could not find dependent assembly L&quot;Microsoft.Windows.Common-Controls&quot; (6.0.0.0)</code>ã€‚</del></li>
<li>ç„¶åå®åœ¨æ‰¾ä¸åˆ°è§£å†³åŠæ³•äº†ã€‚æ¥ç¬¬å››æ­¥æš´åŠ›è§£å†³ï¼Œç›´æ¥å°†ä¸Šä¸€ä¸ªubuntuæ–¹æ³•çš„dllæ‹·è´ï¼ˆä¸‹è½½é“¾æ¥è§<a href="https://drive.google.com/open?id=1ZhUCU7Dh_YnhAkgHlf_-nQf65akoyVzQ" target="_blank" rel="noopener">è°·æ­Œç½‘ç›˜</a>ï¼‰è¿‡æ¥ã€‚<code>cp /home/xzhou/Downloads/vcomp140.dll /home/xzhou/.wine/drive_c/windows/system32</code>ã€‚å®Œç¾è§£å†³</li>
</ol>
<p>æ‰€ä»¥åªéœ€è‡³å°‘è¦æ‰§è¡Œ1ã€2ã€3ã€4ã€8å³å¯è§£å†³ã€‚<br>ä¸è¿‡æœ€å¥½ç¬¬äº”æ­¥ä¹Ÿæ‰§è¡Œä»¥ä¸‹è¿™æ ·è¿è¡Œexeæ—¶å°‘ä¸¤ä¸ªfixmeè­¦å‘Š</p>
<h1 id="å†…ç½‘ç©¿é€"><a href="#å†…ç½‘ç©¿é€" class="headerlink" title="å†…ç½‘ç©¿é€"></a>å†…ç½‘ç©¿é€</h1><p>ç›®å‰ä½¿ç”¨çš„æ˜¯ngrokï¼Œå¦‚æœä»å†…ç½‘æœåŠ¡å™¨ä¸‹è½½è½¯ä»¶ä¼šå…ˆ<code>python -m SimpleHTTPServer</code>å†<code>ngrok http 8000</code></p>
]]></content>
      <categories>
        <category>å¸¸è§æŒ‡ä»¤ä»¥åŠç”¨æ³•å¤‡å¿˜å½•</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>Unix</tag>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>åšå®¢æ›´æ–°æ—¥å¿—</title>
    <url>/2018/07/30/%E5%8D%9A%E5%AE%A2%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<p>2018å¹´7æœˆ24æ—¥å‘¨äºŒæˆ‘å¼€å§‹ç€æ‰‹ç ”ç©¶åšå®¢ã€‚<br>èµ·å› æ˜¯å› ä¸ºå°è±¡ç¬”è®°çš„æœ€é«˜çº§ä¼šå‘˜ä¸€ä¸ªç¬”è®°çš„å®¹é‡ä¹Ÿåªæœ‰200MBï¼Œå¯¹äºæ¸¸è®°é‡Œå–œæ¬¢æ”¾ç…§ç‰‡çš„æˆ‘æ¥è¯´å¤ªå°äº†ã€‚<br>å› æ­¤å†³å®šä»ä½¿ç”¨äº†äº”å¹´çš„å°è±¡ç¬”è®°è¿ç§»è‡³æˆ‘ç°åœ¨è¿™ä¸ªåšå®¢ã€‚</p>
<p>æ›¾ç»æˆ‘å†™å°è±¡ç¬”è®°æ˜¯ç›´æ¥ä½¿ç”¨ï¼Œåæ¥ä½¿ç”¨StackExchangeè®ºå›å‘ç°äº†Markdownè¿™ç§å†™ä½œæ–¹å¼ï¼Œäºæ˜¯è´­ä¹°äº†å°è±¡ç¬”è®°æ’ä»¶â€œé©¬å…‹é£è±¡â€ï¼Œæ€»ä½“æ¥è¯´ä¸é”™ã€‚</p>
<p>å› æ­¤æ–°åšå®¢ç«™å®šå¾ˆé‡è¦çš„ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯æ”¯æŒMarkdownã€‚</p>
<a id="more"></a>
<p>æœ€å…ˆæ³¨æ„åˆ°çš„æ¡†æ¶æ˜¯Hugo,å› ä¸ºè‡ªå·±å–œæ¬¢çš„ä¸€ä¸ªå¯è§†åŒ–è®¾è®¡å¸ˆNadieh Bremerçš„<a href="https://www.visualcinnamon.com/" target="_blank" rel="noopener">åšå®¢</a>ä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªï¼Œæˆ‘éå¸¸å–œæ¬¢ç½‘ç«™çš„ä¸»é¢˜Victor Hugoã€‚æˆ‘åŒæ—¶äº†è§£åˆ°è¿™æ˜¯ä¸€ä¸ªé™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œä¼˜ç‚¹æ˜¯ç”Ÿæˆé€Ÿåº¦æ˜¯åŒç±»æ¡†æ¶ä¸­æœ€å¿«çš„ï¼Œå®‰è£…ä¹Ÿç®€å•ã€‚<br>ä½†æ˜¯ä¸€å¼€å§‹æˆ‘å°±çŸ¥é“æˆ‘å¸Œæœ›è‡ªå·±çš„ç½‘ç«™å…·å¤‡ä»€ä¹ˆï¼Œæ¯”å¦‚æ—…è¡Œåšå®¢å¯ä»¥æ‹¥æœ‰èƒŒæ™¯éŸ³ä¹ï¼Œä½†æ˜¯æœç´¢äº†ä¸‹ï¼Œèµ„æ–™å¾ˆå°‘ã€‚jekyllå’ŒHexoå’ŒHugoéƒ½æ˜¯é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼ŒHexoç”Ÿæˆé€Ÿåº¦ä»‹äºä¸‰è€…ä¹‹é—´ï¼Œè€Œä¸”ä¸­æ–‡æ–‡æ¡£ä¹Ÿå¾ˆä¸é”™ï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯NodeJsæ‰€ä»¥æ‹“å±•æ€§æ˜¯ä¼˜äºHugoçš„ã€‚</p>
<p>æ‰€ä»¥é€‰æ‹©<strong>Hexo</strong>è¿™ä¸ªä½œä¸ºç½‘ç«™æ¡†æ¶ï¼Œä¸»é¢˜å…ˆæš‚æ—¶é…ç½®æˆä¸»æµé»‘ç™½é£æ ¼çš„Nextï¼Œä¸è¿‡æˆ‘è§‰å¾—è¿™ç§é£æ ¼å¤ªç¨‹åºå‘˜äº†ï¼Œä¹‹åä¼šæ¢æ‰ã€‚ï¼ˆæ›´æ¢ä¸»é¢˜åœ¨Hexoä¸­å¾ˆç®€å•ï¼‰</p>
<p><strong>æ³¨æ„ï¼šä»¥ä¸‹ä¸»ç›®å½•ä¸‹çš„_config.ymlç§°ä¸º<kbd>ç«™ç‚¹é…ç½®æ–‡ä»¶</kbd>ï¼Œä¸»ç›®å½•ä¸‹çš„themesç›®å½•ä¸‹ç‰¹å®šä¸»ä½“å†…çš„_config.ymlç§°ä¸º<kbd>ä¸»é¢˜é…ç½®æ–‡ä»¶</kbd></strong></p>
<ol>
<li>ä¸è‡ªå·±çš„Githubå…³è”å¹¶æ‰˜ç®¡è‡ªå·±çš„ç½‘ç«™å†…å®¹åœ¨ä¸Šé¢ï¼Œå¾ˆå¤šåšå®¢å·²æœ‰å™è¿°è¿™é‡Œä¸å¤šè¯´ã€‚è®¾ç½®Nextä¸»é¢˜ï¼Œè®¾ç½®æ ¹ç›®å½•ä¸‹_config.ymlçš„theme: next,è®¾ç½®ä¸»é¢˜ç›®å½•ä¸‹çš„_config.ymlçš„Schemeså­—æ®µæ›´æ¢é£æ ¼</li>
<li>æŒ‰ç…§<a href="https://hexo.io/zh-cn/docs/asset-folders.html" target="_blank" rel="noopener">èµ„æºæ–‡ä»¶å¤¹</a>çš„è¯´æ³•ï¼Œæ‰“å¼€<kbd>ç«™ç‚¹é…ç½®æ–‡ä»¶</kbd>å†…çš„post_asset_folderå­—æ®µ,è¿™æ ·ä¸ç®¡æ˜¯å›¾ç‰‡è¿˜æ˜¯è‡ªå·±æœ¬åœ°çš„éŸ³ä¹éƒ½å¯ä»¥ç›´æ¥è¢«Markdownå¼•ç”¨ã€‚<br>æ¯å½“<code>dexo new &quot;testPost&quot;</code>,<code>source/_posts_</code>ç›®å½•ä¸‹éƒ½ä¼šå‡ºç°testPostæ–‡ä»¶å¤¹ä»¥åŠtestPost.mdã€‚æ‰€ä»¥ç´ ææ”¾ç½®åœ¨testPostä¸­</li>
</ol>
<p>å›¾ç‰‡ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% asset_img test.jpg %&#125;</span><br><span class="line"></span><br><span class="line">&lt;img src&#x3D;&quot;test.jpg&quot; width&#x3D;&quot;50%&quot; height&#x3D;&quot;%50&quot;&gt;</span><br></pre></td></tr></table></figure><br>æœ¬åœ°éŸ³ä¹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% aplayer &quot;å•è½¦ç»ƒä¹ æ›²&quot; &quot;ç‹é›ç›Ÿ&quot; &quot;å•è½¦ç»ƒä¹ æ›².mp3&quot; &quot;å•è½¦ç»ƒä¹ æ›².jpg&quot; %&#125;</span><br></pre></td></tr></table></figure><br>ç½‘æ˜“äº‘éŸ³ä¹ï¼š<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> </span></span><br><span class="line"><span class="tag"><span class="attr">frameborder</span>=<span class="string">"no"</span> <span class="attr">border</span>=<span class="string">"0"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">marginwidth</span>=<span class="string">"0"</span> <span class="attr">marginheight</span>=<span class="string">"0"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">width</span>=<span class="string">330</span> <span class="attr">height</span>=<span class="string">86</span> </span></span><br><span class="line"><span class="tag"><span class="attr">src</span>=<span class="string">"//music.163.com/outchain/player?type=2&amp;id=28582962&amp;auto=1&amp;height=66"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>å¯¹äºé‚£äº›æƒ³è¦æ›´æœ‰è§„å¾‹åœ°æä¾›å›¾ç‰‡å’Œå…¶ä»–èµ„æºä»¥åŠæƒ³è¦å°†ä»–ä»¬çš„èµ„æºåˆ†å¸ƒåœ¨å„ä¸ªæ–‡ç« ä¸Šçš„äººæ¥è¯´ï¼ŒHexoä¹Ÿæä¾›äº†æ›´ç»„ç»‡åŒ–çš„æ–¹å¼æ¥ç®¡ç†èµ„æºã€‚è¿™ä¸ªç¨å¾®æœ‰äº›å¤æ‚ä½†æ˜¯ç®¡ç†èµ„æºéå¸¸æ–¹ä¾¿çš„åŠŸèƒ½å¯ä»¥é€šè¿‡å°† config.yml æ–‡ä»¶ä¸­çš„ post_asset_folder é€‰é¡¹è®¾ä¸º true æ¥æ‰“å¼€ã€‚</p>
</blockquote>
<ol start="3">
<li>è®¾ç½®æ ‡ç­¾ï¼Œåˆ†ç±»ä»¥åŠæ–‡ç« ç›®å½•ï¼ˆä¸è¦å®‰è£…hexo-tocæ’ä»¶ä¸ç„¶ç›®å½•ä¸èƒ½è·³è½¬ï¼‰<br>è®¾ç½®å¦‚æˆ‘è¿™ç¯‡åšå®¢<br><code>toc: true</code>ä»£è¡¨æ‰“å¼€ç›®å½•<code>&lt;!-- toc --&gt;</code>è®¾ç½®ç›®å½•å‡ºç°çš„ä½ç½®<br><code>comments: true</code>ä»£è¡¨æ‰“å¼€è¯„è®ºï¼Œè¯„è®ºåŒºåŸŸï¼Œä½¿ç”¨éŸ©å›½â€œæ¥å¿…åŠ›â€è¯„è®ºç³»ç»Ÿï¼Œå¡«å†™ä¸»é¢˜ç›®å½•ä¸‹çš„_config.ymlçš„livere_uidå­—æ®µ<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: åšå®¢æ›´æ–°æ—¥å¿—</span><br><span class="line">date: 2018-07-30 14:54:12</span><br><span class="line">tags: [åšå®¢,Hexo]</span><br><span class="line">comments: true</span><br><span class="line">toc: true</span><br><span class="line">categories: åšå®¢</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">&lt;!-- toc --&gt;</span><br></pre></td></tr></table></figure></li>
<li>2018/7/30 å¢åŠ <a href="https://github.com/theme-next/hexo-generator-searchdb" target="_blank" rel="noopener">æœç´¢</a>åŠŸèƒ½ã€‚<br>ä¿®æ”¹<kbd>ç«™ç‚¹é…ç½®æ–‡ä»¶</kbd><blockquote>
<p>search:<br>path: search.xml<br>field: post<br>format: html<br>limit: 10000</p>
</blockquote>
</li>
</ol>
<p>ä¿®æ”¹<kbd>ä¸»é¢˜é…ç½®æ–‡ä»¶</kbd>local_searchå­—æ®µçš„enableï¼Œè®¾ç½®ä¸ºtrue</p>
<ol start="5">
<li>å¢åŠ äº†ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</li>
</ol>
<ul>
<li>æ–°å¢â€œå…³äºæˆ‘â€œé¡µé¢:å»æ‰<kbd>ä¸»é¢˜é…ç½®æ–‡ä»¶</kbd>menuçš„<code>about: /about/ || user</code>çš„æ³¨é‡Š</li>
<li>ä¿®æ”¹ä¸ªäººå¤´åƒ:ä¿®æ”¹<kbd>ä¸»é¢˜é…ç½®æ–‡ä»¶</kbd>avatarå­—æ®µçš„urlã€‚æˆ‘è¿™é‡Œæ˜¯<code>/images/icon.jpg</code></li>
<li>å¢åŠ ç«™ç‚¹ç»Ÿè®¡ï¼ˆä½¿ç”¨ä¸è’œå­ï¼‰:è®¾ç½®<kbd>ä¸»é¢˜é…ç½®æ–‡ä»¶</kbd>busuanzi_countçš„enableä¸ºtrue</li>
<li>å¢åŠ èƒŒæ™¯å›¾ç‰‡ï¼ˆä¿®æ”¹äº†<code>themes\next\source\css\_custom\custom.styl</code>æ–‡ä»¶ï¼Œå›¾ç‰‡æ¥æºäº<a href="https://source.unsplash.com/" target="_blank" rel="noopener">https://source.unsplash.com/</a>ï¼‰<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// Custom styles.</span><br><span class="line">body &#123;</span><br><span class="line">    background:url(https://images.unsplash.com/photo-1533555855029-9341affa632a?ixlib=rb-0.3.5&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;s=7df5c95df1834e4ff9838f6a96c95096&amp;auto=format&amp;fit=crop&amp;w=2380&amp;q=80);</span><br><span class="line">    background-repeat: no-repeat;</span><br><span class="line">    background-attachment:fixed;</span><br><span class="line">    background-position:50% 50%;</span><br><span class="line">&#125;.main-inner &#123; </span><br><span class="line">    margin-top: 60px;</span><br><span class="line">    padding: 60px 60px 60px 60px;</span><br><span class="line">    background: #fff;</span><br><span class="line">    opacity: 0.9;</span><br><span class="line">    min-height: 500px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="6">
<li>è‡ªå·±å†™äº†ä¸€ä¸ªSublime3æ’ä»¶ç”¨äºå¤åˆ¶å›¾ç‰‡ç²˜è´´å¹¶ç”¨åˆé€‚æ ¼å¼ç²˜è´´è¿›Markdown</li>
</ol>
<p>åœ¨Macä¸‹æ˜¯<kbd>OptopnâŒ¥</kbd> + <kbd>CmdâŒ˜</kbd> + <kbd>c</kbd>å¤åˆ¶æ–‡ä»¶å®Œæ•´è·¯å¾„, ç„¶å<kbd>ControlâŒƒ</kbd>+<kbd>CmdâŒ˜</kbd>+<kbd>v</kbd>å¯ä»¥å¾—åˆ°ç±»ä¼¼è¿™æ ·çš„è¡¨ç¤º<code></code></p>
<p>æ–°å»ºæ’ä»¶<img src="ANq5zfIS.png" width="30%" height="%30"></p>
<p>å¤åˆ¶ä»¥ä¸‹ä»£ç <br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sublime</span><br><span class="line"><span class="keyword">import</span> sublime_plugin</span><br><span class="line"><span class="keyword">import</span> random, string, os, shutil</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">pasteimageCommand</span><span class="params">(sublime_plugin.TextCommand)</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self, edit)</span>:</span></span><br><span class="line">    _filename = self.view.file_name()</span><br><span class="line">    <span class="keyword">if</span> _filename != <span class="literal">None</span>:</span><br><span class="line">      old_file_path = sublime.get_clipboard()</span><br><span class="line">      suffix = os.path.splitext(old_file_path)[<span class="number">1</span>]</span><br><span class="line">      <span class="keyword">if</span> os.path.exists(old_file_path):</span><br><span class="line">        basename  = os.path.splitext(_filename)[<span class="number">0</span>]</span><br><span class="line">        random_string = <span class="string">''</span>.join(random.sample(string.ascii_letters + string.digits, <span class="number">8</span>))+suffix</span><br><span class="line">        new_file_path = os.path.join(basename, random_string)</span><br><span class="line">        shutil.copyfile(old_file_path, new_file_path)</span><br><span class="line">        cur_pos = self.view.sel()[<span class="number">0</span>].begin()</span><br><span class="line">        self.view.insert(edit, cur_pos, <span class="string">'&#123;% asset_img '</span>+os.path.basename(new_file_path)+<span class="string">' %&#125;'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      print(<span class="string">"This file hasn't been saved"</span>)</span><br></pre></td></tr></table></figure><br>ç»‘å®šå¿«æ·é”®<img src="icw4h7bn.png" width="30%" height="%30"><br><img src="/2018/07/30/%E5%8D%9A%E5%AE%A2%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/JGhTRl9O.png" class=""><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123; &quot;keys&quot;: [&quot;ctrl+super+v&quot;], &quot;command&quot;: &quot;pasteimage&quot; &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><br>ä¹‹åå¼€å¯Sublimeè¿™ä¸ªæ’ä»¶å°±è‡ªåŠ¨åŠ è½½äº†</p>
<ol start="7">
<li>æœªæ¥å¯èƒ½ä¼šè®¾ç½®æ ‡ç­¾äº‘ä»¥åŠæ€ç»´å¯¼å›¾</li>
</ol>
]]></content>
      <categories>
        <category>åšå®¢</category>
      </categories>
      <tags>
        <tag>åšå®¢</tag>
        <tag>Hexo</tag>
        <tag>Markdown</tag>
        <tag>Sublime Text3</tag>
      </tags>
  </entry>
  <entry>
    <title>Tensorflow</title>
    <url>/2018/07/26/Tensorflow/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h1 id="TensorflowåŸºæœ¬æŒ‡å—"><a href="#TensorflowåŸºæœ¬æŒ‡å—" class="headerlink" title="TensorflowåŸºæœ¬æŒ‡å—"></a>TensorflowåŸºæœ¬æŒ‡å—</h1><ol>
<li>ä½¿ç”¨Anacondaå®‰è£…ï¼Œè¿è¡Œæ›´å¿«ï¼Œå‚è§</li>
<li>ä¼šè¯æ³¨å†Œ<code>sess=tf.InteractivateSession()</code><br>è¡¨ç¤ºå°†æ˜¯è¿™ä¸ªåˆ›å»ºçš„sessionä½œä¸ºéšåé»˜è®¤çš„sessionï¼Œä¹‹åçš„è¿è¡Œä¹Ÿè¿ç®—ä¹Ÿåœ¨è¿™é‡Œé¢è¿›è¡Œ</li>
<li>åˆ—å‡ºå½“å‰æ¯ä¸ªèŠ‚ç‚¹ä½¿ç”¨çš„deviceï¼Œä½¿ç”¨çš„æ˜¯<code>tf.Session(config=tf.ConfigProto(log_device_placement=True))</code></li>
</ol>
<a id="more"></a>
<h1 id="Tensorflowå¦‚ä½•å¤„ç†è®­ç»ƒæ¨¡å¼å’Œæµ‹è¯•æ¨¡å¼"><a href="#Tensorflowå¦‚ä½•å¤„ç†è®­ç»ƒæ¨¡å¼å’Œæµ‹è¯•æ¨¡å¼" class="headerlink" title="Tensorflowå¦‚ä½•å¤„ç†è®­ç»ƒæ¨¡å¼å’Œæµ‹è¯•æ¨¡å¼"></a>Tensorflowå¦‚ä½•å¤„ç†è®­ç»ƒæ¨¡å¼å’Œæµ‹è¯•æ¨¡å¼</h1><p>DropOutå±‚å’ŒBNå±‚éƒ½æœ‰è®­ç»ƒæ¨¡å¼ã€æµ‹è¯•æ¨¡å¼ã€‚<br>DropOutå±‚ï¼šè®¾ç«‹ä¸€ä¸ªplaceholderï¼Œè®¾ç½®è®­ç»ƒæ—¶ä¸€ä¸ªæ•°ï¼Œæµ‹è¯•æ—¶è®¾ç½®ä¸º0<br><code>phase = tf.placeholder(tf.bool, name=&#39;phase&#39;)</code><br>BNå±‚ï¼šæœªçŸ¥</p>
<h1 id="æ¨¡å‹çš„å¯¼å…¥å¯¼å‡º"><a href="#æ¨¡å‹çš„å¯¼å…¥å¯¼å‡º" class="headerlink" title="æ¨¡å‹çš„å¯¼å…¥å¯¼å‡º"></a>æ¨¡å‹çš„å¯¼å…¥å¯¼å‡º</h1><h2 id="è½½å…¥æ¨¡å‹"><a href="#è½½å…¥æ¨¡å‹" class="headerlink" title="è½½å…¥æ¨¡å‹"></a>è½½å…¥æ¨¡å‹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">trainable = tf.trainable_variables()</span><br><span class="line">optim = optimizer.minimize(loss, global_step=global_step, var_list=trainable)</span><br><span class="line">saver = tf.train.Saver(trainable)</span><br><span class="line">saver.restore(sess, <span class="string">'./logdir/model.ckpt'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="è½½å…¥å¤šæ¨¡å‹-äº¤æ›¿å¾ªç¯ä¸åŒéƒ¨åˆ†"><a href="#è½½å…¥å¤šæ¨¡å‹-äº¤æ›¿å¾ªç¯ä¸åŒéƒ¨åˆ†" class="headerlink" title="è½½å…¥å¤šæ¨¡å‹ äº¤æ›¿å¾ªç¯ä¸åŒéƒ¨åˆ†"></a>è½½å…¥å¤šæ¨¡å‹ äº¤æ›¿å¾ªç¯ä¸åŒéƒ¨åˆ†</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">trainable = tf.trainable_variables()</span><br><span class="line">trainable_DNN = tf.get_collection(tf.GraphKeys.TRAINABLE_VARIABLES,<span class="string">"DNN_part"</span>)</span><br><span class="line">trainable_WaveNet = tf.get_collection(tf.GraphKeys.TRAINABLE_VARIABLES,<span class="string">"wavenet_part"</span>)</span><br><span class="line"></span><br><span class="line">optim = optimizer.minimize(loss, global_step=global_step, var_list=trainable)</span><br><span class="line">optim_DNN = optimizer.minimize(loss, global_step=global_step, var_list=trainable_DNN)</span><br><span class="line">optim_WaveNet = optimizer.minimize(loss, global_step=global_step, var_list=trainable_WaveNet)</span><br><span class="line"></span><br><span class="line">saver = tf.train.Saver(trainable)</span><br><span class="line">saver.restore(sess, <span class="string">'./logdir/model.ckpt'</span>)</span><br><span class="line">DNN_saver = tf.train.Saver(trainable_DNN)</span><br><span class="line">DNN_saver .restore(sess, <span class="string">'./logdir/DNN_part/Unit2Vec.ckpt'</span>)</span><br><span class="line">WaveNet_saver = tf.train.Saver(trainable_WaveNet)</span><br><span class="line">WaveNet_saver.restore(sess, <span class="string">'./logdir/WaveNet_part/Unit2Vec.ckpt'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#part 1-&gt;3-&gt;2-&gt;3-&gt;2-&gt;3...</span></span><br><span class="line"><span class="keyword">if</span> step &lt; <span class="number">10</span>: <span class="comment">#turn round every 10 steps  #part 1</span></span><br><span class="line">    summary, loss_value, acc_value, _ = sess.run([summaries, loss, acc, optim])</span><br><span class="line"><span class="keyword">elif</span> int(step/<span class="number">10</span>) % <span class="number">2</span> == <span class="number">0</span>:               <span class="comment">#part 2</span></span><br><span class="line">    summary, loss_value, acc_value, _ = sess.run([summaries, loss, acc, optim_WaveNet])</span><br><span class="line"><span class="keyword">elif</span> int(step/<span class="number">10</span>) % <span class="number">2</span> == <span class="number">1</span>:               <span class="comment">#part 3</span></span><br><span class="line">    summary, loss_value, acc_value, _ = sess.run([summaries, loss, acc, optim_DNN])</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">raise</span> ValueError(x)</span><br></pre></td></tr></table></figure>
<h1 id="æ•°æ®æ“ä½œ"><a href="#æ•°æ®æ“ä½œ" class="headerlink" title="æ•°æ®æ“ä½œ"></a>æ•°æ®æ“ä½œ</h1><h2 id="Boardcastingæœºåˆ¶"><a href="#Boardcastingæœºåˆ¶" class="headerlink" title="Boardcastingæœºåˆ¶"></a>Boardcastingæœºåˆ¶</h2><p>å¯ä»¥çœ‹åˆ°bçš„ç»´åº¦ç«Ÿç„¶å’Œaçš„æœ€åä¸€ç»´ä¸€è‡´ï¼Œä½¿ç”¨äº†boardcasting</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line">a=tf.constant(<span class="number">1</span>,shape=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>])</span><br><span class="line">b=tf.constant(range(<span class="number">5</span>))</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    tf.global_variables_initializer().run()</span><br><span class="line">    <span class="keyword">print</span> sess.run(a+b)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>[[[1 2 3 4 5]<br>    [1 2 3 4 5]<br>    [1 2 3 4 5]]<br>   [[1 2 3 4 5]<br>    [1 2 3 4 5]<br>    [1 2 3 4 5]]]</p>
</blockquote>
<h2 id="tf-one-hot"><a href="#tf-one-hot" class="headerlink" title="tf.one_hot()"></a>tf.one_hot()</h2><p><code>tf.one_hot([[0,1],[2,3]],depth=5)</code>å¾—åˆ°çš„æ•°æ®ç»´åº¦æ˜¯(2,2,5)<br><code>tf.one_hot([[[0,1],[2,3]],[[0,1],[2,3]]],depth=5)</code>å¾—åˆ°çš„æ•°æ®ç»´åº¦æ˜¯(2,2,2,5)</p>
<h2 id="tf-uniqueå’Œtf-unique-with-countså‡½æ•°"><a href="#tf-uniqueå’Œtf-unique-with-countså‡½æ•°" class="headerlink" title="tf.uniqueå’Œtf.unique_with_countså‡½æ•°"></a>tf.uniqueå’Œtf.unique_with_countså‡½æ•°</h2><p>ç±»ä¼¼äºmmaçš„<code>{1, 1, 1, 1, 5, 5, 3, 3, 3, 2, 2, 2, 2, 4} // Counts</code>åŠŸèƒ½<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">Y1 = tf.constant([<span class="number">5</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">3</span>])</span><br><span class="line">Y2 = tf.unique(Y1)</span><br><span class="line">Y3 = tf.unique_with_counts(Y1) <span class="comment">#Can Count value</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    [Y2,Y3] = sess.run([Y2,Y3])</span><br><span class="line">    <span class="keyword">print</span> Y2</span><br><span class="line">    <span class="comment"># Unique(y=array([5, 1, 2, 4, 3], dtype=int32),idx=array([0, 0, 1, 2, 2, 3, 3, 3, 4, 4], dtype=int32))</span></span><br><span class="line">    <span class="keyword">print</span> Y3</span><br><span class="line">    <span class="comment"># UniqueWithCounts(y=array([5, 1, 2, 4, 3], dtype=int32), idx=array([0, 0, 1, 2, 2, 3, 3, 3, 4, 4], dtype=int32), count=array([2, 1, 2, 3, 2], dtype=int32))</span></span><br></pre></td></tr></table></figure></p>
<h2 id="å®ç°å·¦ç§»ä¸€ä¸ªæ•°ï¼Œæœ€å³è¡¥é›¶"><a href="#å®ç°å·¦ç§»ä¸€ä¸ªæ•°ï¼Œæœ€å³è¡¥é›¶" class="headerlink" title="å®ç°å·¦ç§»ä¸€ä¸ªæ•°ï¼Œæœ€å³è¡¥é›¶"></a>å®ç°å·¦ç§»ä¸€ä¸ªæ•°ï¼Œæœ€å³è¡¥é›¶</h2><p>å°†<code>[[0],[1],[2],[3]]</code>-&gt;<code>[[1],[2],[3],[0]]</code><br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">encoded = tf.reshape(tf.constant(range(<span class="number">4</span>)),[<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>])</span><br><span class="line">shifted = tf.slice(encoded, [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],[<span class="number">-1</span>, tf.shape(encoded)[<span class="number">1</span>] - <span class="number">1</span>, <span class="number">-1</span>])</span><br><span class="line">shifted = tf.pad(shifted, [[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">0</span>]])</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="keyword">print</span> sess.run([encoded,shifted])</span><br></pre></td></tr></table></figure></p>
<h2 id="å„ç§losså‡½æ•°"><a href="#å„ç§losså‡½æ•°" class="headerlink" title="å„ç§losså‡½æ•°"></a>å„ç§losså‡½æ•°</h2><h3 id="tf-losses-mean-squared-errorç†è§£"><a href="#tf-losses-mean-squared-errorç†è§£" class="headerlink" title="tf.losses.mean_squared_errorç†è§£"></a>tf.losses.mean_squared_errorç†è§£</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">shape_obj = (<span class="number">5</span>,<span class="number">6</span>,<span class="number">3</span>)</span><br><span class="line">Y1 = tf.random_normal(shape=shape_obj)</span><br><span class="line">Y2 = tf.random_normal(shape=shape_obj)</span><br><span class="line"></span><br><span class="line">loss1 = tf.reduce_sum(tf.pow(Y1 - Y2, <span class="number">2</span>)) / (reduce(<span class="keyword">lambda</span> x, y: x*y, shape_obj))</span><br><span class="line">loss2 = tf.reduce_mean(tf.squared_difference(Y1, Y2))</span><br><span class="line">loss3 = tf.losses.mean_squared_error(predictions=Y1, labels=Y2)</span><br><span class="line">loss4 = tf.nn.l2_loss(Y1 - Y2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment">#ä¸éœ€è¦åˆå§‹åŒ–</span></span><br><span class="line">    lis = sess.run([Y1, Y2, loss1, loss2, loss3, loss4])</span><br><span class="line">    Y1, Y2 = lis[:<span class="number">2</span>] <span class="comment">#Y1, Y2</span></span><br><span class="line">    <span class="keyword">print</span> lis[<span class="number">2</span>:]  <span class="comment">#loss1, loss2, loss3, loss4</span></span><br><span class="line">    lis=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(shape_obj[<span class="number">-1</span>]):</span><br><span class="line">        lis.append(np.mean(np.square((Y1[:,:,i]-Y2[:,:,i]))))</span><br><span class="line">    <span class="keyword">print</span> np.mean(lis)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>[2.0185342, 2.0185342, 2.0185342, 90.83404]<br>2.018534</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°tfæŠŠæœ€åä¸€ç»´ï¼ˆshape_obj æ˜¯äºŒç»´ä¹Ÿæ˜¯ä¸€æ ·ï¼‰å½“åšbatch_axisï¼Œè€Œä¸”lossæ²¡æœ‰é™¤ä»¥2<br>åœ¨Gluoné‡Œå°±ç›¸å½“äºï¼š<code>loss1=gluon.loss.L2Loss(batch_axis=-1)*2</code><br>è¿˜å‘ç°ä¸€ä¸ªé—®é¢˜å°±æ˜¯<code>sess.run(æƒ³è¦çš„å¿…é¡»å†™åœ¨ä¸€èµ·)</code>ï¼Œå¦‚æœ<code>sess.run(loss1);sess.run(loss1)</code>ç»“æœä¹Ÿä¼šä¸ä¸€æ ·ï¼Œå› ä¸ºæ¯è¿è¡Œä¸€æ¬¡runè®¡ç®—å›¾å°±è¿è¡Œä¸€æ¬¡ï¼Œå› ä¸ºæ¯æ¬¡è¿è¡Œçš„éšæœºæ•°ä¸ä¸€æ ·ï¼Œç»“æœè‡ªç„¶ä¹Ÿä¸ä¸€æ ·</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"><span class="keyword">from</span> mxnet <span class="keyword">import</span> gluon</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment">#Indicate 2-th dims as batch_axis</span></span><br><span class="line">loss1=gluon.loss.L2Loss(batch_axis=<span class="number">1</span>)</span><br><span class="line">a=mx.nd.random.uniform(<span class="number">0</span>, <span class="number">10</span>,shape=(<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>))</span><br><span class="line">b=mx.nd.random.uniform(<span class="number">0</span>, <span class="number">10</span>,shape=(<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> loss1(a,b)</span><br><span class="line"><span class="comment">#[  4.95132017  11.42089748   7.28211212   6.8867259    6.93179274]</span></span><br><span class="line"><span class="comment">#&lt;NDArray 5 @cpu(0)&gt;</span></span><br><span class="line">lis=[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">    lis.append(<span class="number">1.</span>/<span class="number">2</span>*np.mean(np.square((a[:,i,:]-b[:,i,:]).asnumpy())))</span><br><span class="line"><span class="keyword">print</span> lis</span><br><span class="line"><span class="comment">#[4.9513201713562012, 11.420897483825684, 7.282111644744873, 6.886725902557373, 6.9317927360534668]</span></span><br></pre></td></tr></table></figure>
<h3 id="tf-losses-sparse-softmax-cross-entropyç†è§£"><a href="#tf-losses-sparse-softmax-cross-entropyç†è§£" class="headerlink" title="tf.losses.sparse_softmax_cross_entropyç†è§£"></a>tf.losses.sparse_softmax_cross_entropyç†è§£</h3><p>sparse_softmax_cross_entropyè¦æ±‚labelsæ˜¯ä¸€ä¸ªæ•´æ•°åˆ—è¡¨å½¢å¼ï¼ŒèŒƒå›´æ˜¯[0, num_classes], logitsæ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°æ®ï¼Œå­˜å‚¨çš„æ˜¯ç½‘ç»œè¾“å‡ºçš„å€¼</p>
<p>MXNetå’Œtfç»“æœä¸€æ ·ï¼Œè¯´æ˜åœ¨äºŒç»´æ•°æ®çš„æ—¶å€™ï¼Œéƒ½æ˜¯å°†ç¬¬ä¸€ç»´ä½œä¸ºbatch_axis,ç±»åˆ«æ€»æ•°å¯ä»¥ä»<code>Y1.shape[1]</code>çŸ¥é“<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">Y1 = tf.constant(np.arange(<span class="number">50</span>).reshape((<span class="number">5</span>,<span class="number">10</span>)),dtype=tf.float32)</span><br><span class="line">Y2 = tf.constant([<span class="number">5</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">1</span>])</span><br><span class="line">Y3 = tf.one_hot(Y2, depth = Y1.shape[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">loss1 = tf.losses.sparse_softmax_cross_entropy(logits=Y1, labels=Y2)</span><br><span class="line">loss2 = tf.losses.softmax_cross_entropy(logits=Y1, onehot_labels=Y3)</span><br><span class="line">loss3 = tf.nn.softmax_cross_entropy_with_logits(logits=Y1, labels=Y3)</span><br><span class="line">loss4 = tf.reduce_mean(loss3)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    [loss1,loss2,loss3,loss4] = sess.run([loss1,loss2,loss3,loss4])</span><br><span class="line">    <span class="keyword">print</span> loss1,loss2    <span class="comment">#5.4586296, 5.4586296</span></span><br><span class="line">    <span class="keyword">print</span> loss3.shape    <span class="comment">#(5,)</span></span><br><span class="line">    <span class="keyword">print</span> np.mean(loss3) <span class="comment">#5.4586296</span></span><br><span class="line">    <span class="keyword">print</span> loss4          <span class="comment">#5.4586296</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><br>ç”¨MXNetæ¥éªŒè¯<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">loss=mx.gluon.loss.SoftmaxCrossEntropyLoss()</span><br><span class="line">a=mx.nd.array(np.arange(<span class="number">50</span>).reshape((<span class="number">5</span>,<span class="number">10</span>)))</span><br><span class="line">b=mx.nd.array([<span class="number">5</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">1</span>])</span><br><span class="line"><span class="keyword">print</span> loss(a,b)</span><br><span class="line"><span class="keyword">print</span> mx.nd.mean(loss(a,b))<span class="comment">#5.45862961</span></span><br></pre></td></tr></table></figure></p>
<h2 id="å›¾åƒå¤„ç†"><a href="#å›¾åƒå¤„ç†" class="headerlink" title="å›¾åƒå¤„ç†"></a>å›¾åƒå¤„ç†</h2><h3 id="å®Œæ•´èŒƒä¾‹"><a href="#å®Œæ•´èŒƒä¾‹" class="headerlink" title="å®Œæ•´èŒƒä¾‹"></a>å®Œæ•´èŒƒä¾‹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line">img = Image.open(<span class="string">"1620.jpg"</span>)</span><br><span class="line">img.show()</span><br><span class="line">w, h = img.size</span><br><span class="line">img = np.expand_dims(img, <span class="number">0</span>)</span><br><span class="line">bi_image_bilinear = tf.image.resize_bilinear(img, size=(int(h*<span class="number">3</span>), int(w*<span class="number">3</span>)))</span><br><span class="line"></span><br><span class="line">bi_image_bilinear = tf.squeeze(bi_image_bilinear)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    bi_result = sess.run(bi_image_bilinear)</span><br><span class="line">Image.fromarray(np.uint8(bi_result)).show()</span><br></pre></td></tr></table></figure>
<h3 id="tf-image-resize"><a href="#tf-image-resize" class="headerlink" title="tf.image.resize*"></a>tf.image.resize*</h3><p>tf.image.resize_nearest_neighbor  [0  1  2] -&gt; [0  0  1  1  2  2]<br>tf.image.resize_bilinear  [0  1  2] -&gt; [0  0.5 1  1.5 2  2 ]<br>tf.image.resize_bicubic  [0  0.40625 1  1.59375 2  2.09375]<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">img = np.arange(<span class="number">3</span>).reshape((<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>))</span><br><span class="line">bi_image_bilinear = tf.image.resize_bilinear(img, size=(<span class="number">1</span>,<span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">bi_image_bilinear = tf.squeeze(bi_image_bilinear)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="keyword">print</span> sess.run(bi_image_bilinear)</span><br></pre></td></tr></table></figure></p>
<h2 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h2><p>tf.map_fn ç±»ä¼¼äºmapå‡½æ•°ï¼Œä¸€ä¸ªè¿­ä»£å™¨ï¼Œå°†å‡½æ•°ä½œç”¨äºæŒ‡å®šå˜é‡ä¸Š<br>è¿™æ˜¯ä¾‹å­1ï¼š<br>å› ä¸ºelemsæ˜¯(a,b)ï¼Œlambdaçš„å˜é‡å¿…é¡»ä¸å…¶ä¿æŒä¸€è‡´ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯tupleçš„ã€‚å› ä¸ºa,båˆ†åˆ«æ˜¯int32å’Œfloat32ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯int32å’Œfloat32çš„tupleï¼Œä¸elmsä¸€è‡´ï¼Œæ‰€ä»¥dtypeå¯ä»¥çœç•¥ã€‚<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mean</span><span class="params">(lis,num)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (tf.reduce_mean(lis[:num]), num)</span><br><span class="line"></span><br><span class="line">a = tf.constant(np.arange(<span class="number">30</span>).reshape((<span class="number">3</span>,<span class="number">10</span>)), dtype=<span class="string">'float32'</span>)</span><br><span class="line">b = tf.constant([<span class="number">3</span>,<span class="number">6</span>,<span class="number">2</span>],dtype=<span class="string">'int32'</span>)</span><br><span class="line">c = tf.map_fn(fn=<span class="keyword">lambda</span> (i,j):mean(i,j), elems=(a,b))</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="keyword">print</span> sess.run(c)</span><br></pre></td></tr></table></figure></p>
<p>ä¾‹å­2ï¼šæ­¤æ—¶è¿”å›å€¼ä¸elmsç»“æ„ä¸ä¸€æ ·ï¼Œéœ€è¦æ˜ç¡®æŒ‡æ˜è¿”å›å€¼ç±»å‹<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mean</span><span class="params">(lis,num)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> tf.reduce_mean(lis[:num])</span><br><span class="line"></span><br><span class="line">a = tf.constant(np.arange(<span class="number">30</span>).reshape((<span class="number">3</span>,<span class="number">10</span>)), dtype=<span class="string">'float32'</span>)</span><br><span class="line">b = tf.constant([<span class="number">3</span>,<span class="number">6</span>,<span class="number">2</span>],dtype=<span class="string">'int32'</span>)</span><br><span class="line">c = tf.map_fn(fn=<span class="keyword">lambda</span> (i,j):mean(i,j), elems=(a,b), dtype=<span class="string">'float32'</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="keyword">print</span> sess.run(c)</span><br></pre></td></tr></table></figure></p>
<h1 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h1><h2 id="tf-conv1D"><a href="#tf-conv1D" class="headerlink" title="tf.conv1D"></a>tf.conv1D</h2><p>è¾“å…¥çš„shapeæ˜¯ï¼ˆbatch_size, width1, in_channelï¼‰<br>å·ç§¯æ ¸çš„shapeæ˜¯ ï¼ˆfilter_width, in_channel, out_channelï¼‰<br>è¾“å‡ºæ˜¯ï¼ˆbatch_size, width2, out_channelï¼‰<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = tf.Variable(np.arange(<span class="number">320</span>).reshape(<span class="number">8</span>,<span class="number">10</span>,<span class="number">4</span>).astype(np.float32))</span><br><span class="line">k = tf.Variable(tf.contrib.layers.xavier_initializer_conv2d()(shape=[<span class="number">5</span>,<span class="number">4</span>,<span class="number">16</span>]))</span><br><span class="line">conv = tf.nn.conv1d(x, k, stride=<span class="number">1</span>, padding=<span class="string">'VALID'</span>, data_format=<span class="string">'NWC'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.run(tf.global_variables_initializer())</span><br><span class="line">    [a, b] = sess.run([x, conv])</span><br><span class="line">    <span class="keyword">print</span> a.shape, b.shape</span><br><span class="line">    <span class="comment">#(8, 10, 4) -&gt; (8, 6, 16)</span></span><br></pre></td></tr></table></figure></p>
<h1 id="é˜Ÿåˆ—æœºåˆ¶"><a href="#é˜Ÿåˆ—æœºåˆ¶" class="headerlink" title="é˜Ÿåˆ—æœºåˆ¶"></a>é˜Ÿåˆ—æœºåˆ¶</h1><p>å…¥é˜Ÿçš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œenqueueå’Œenqueue_manyã€‚ä¸€èˆ¬é‡‡å–ç¬¬ä¸€ç§<br>å‡ºé˜Ÿçš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œdequeueå’Œdequeue_manyã€‚ä¸€èˆ¬é‡‡å–ç¬¬äºŒç§ï¼Œè¿™ç›¸å½“äºdequeueå‡ºæ¥çš„æ•°æ®æ˜¯ä¸€ä¸ªbatch</p>
<h2 id="RandomShuffleQueue"><a href="#RandomShuffleQueue" class="headerlink" title="RandomShuffleQueue"></a>RandomShuffleQueue</h2><p>åˆ›å»ºä¸€ä¸ªéšæœºé˜Ÿåˆ—ï¼Œè¡¨ç¤ºå‡ºé˜Ÿçš„æ˜¯éšæœºçš„ï¼Œä½†æ˜¯å½“ä½¿ç”¨RandomShuffleQueueæ—¶å¦‚æœshapeä¸æ˜ç¡®æŒ‡å®šå…·ä½“å¤§å°ï¼Œdequeue_manyæ˜¯ç¦ç”¨çš„ã€‚</p>
<h3 id="enqueue"><a href="#enqueue" class="headerlink" title="enqueue"></a>enqueue</h3><p>è¿™é‡Œé¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª10ä¸ªç®±å­ï¼ˆæ¯ä¸ªç®±å­å¯ä»¥æ”¾ä¸¤ä¸ªç‰©å“ï¼Œç¬¬ä¸€ç§ç‰©å“æ˜¯<code>5*2</code>çš„çŸ©é˜µï¼Œç¬¬äºŒç§æ˜¯<code>5*3</code>çš„çŸ©é˜µï¼‰çš„é˜Ÿåˆ—ï¼Œè¦æ±‚min_after_dequeueä¸º7ä¸ªç®±å­ï¼Œä¹Ÿå°±æ˜¯æœ€å¤šåªå¯ä»¥dequeå‡ºä¸‰ä¸ªç®±å­ã€‚å¾ªç¯ä¸­å…¥é˜Ÿäº†åæ¬¡ï¼Œä½¿å¾—é˜Ÿåˆ—ä¸ºæ»¡ç®±çŠ¶æ€ï¼Œæ‰€ä»¥dequeue_many(3)åˆšå¥½ä¸é˜»å¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">input_queue = tf.RandomShuffleQueue(capacity=<span class="number">10</span>, min_after_dequeue=<span class="number">7</span>, </span><br><span class="line">                                dtypes=[tf.int32, tf.int32], shapes=[(<span class="number">5</span>,<span class="number">2</span>),(<span class="number">5</span>,<span class="number">3</span>)])</span><br><span class="line"></span><br><span class="line">placeholder1 = tf.placeholder(dtype=tf.int32, shape=[<span class="number">5</span>,<span class="number">2</span>])</span><br><span class="line">placeholder2 = tf.placeholder(dtype=tf.int32, shape=[<span class="number">5</span>,<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">enqueue_op = input_queue.enqueue([placeholder1, placeholder2])</span><br><span class="line">dequeue = input_queue.dequeue_many(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment">#filled the queue</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        data1 = np.arange(i,i+<span class="number">10</span>).reshape(<span class="number">-1</span>,<span class="number">2</span>)</span><br><span class="line">        data2 = np.arange(i,i+<span class="number">15</span>).reshape(<span class="number">-1</span>,<span class="number">3</span>)</span><br><span class="line">        sess.run(enqueue_op,feed_dict=&#123;placeholder1:data1, </span><br><span class="line">                                       placeholder2:data2&#125;)</span><br><span class="line">    <span class="keyword">print</span> sess.run(dequeue)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>[array([[[ 3,  4], [ 5,  6],[ 7,  8], [ 9, 10], [11, 12]],<br>         [[ 9, 10],[11, 12],[13, 14], [15, 16], [17, 18]],<br>         [[ 5,  6],[ 7,  8], [ 9, 10], [11, 12], [13, 14]]], dtype=int32),<br> array([[[ 3,  4,  5],[ 6,  7,  8],[ 9, 10, 11],[12, 13, 14],[15, 16, 17]],<br>          [[ 9, 10, 11],[12, 13, 14],[15, 16, 17],[18, 19, 20],[21, 22, 23]],<br>         [[ 5,  6,  7],[ 8,  9, 10],[11, 12, 13],[14, 15, 16],[17, 18, 19]]], dtype=int32)]</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°è¿”å›ä¸¤ç§ç®±å­ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå°†è¿™ä¸ªè¿”å›å€¼èµ‹å€¼ç»™tuples,æ¯”å¦‚æŠŠä»£ç æœ€åä¸€å¥æ”¹ä¸º<code>(col2,col3) = sess.run(dequeue)</code>ã€‚è¿™æ ·col2å’Œcol3å°±å¯ä»¥ä½œä¸ºæ•°æ®ä¾›ç»™ç½‘ç»œä½¿ç”¨</p>
<h3 id="enqueue-many"><a href="#enqueue-many" class="headerlink" title="enqueue_many"></a>enqueue_many</h3><p>è¿™é‡Œé¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª10ä¸ªç®±å­ï¼ˆæ¯ä¸ªç®±å­æ”¾ä¸¤ç§ç‰©å“ï¼Œç¬¬ä¸€ä¸ªç‰©å“æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º2çš„æ•°ç»„ï¼Œç¬¬äºŒä¸ªç‰©å“æ˜¯é•¿åº¦ä¸º3çš„æ•°ç»„ï¼‰çš„éšæœºé˜Ÿåˆ—ã€‚ä½¿ç”¨enqueue_manyç›¸å½“äºä¸€æ¬¡æ€§å¡«å……å¤šä¸ªç®±å­ã€‚ç°åœ¨ä¸€æ¬¡æ€§å¡«å……10ä¸ªç®±å­è®©é˜Ÿåˆ—æ»¡ç®±ï¼Œå› ä¸ºmin_after_dequeueæ˜¯7æ‰€ä»¥æœ€å¤šåªèƒ½å¼¹å‡º3ä¸ªç®±å­,å¦åˆ™é˜»å¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">input_queue = tf.RandomShuffleQueue(capacity=<span class="number">10</span>, min_after_dequeue=<span class="number">7</span>, </span><br><span class="line">                          dtypes=[tf.int32, tf.int32], shapes=[(<span class="number">2</span>,),(<span class="number">3</span>,)])</span><br><span class="line"></span><br><span class="line">placeholder1 = tf.placeholder(dtype=tf.int32, shape=[<span class="number">10</span>,<span class="number">2</span>])</span><br><span class="line">placeholder2 = tf.placeholder(dtype=tf.int32, shape=[<span class="number">10</span>,<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">enqueue_op = input_queue.enqueue_many([placeholder1, placeholder2])</span><br><span class="line">dequeue = input_queue.dequeue_many(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment">#filled the queue</span></span><br><span class="line">    data1 = np.arange(<span class="number">20</span>).reshape(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">    data2 = np.arange(<span class="number">30</span>).reshape(<span class="number">10</span>,<span class="number">3</span>)</span><br><span class="line">    sess.run(enqueue_op,feed_dict=&#123;placeholder1:data1, </span><br><span class="line">                                   placeholder2:data2&#125;)</span><br><span class="line">    <span class="keyword">print</span> sess.run(dequeue)</span><br></pre></td></tr></table></figure>
<h2 id="PaddingFIFOQueue"><a href="#PaddingFIFOQueue" class="headerlink" title="PaddingFIFOQueue"></a>PaddingFIFOQueue</h2><p>æ”¯æŒå˜åŒ–çš„shapeï¼ŒåŒæ—¶æ”¯æŒdequeue_many!<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">input_queue = tf.PaddingFIFOQueue(capacity=<span class="number">10</span>,</span><br><span class="line">                                  dtypes=[tf.int32, tf.int32], shapes=[(<span class="literal">None</span>,<span class="number">2</span>),(<span class="literal">None</span>,<span class="number">3</span>)])</span><br><span class="line"></span><br><span class="line">placeholder1 = tf.placeholder(dtype=tf.int32, shape=[<span class="literal">None</span>,<span class="number">2</span>])</span><br><span class="line">placeholder2 = tf.placeholder(dtype=tf.int32, shape=[<span class="literal">None</span>,<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">enqueue_op = input_queue.enqueue([placeholder1, placeholder2])</span><br><span class="line">dequeue = input_queue.dequeue_many(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment">#filled the queue</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        data1 = np.arange(<span class="number">2</span>*(i+<span class="number">1</span>)).reshape(<span class="number">-1</span>,<span class="number">2</span>)+i</span><br><span class="line">        data2 = np.arange(<span class="number">3</span>*(i+<span class="number">1</span>)).reshape(<span class="number">-1</span>,<span class="number">3</span>)+i</span><br><span class="line">        sess.run(enqueue_op,feed_dict=&#123;placeholder1:data1, </span><br><span class="line">                                       placeholder2:data2&#125;)</span><br><span class="line">    <span class="keyword">print</span> sess.run(dequeue)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>[array([[[0, 1],[0, 0],[0, 0]],<br>        [[1, 2],[3, 4],[0, 0]],<br>        [[2, 3],[4, 5],[6, 7]]], dtype=int32),<br> array([[[ 0,  1,  2],[ 0,  0,  0],[ 0,  0,  0]],<br>          [[ 1,  2,  3],[ 4,  5,  6],[ 0,  0,  0]],<br>          [[ 2,  3,  4],[ 5,  6,  7],[ 8,  9, 10]]], dtype=int32)]</p>
</blockquote>
<p>å‘ç°äº†ä»€ä¹ˆå§ï¼Œå°±æ˜¯å®ƒè¡¥é›¶äº†ã€‚å°å°è¯´äº›é¢˜å¤–è¯ï¼Œä½ è§è¿‡<code>np.array([[1],[1,2],[1,2,3]])</code>çš„è¿”å›å€¼å—ï¼Ÿæ²¡å§ï¼Œæ˜¯Objectè€Œä¸æ˜¯int64ã€‚å› ä¸ºnumpyä¸æ”¯æŒï¼Œä½†æ˜¯pythonæœ¬èº«æ”¯æŒ<code>[[1],[1,2],[1,2,3]]</code>ã€‚è¿™å°±ä¸å¦‚Mathematicaäº†,è¡¨æ‰¬ä¸€ä¸‹é¡ºä¾¿æ¨èè¿™ä¸ªè¯­è¨€ï¼</p>
<p>å¦‚æœæ”¹æˆ<code>dequeue = input_queue.dequeue_many(1)</code>ï¼Œä¸€æ¬¡åªå‡ºä¸€ä¸ªç®±å­é‚£ä¹ˆå°±ä¸ä¼šå‡ºç°è¡¥é›¶æƒ…å†µäº†ã€‚æ‰€ä»¥è¡¥é›¶å‘ç”Ÿåœ¨<code>sess.run(dequeue)</code>çš„æ—¶å€™</p>
<p>ç”šè‡³å®ƒè¿˜æ”¯æŒshapeå®Œå…¨ä¸å®šçš„æƒ…å†µ<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">input_queue = tf.PaddingFIFOQueue(capacity=<span class="number">10</span>,dtypes=[tf.int32],</span><br><span class="line">                                  shapes=[(<span class="literal">None</span>,<span class="literal">None</span>)])</span><br><span class="line"></span><br><span class="line">placeholder = tf.placeholder(dtype=tf.int32, shape=[<span class="literal">None</span>,<span class="literal">None</span>])</span><br><span class="line"></span><br><span class="line">enqueue_op = input_queue.enqueue([placeholder])</span><br><span class="line">dequeue = input_queue.dequeue_many(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment">#filled the queue</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        data = np.arange((i+<span class="number">1</span>)**<span class="number">2</span>).reshape(i+<span class="number">1</span>,i+<span class="number">1</span>)+i</span><br><span class="line">        sess.run(enqueue_op,feed_dict=&#123;placeholder:data&#125;)</span><br><span class="line">    <span class="keyword">print</span> sess.run(dequeue)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>[[[ 0  0  0] [ 0  0  0] [ 0  0  0]]<br>  [[ 1  2  0] [ 3  4  0] [ 0  0  0]]<br>  [[ 2  3  4] [ 5  6  7] [ 8  9 10]]]</p>
</blockquote>
<h1 id="Tensorflowä¸å…¶ä»–æ¡†æ¶è”åŠ¨"><a href="#Tensorflowä¸å…¶ä»–æ¡†æ¶è”åŠ¨" class="headerlink" title="Tensorflowä¸å…¶ä»–æ¡†æ¶è”åŠ¨"></a>Tensorflowä¸å…¶ä»–æ¡†æ¶è”åŠ¨</h1><h2 id="Kerasä¸Tensorflowè”åŠ¨"><a href="#Kerasä¸Tensorflowè”åŠ¨" class="headerlink" title="Kerasä¸Tensorflowè”åŠ¨"></a>Kerasä¸Tensorflowè”åŠ¨</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line"></span><br><span class="line">mnist_data = input_data.read_data_sets(<span class="string">'MNIST_data/'</span>, one_hot=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Building model</span></span><br><span class="line">img = tf.placeholder(tf.float32, shape=(<span class="literal">None</span>, <span class="number">784</span>))</span><br><span class="line">labels = tf.placeholder(tf.float32, shape=(<span class="literal">None</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">x = tf.keras.layers.Dense(<span class="number">128</span>, activation=<span class="string">'relu'</span>)(img)</span><br><span class="line">x = tf.keras.layers.Dense(<span class="number">128</span>, activation=<span class="string">'relu'</span>)(x)</span><br><span class="line">prediction = tf.keras.layers.Dense(<span class="number">10</span>)(x)</span><br><span class="line"></span><br><span class="line">loss = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits(logits=prediction, labels=labels))</span><br><span class="line">train_optim = tf.train.AdamOptimizer().minimize(loss)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Print model name and shape</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> tf.trainable_variables():</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'&#123;&#125;\t&#123;&#125;\t&#123;&#125;'</span>.format(i.name,i.shape,i.dtype)</span><br><span class="line"><span class="comment">#dense/kernel:0 (784, 128)  &lt;dtype: 'float32_ref'&gt;</span></span><br><span class="line"><span class="comment">#dense/bias:0   (128,)  &lt;dtype: 'float32_ref'&gt;</span></span><br><span class="line"><span class="comment">#dense_1/kernel:0   (128, 128)  &lt;dtype: 'float32_ref'&gt;</span></span><br><span class="line"><span class="comment">#dense_1/bias:0 (128,)  &lt;dtype: 'float32_ref'&gt;</span></span><br><span class="line"><span class="comment">#dense_2/kernel:0   (128, 10)   &lt;dtype: 'float32_ref'&gt;</span></span><br><span class="line"><span class="comment">#dense_2/bias:0 (10,)   &lt;dtype: 'float32_ref'&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Train model</span></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    init = tf.global_variables_initializer()</span><br><span class="line">    sess.run(init)</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">1000</span>):</span><br><span class="line">        batch_x, batch_y = mnist_data.train.next_batch(<span class="number">50</span>)</span><br><span class="line">        sess.run(train_optim, feed_dict=&#123;img: batch_x, labels: batch_y&#125;)</span><br><span class="line">        acc_pred = tf.keras.metrics.categorical_accuracy(labels, prediction)</span><br><span class="line">        pred = sess.run(acc_pred, feed_dict=&#123;labels: mnist_data.test.labels, img: mnist_data.test.images&#125;)</span><br><span class="line">        print(<span class="string">'accuracy: %.3f'</span> % (sum(pred)/len(mnist_data.test.labels)))</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Tensorflow</tag>
      </tags>
  </entry>
  <entry>
    <title>å­¦ä¹ D3.jså¯è§†åŒ–</title>
    <url>/2018/08/03/%E5%AD%A6%E4%B9%A0D3-js%E5%8F%AF%E8%A7%86%E5%8C%96/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<p>ä¹‹å‰D3.jsæ‰€å­¦çŸ¥è¯†å¯ä»¥ä»æˆ‘çš„åšå®¢çš„<a href="https://xiaozhah.github.io/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/" target="_blank" rel="noopener">é€æ¸å®Œå–„èšç±»æ•ˆæœçš„å¯è§†åŒ–</a>ä¸­æ‰¾åˆ°<br>å› æ­¤åŸºç¡€çš„ä¸€äº›ä¸åœ¨æ­¤æ•™ç¨‹ä¸­äº†ï¼Œä»¥ä¸‹çš„ä¸€äº›å°†å‚è€ƒä¹¦æœ¬ä»¥åŠç½‘ç«™</p>
<h1 id="æ•°æ®å¯è§†åŒ–-ä½¿ç”¨D3è®¾è®¡äº¤äº’å¼å›¾è¡¨"><a href="#æ•°æ®å¯è§†åŒ–-ä½¿ç”¨D3è®¾è®¡äº¤äº’å¼å›¾è¡¨" class="headerlink" title="æ•°æ®å¯è§†åŒ–-ä½¿ç”¨D3è®¾è®¡äº¤äº’å¼å›¾è¡¨"></a>æ•°æ®å¯è§†åŒ–-ä½¿ç”¨D3è®¾è®¡äº¤äº’å¼å›¾è¡¨</h1><p>D3ç‰ˆæœ¬4.5.0ã€‚ç›®å‰æ˜¯5.5.0ï¼Œåœ¨è¿™é‡Œæš‚æ—¶ä¸è€ƒè™‘å‘é«˜ç‰ˆæœ¬å‡çº§</p>
<p>ä¹¦æœ¬é‡‡ç”¨äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾çš„ã€Šæ•°æ®å¯è§†åŒ–-ä½¿ç”¨D3è®¾è®¡äº¤äº’å¼å›¾è¡¨ã€‹ï¼ˆä½œè€…Scott Murrayï¼‰ï¼Œæˆ‘çš„D3å…¥é—¨ä¹¦ä¹Ÿæ˜¯JavaScriptçš„å…¥é—¨æ•™æã€‚</p>
<a id="more"></a>
<h2 id="ç¬¬äº”ç« -è¯»å–æ•°æ®"><a href="#ç¬¬äº”ç« -è¯»å–æ•°æ®" class="headerlink" title="ç¬¬äº”ç«  è¯»å–æ•°æ®"></a>ç¬¬äº”ç«  è¯»å–æ•°æ®</h2><p>rowConverterä½œä¸ºä¸€ä¸ªæ–°å‚æ•°ï¼Œå¯ä»¥è¿›è¡Œé€è¡Œçš„æ•°æ®é¢„å¤„ç† </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rowConverter = <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        Food: d.Food, <span class="comment">//No conversion</span></span><br><span class="line">        Deliciousness: <span class="built_in">parseFloat</span>(d.Deliciousness)</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;</span><br><span class="line">d3.csv(<span class="string">"food.csv"</span>, rowConverter, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123; <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬å…«ç« -æ•°è½´"><a href="#ç¬¬å…«ç« -æ•°è½´" class="headerlink" title="ç¬¬å…«ç«  æ•°è½´"></a>ç¬¬å…«ç«  æ•°è½´</h2><h3 id="ç¬¬ä¸€ç‰ˆå†…å®¹"><a href="#ç¬¬ä¸€ç‰ˆå†…å®¹" class="headerlink" title="ç¬¬ä¸€ç‰ˆå†…å®¹"></a>ç¬¬ä¸€ç‰ˆå†…å®¹</h3><p>é¦–å…ˆå»ºç«‹äº†ä¸¤ä¸ªæ¯”ä¾‹å°ºï¼Œåˆæ ¹æ®æ•°æ®èŒƒå›´å»ºç«‹ç›¸åº”çš„åæ ‡è½´ï¼ˆticksæ˜¯5ï¼Œä½†æ˜¯D3ä¼šä¸ºäº†ç¾è§‚è€Œåœ¨5é™„è¿‘å–å€¼ï¼ŒtickFormatç”¨äºæ ¼å¼åŒ–åæ ‡è½´æ ‡ç­¾å°ºåº¦çš„æ•°æ®æ ¼å¼ï¼Œè¿™é‡Œæ˜¯ä¿ç•™ä¸€ä½æœ‰æ•ˆæ•°ç»„ï¼‰ã€‚<br>ç´§æ¥ç€åˆ›å»ºäº†gåˆ†ç»„ï¼Œå¹¶å°†å®ƒä¼ é€’ç»™åæ ‡è½´ï¼ˆcallå‡½æ•°ï¼‰ï¼Œå¯ä»¥è®¤ä¸ºè¿™æ—¶å€™åæ ‡è½´å‡½æ•°ç›¸å½“äºä¸€ä¸ªé­”æ³•å¸ˆå¼€å§‹æ‰“é€ ä¸ä¸€æ ·çš„gåˆ†ç»„äº†ï¼è®¾ç½®gåˆ†ç»„å±äºç±».axisæ˜¯ä¸ºäº†å¯ä»¥åœ¨CSSæ ·å¼è¡¨ä¸­ç»Ÿä¸€å¯¹åæ ‡è½´çš„è§†è§‰æ ¼å¼è¿›è¡Œç®¡ç†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> xScale = d3.scaleLinear()</span><br><span class="line">             .domain([<span class="number">0</span>, d3.max(dataset, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d[<span class="number">0</span>]; &#125;)])</span><br><span class="line">             .range([padding, w - padding * <span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> yScale = d3.scaleLinear()</span><br><span class="line">             .domain([<span class="number">0</span>, d3.max(dataset, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d[<span class="number">1</span>]; &#125;)])</span><br><span class="line">             .range([h - padding, padding]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> formatAsPercentage = d3.format(<span class="string">".1%"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xAxis = d3.axisBottom()</span><br><span class="line">              .scale(xScale)</span><br><span class="line">              .ticks(<span class="number">5</span>)</span><br><span class="line">              .tickFormat(formatAsPercentage);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> yAxis = d3.axisLeft()</span><br><span class="line">              .scale(yScale)</span><br><span class="line">              .ticks(<span class="number">5</span>)</span><br><span class="line">              .tickFormat(formatAsPercentage);</span><br><span class="line"></span><br><span class="line">svg.append(<span class="string">"g"</span>)</span><br><span class="line">    .attr(<span class="string">"class"</span>, <span class="string">"axis"</span>)</span><br><span class="line">    .attr(<span class="string">"transform"</span>, <span class="string">"translate(0,"</span> + (h - padding) + <span class="string">")"</span>)</span><br><span class="line">    .call(xAxis);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Create Y axis</span></span><br><span class="line">svg.append(<span class="string">"g"</span>)</span><br><span class="line">    .attr(<span class="string">"class"</span>, <span class="string">"axis"</span>)</span><br><span class="line">    .attr(<span class="string">"transform"</span>, <span class="string">"translate("</span> + padding + <span class="string">",0)"</span>)</span><br><span class="line">    .call(yAxis);</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬äºŒç‰ˆå¢åŠ çš„å†…å®¹"><a href="#ç¬¬äºŒç‰ˆå¢åŠ çš„å†…å®¹" class="headerlink" title="ç¬¬äºŒç‰ˆå¢åŠ çš„å†…å®¹"></a>ç¬¬äºŒç‰ˆå¢åŠ çš„å†…å®¹</h3><p>å¯ä»¥å¢åŠ æ—¶é—´æ¯”ä¾‹å°º<br>d3.extentç­‰äºmmaçš„MinMaxå‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> parseTime = d3.timeParse(<span class="string">"%m/%d/%y"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Function for converting CSV values from strings to Dates and numbers</span></span><br><span class="line"><span class="comment">//parseIntæ˜¯JavaScriptçš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> rowConverter = <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="built_in">Date</span>: parseTime(d.Date),</span><br><span class="line">        Amount: <span class="built_in">parseInt</span>(d.Amount)</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">xScale = d3.scaleTime()</span><br><span class="line">           .domain(</span><br><span class="line">                d3.extent(dataset, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d.Date; &#125;),</span><br><span class="line">            )</span><br><span class="line">           .range([padding, w - padding]);</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬ä¹ç« -æ›´æ–°ã€è¿‡æ¸¡å’ŒåŠ¨ç”»"><a href="#ç¬¬ä¹ç« -æ›´æ–°ã€è¿‡æ¸¡å’ŒåŠ¨ç”»" class="headerlink" title="ç¬¬ä¹ç«  æ›´æ–°ã€è¿‡æ¸¡å’ŒåŠ¨ç”»"></a>ç¬¬ä¹ç«  æ›´æ–°ã€è¿‡æ¸¡å’ŒåŠ¨ç”»</h2>]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>å¯è§†åŒ–</tag>
        <tag>JavaScript</tag>
        <tag>D3.js</tag>
      </tags>
  </entry>
  <entry>
    <title>å°åº¦ä¹‹è¡Œ</title>
    <url>/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<p>å³å°†é£å¾€å°åº¦æµ·å¾—æ‹‰å·´å‚åŠ <a href="http://interspeech2018.org/" target="_blank" rel="noopener">Interspeech2018</a>ä¼šè®®ï¼Œè¿™ä¸ªä¼šè®®æ˜¯è¯­éŸ³è¯­è¨€æ–¹é¢çš„é¡¶çº§ä¼šè®®ã€‚</p>
<p>è¿™æ¬¡æäº¤çš„è®ºæ–‡æ˜¯åŸºäºå•å…ƒæŒ‘é€‰çš„è¯­éŸ³åˆæˆï¼Œä¸»è¦æ˜¯é€šè¿‡Embedding(ä¸€ä¸ªå›ºå®šé•¿å‘é‡)è¡¨ç¤ºéŸ³ç´ ç‰¹å¾ä»è€Œåœ¨è·¯å¾„æœç´¢æ—¶å¯ä»¥ç»™äºˆä»£ä»·å‡½æ•°æ›´å¤šçš„å£°å­¦è¡¨ç¤ºï¼Œå¹¶ä¸”æ”¹è¿›è¿æ¥ä»£ä»·æœ‰åŠ©äºæå‡è¯­éŸ³è¿ç»­æ€§ï¼Œä»è€Œæå‡ä¼ ç»ŸHMMæ–¹æ³•çš„æ•ˆæœã€‚å¯å‚è§<a href="http://home.ustc.edu.cn/~xiaozh/Interspeech2018/pdf/paper.pdf" target="_blank" rel="noopener">è®ºæ–‡</a>æˆ–<a href="http://home.ustc.edu.cn/~xiaozh/Interspeech2018/pdf/poster.pdf" target="_blank" rel="noopener">æµ·æŠ¥</a></p>
<p>è¿™ä¸ªæ–¹æ³•ä¹Ÿè¢«åº”ç”¨åœ¨ä»Šå¹´çš„è¯­éŸ³åˆæˆæ¯”èµ›<a href="https://www.synsig.org/index.php/Blizzard_Challenge" target="_blank" rel="noopener">Blizzard Challenge</a>ä¸­ï¼Œè¿™ä¸ªæå‡äº†ç³»ç»Ÿçš„çš„åˆæˆè¡¨ç°åŠ›ï¼Œä¸è¿‡é€ æˆäº†è¯­éŸ³ç¨³å®šæ€§çš„è½»å¾®ä¸‹é™ã€‚ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œæå‡å ä¸»è¦éƒ¨åˆ†ï¼Œå¯å‚è§è®ºæ–‡<a href="http://festvox.org/blizzard/bc2018/USTC_BlizzardChallenge2018.pdf" target="_blank" rel="noopener">The USTC System for Blizzard Challenge 2018</a></p>
<h1 id="2018å¹´8æœˆ31æ—¥-å‘¨äº”"><a href="#2018å¹´8æœˆ31æ—¥-å‘¨äº”" class="headerlink" title="2018å¹´8æœˆ31æ—¥ å‘¨äº”"></a>2018å¹´8æœˆ31æ—¥ å‘¨äº”</h1><p>åˆè‚¥-&gt;å¹¿å·<br><a id="more"></a><br>å¹¿å·ä¸€æ™šå°±ä½äº†3ä¸ªå°æ—¶ï¼Œ188å…ƒï¼ŒçœŸè´µå‘€ï¼</p>
<h1 id="2018å¹´9æœˆ1æ—¥-å‘¨å…­"><a href="#2018å¹´9æœˆ1æ—¥-å‘¨å…­" class="headerlink" title="2018å¹´9æœˆ1æ—¥ å‘¨å…­"></a>2018å¹´9æœˆ1æ—¥ å‘¨å…­</h1><p>å¹¿å·-&gt;æ–°å¾·é‡Œ<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/ZW2Kaf4k.jpg" class=""><br>æ–°å¾·é‡Œæœºåœºå¾ˆæ¼‚äº®ï¼Œå¾ˆç°ä»£åŒ–ï¼Œå„ç§è®¾æ–½éƒ½æ˜¯å›½é™…æ ‡å‡†<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/1f0alskW.jpg" class=""><br>é£æœºæ™šä¸Šæ˜¯æ™šä¸Šå…«ç‚¹å¤šåˆ°çš„æµ·å¾—æ‹‰å·´ï¼Œé£æœºä¸Šçš„æ™šé¤æ˜¯ä¼ ç»Ÿçš„å°åº¦å¼é¤ï¼ŒèŠ¹èœé…±åšçš„åœŸè±†æ³¥ï¼Œå’Œåˆè‚¥1912è¡—åŒºçš„å¡”å‰é¤å…ç±»ä¼¼ï¼Œä¸è¿‡æ›´è¾£ä¸€äº›ï¼Œä¹Ÿä¸æ˜¯å›½å†…çš„é‚£ç§è¾£å˜´çš„è¾£ã€‚è¿˜çœ‹åˆ°äº†åŒğŸŒˆï¼Œä¸€ä¸ªå®Œæ•´çš„åœ†å½¢ã€‚<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/IZF1SURb.jpg" class=""><br>æµ·å¾—æ‹‰å·´æœºåœºä¹Ÿä¸é”™ï¼Œä½›æ•™æ–‡åŒ–åœ¨è¿™ç››è¡Œï¼Œæœºåœºé‡Œæœ‰å…³äºä½›ï¼Œç‘œä¼½çš„é›•å¡‘å’Œè‰ºæœ¯å“ã€‚<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/plBZfFmq.jpg" class=""><br>ä¸è¿‡åœ¨æµ·å¾—æ‹‰å·´æ‰“çš„æ—¶ç›´æ¥ååœ¨äº†å‰¯é©¾é©¶ä½ï¼Œæ‰å‘ç°è¿™é‡Œæ˜¯é å·¦è¡Œé©¶ï¼ŒåŸæ¥æ˜¯é©¾é©¶ä½å°´å°¬ã€‚ã€‚ã€‚<br>ä½çš„å››æ˜Ÿçº§é…’åº—ç¦»HICCä¼šè®®åœ°ç‚¹å¾ˆè¿‘ï¼Œæ˜¯85ç¾å…ƒä¸€å¤©ï¼Œä½çš„å’Œå›½å†…çš„å¿«æ·é…’åº—ç±»ä¼¼ã€‚ä¸è¿‡å› ä¸ºä¹°æ°´èµ°å‡ºé…’åº—æ‰å‘ç°ï¼Œæ¯”æƒ³è±¡çš„å°åº¦è¿˜è¦å·®ï¼Œç”±äºå¤§é›¨ä¸‹çš„å¾ˆæ€¥ï¼Œæ°´å¾€å¾€æ— æ³•é€šè¿‡ä¸‹æ°´é“æ’èµ°ï¼Œå…¨éƒ¨æ¼«åœ¨åœ°ä¸Šã€‚åŸå¸‚å¸‚é•‡å»ºè®¾éå¸¸ç³Ÿç³•ï¼Œæ²¡æœ‰äººè¡Œé“å’Œæœºè½¦é“çš„æ¦‚å¿µï¼Œæ±¡æ°´æ¨ªæµï¼Œäº•æ°´å¤–å–·ï¼Œå…¬äº¤è½¦æ²¡æœ‰é—¨éšæ„ä¸Šäººï¼Œä¼°è®¡å°åº¦äººå·²ç»ä¹ ä»¥ä¸ºå¸¸ã€‚<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/OTYEKDHv.jpg" class=""><br>çœ‹æ¥å°åº¦ç¼ºçš„ä¸ä»…ä»…æ˜¯å•¥ã€Šå•æ‰€è‹±é›„ã€‹ï¼Œä¹Ÿç¼ºä¸‹æ°´é“è‹±é›„ã€‚å¥½åœ¨å°åº¦äººæ¯”è¾ƒä¹è§‚ï¼Œä¹Ÿä¹äºåŠ©äººï¼Œè¿™æ˜¯ä¸æ˜¯å’Œä¿¡æ•™åˆ†ä¸å¼€å‘¢ã€‚å–å®Œæ°´å°±ç«‹åˆ»å›é…’åº—äº†ï¼Œç¡è§‰~</p>
<h1 id="2018å¹´9æœˆ2æ—¥-å‘¨æ—¥"><a href="#2018å¹´9æœˆ2æ—¥-å‘¨æ—¥" class="headerlink" title="2018å¹´9æœˆ2æ—¥ å‘¨æ—¥"></a>2018å¹´9æœˆ2æ—¥ å‘¨æ—¥</h1><p>ä»Šå¤©æ˜¯InterspeechæŠ¥é“çš„ç¬¬ä¸€å¤©ï¼Œä¸Šåˆå°±å»é¢†äº†ä¼šè®®å†Œï¼Œè®ºæ–‡é›†Uç›˜ï¼Œå°åº¦é£æ ¼çš„åŒ…åŒ…ï¼Œè¿˜æœ‰å±äºè‡ªå·±çš„ä»£è¡¨ç‰Œç­‰ç­‰ï¼ˆå¯ä»¥åœ¨Google Playä¸Šä¸‹è½½Interspeech2018 App,å¯ä»¥ç›´æ¥çœ‹è®ºæ–‡ï¼‰</p>
<p>ä¸­åˆåœ¨é™„è¿‘çš„mainland Chinaåƒä¸­å›½èœ,è¿˜è›®å¥½åƒä¸è¿‡é£å‘³è¿˜æ˜¯å’Œä¸­å›½ä¸å®Œå…¨ä¸€æ ·ï¼Œä¹Ÿä¸æ˜¯å°åº¦é£å‘³ï¼Œé‚£å¯ä»¥è¯´æ˜¯æ··æ­å§</p>
<p>ä¸‹åˆå»å‚è§‚äº†è‘›åº·è¾¾å¤åŸé—è¿¹ã€‚å°åº¦å’Œä¸­å›½çš„æ™¯ç‚¹é™„ä»¶ä¸ä¸€æ ·ï¼Œç¬¬ä¸€ä¸æ˜¯é‚£ç§åœˆåœ°æ”¶é—¨ç¥¨é‚£ç§ã€æ™¯åŒºå¤–ç†™ç†™æ”˜æ”˜æ²¡æœ‰æ™¯ç‚¹çš„æ„Ÿè§‰ï¼›ç¬¬äºŒé—¨ç¥¨ä»·æ ¼ä¸è´µï¼ˆç›¸å¯¹äºä¸­å›½è€Œä¸æ˜¯å°åº¦æœ¬åœ°äººï¼‰ï¼Œ300å¢æ¯”å¤§æ¦‚30äººæ°‘å¸ï¼›ç¬¬ä¸‰æ˜¯æ™¯åŒºä¸æ˜¯åˆ†åœ°åŒºæ”¶è´¹ï¼Œè€Œæ˜¯æ•´ä¸ªæ™¯åŒºå°±æ”¶300å¢æ¯”ï¼Œè¦æ˜¯é¸Ÿå·¢å˜›è¿›å»é€›ä¸€åœˆä¸€ä¸ªé’±ï¼Œçœ‹å¤©å°åˆæ˜¯ä¸€ä¸ªé’±ã€‚ã€‚ã€‚<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/c6Nf7o2B.jpg" class=""><br>æ™¯åŒºå†…éƒ¨æœ¬åœ°äººæ¯”è¾ƒå¤šï¼Œå¤§éƒ¨åˆ†æ˜¯æ–­å£æ®‹å£ï¼Œä»¥å‰æ˜¯çš‡å¸çš„å¯å®«ï¼Œè™½ç„¶åªæœ‰500å¤šå¹´ä½†æ˜¯å†ç»é£å¹é›¨æ‰“ï¼Œå·²ç»æˆä¸ºä¸å¤å½“æ—¶çš„ç››æ™¯ã€‚<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/Hg9UlMXT.jpg" class=""><br>ä½†æ˜¯åœ¨ğŸ‡«ğŸ‡·åŸƒå…‹æ–¯ä½çš„ä¹Ÿæ˜¯500å¤šå¹´å†å²çš„æˆ¿å­ï¼Œå¤–è¡¨å¹²å‡€æ•´æ´ï¼Œé‡Œé¢ç°ä»£åŒ–è®¾æ–½ä¿±å…¨ã€‚å°åº¦ğŸ‡®ğŸ‡³è¿˜æ˜¯å‘å±•ä¸­å›½å®¶å˜›<br>ä¸è¿‡æµ·å¾—æ‹‰å·´è¿™é‡Œå˜å¤©ç‰¹åˆ«å¿«ï¼Œç¬é—´å°±èƒ½ä¸‹èµ·å¤§é›¨ï¼Œæˆ‘æ²¡æ‰“ä¼åªå¥½èº²åœ¨å²©çŸ³ä¸‹ï¼Œç‰¹åˆ«ç®€é™‹çš„â€é›¨æ£šâ€œå‘€ã€‚é›¨åœäº†è¿˜æ˜¯é˜´å¤©å°±æ¥ç€ä¸Šå±±ï¼Œè·¯ä¸Šè¿˜æ˜¯æŒºæ³¥æ³çš„ï¼Œé‹å­ä¸Šéƒ½æ˜¯æ³¥æ²™ã€‚ä¸è¿‡ä¸Šå±±ä¹‹åé£æ™¯ç‹¬å¥½ï¼Œæ•´ä¸ªæµ·å¾—æ‹‰å·´éƒ½èƒ½å°½æ”¶çœ¼åº•ã€‚<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/TSMFh6A1.jpg" class=""><br>è™½ç„¶æ·‹äº†ä¸€èº«é›¨ä¸è¿‡é›¨è¿‡å¤©æ™´åè¡£æœå¹²çš„ä¹Ÿå¿«ï¼Œé˜³å…‰ç…§åœ¨å±±ä¸‹ç‰¹åˆ«ç¾ä¸½ã€‚æ–­å£æ®‹å£ä¹Ÿå¾ˆç¾ã€‚</p>
<h1 id="2018å¹´9æœˆ3æ—¥-å‘¨ä¸€"><a href="#2018å¹´9æœˆ3æ—¥-å‘¨ä¸€" class="headerlink" title="2018å¹´9æœˆ3æ—¥ å‘¨ä¸€"></a>2018å¹´9æœˆ3æ—¥ å‘¨ä¸€</h1><p>è¿™æ˜¯Interspeech2018æ­£å¼å¼€å§‹çš„ç¬¬ä¸€å¤©ï¼Œä¸Šåˆå‚åŠ äº†å¼€å¹•ä»ªå¼ï¼Œå…ˆä»‹ç»å°åº¦å›½å®¶çš„åœ°ç†çŠ¶å†µï¼Œæ¥ç€ä»‹ç»ä¸»åŠåŸå¸‚æµ·å¾—æ‹‰å·´ï¼Œç„¶åæ˜¯ä»Šå¹´ä¼šè®®çš„æ¥æ”¶æƒ…å†µï¼Œæ¯”å¦‚è®ºæ–‡æ¥å—ç‡å‘€ï¼ˆä»Šå¹´æ˜¯50%ï¼‰ã€å“ªä¸ªé¢†åŸŸæŠ•ç¨¿è®ºæ–‡æœ€å¤šæœ€å°‘å‘€ã€æ¯å¤©æäº¤çš„è®ºæ–‡æ•°é‡å‘€ã€æ¯ç¯‡æ–‡ç« çš„ä¿®æ”¹æ¬¡æ•°çš„ç»Ÿè®¡å‘€ç­‰ç­‰ä¸€äº›æ¯”è¾ƒå¥½ç©çš„ç»“æœã€‚æ¥ç€æ˜¯æˆäºˆISCAçš„å¥–é¡¹ï¼Œä¸€èˆ¬æ˜¯å¯¹æŸäº›é¢†åŸŸæœ‰ç‰¹åˆ«è´¡çŒ®çš„ä¸“å®¶å­¦è€…ï¼Œä»¥åŠæŸäº›é¢†åŸŸçš„å¼€æ‹“è€…å…ˆé©±ä»¬ã€‚æ‰€ä»¥ä¸Šåˆå°±æ˜¯æ„Ÿå—ä¼šåœºæ°›å›´</p>
<img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/75pwR4jr.jpg" class="">
<img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/fwStugcF.jpg" class="">
<p>åƒå®Œé¥­ä¹‹åå°±æ˜¯å†å»ä¼šåœºå¬å£å¤´æŠ¥å‘Šï¼Œoralæ˜¯è¯­éŸ³è¯†åˆ«æ–¹å‘çš„ï¼Œå¹¶ä¸æ˜¯æˆ‘ç ”ç©¶çš„é¢†åŸŸã€‚ä¸è¿‡æœ‰ä¸€ç¯‡æ–‡ç« æ˜¯è¯´ç”¨å››å…ƒæ•°(n = a + bI + cJ + dK)æ¥ä»£æ›¿ç¥ç»ç½‘ç»œå‚æ•°ï¼Œä¼¼ä¹è¿˜æœ‰ä¸é”™çš„æ•ˆæœï¼Œæœ‰æ„æ€ã€‚ä¹‹åçœ‹äº†æµ·æŠ¥æ˜¯å…³äºè¯­éŸ³éªŒè¯çš„æ”»å‡»çš„ï¼Œä¹‹å‰ä¹Ÿä¸æ€ä¹ˆäº†è§£ï¼Œçœ‹äº†æµ·æŠ¥å’Œäº¤æµä¹‹åæ„Ÿè§‰è¿™ä¸ªé¢†åŸŸè¿˜æ˜¯æ–°å…´é¢†åŸŸï¼Œç”¨çš„æ–¹æ³•è¿˜ä¸æ˜¯é‚£ä¹ˆå¤æ‚ï¼Œä¹Ÿè›®æœ‰æ„æ€çš„ã€‚è¯­éŸ³åˆæˆåªæœ‰ä¸»è§‚æŒ‡æ ‡æ‰æ˜¯ç¡¬é“ç†ï¼Œä½†æ˜¯è¯†åˆ«å’Œè¿™ä¸ªæ”»å‡»éªŒè¯éƒ½æ˜¯å¯ä»¥ç”¨å®¢è§‚æŒ‡æ ‡è¯´è¯çš„é‚£å°±æ”¹è¿›ç½‘ç»œæ¨¡å‹è·å¾—æ›´å°çš„é”™è¯¯ç‡å‘—ï¼Œè¯­éŸ³åˆæˆï¼ˆå•å…ƒæŒ‘é€‰æ–¹å¼çš„ï¼‰å³ä½¿å®¢è§‚æŒ‡æ ‡å¥½ä¸»è§‚ä¹Ÿä¸ä¸€å®šå¬å‡ºå·®å¼‚ã€‚ã€‚ã€‚</p>
<p>æ™šä¸Šæ˜¯å°åº¦æ–‡åŒ–æ±‡æ¼”ï¼Œåœ°ç‚¹å°±æ˜¯åœ¨å¼€å¹•å¼çš„Hall3ã€‚æ„Ÿè§‰éŸ³ä¹ä¸å¦‚æˆ‘åœ¨ä¸‰å‚»å¤§é—¹å®è±åé‚£æ®µéŸ³ä¹æ‚ æ‰¬å©‰è½¬å¥½å¬ï¼Œä¸è¿‡æœ‰äº›éŸ³ä¹çš„èŠ‚å¥æ„Ÿè¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚</p>
<p>æ™šä¸Šé€›äº†ä¸‹è¶…å¸‚ä¹°åˆ°äº†æˆ‘ä¸€ç›´å¿ƒå¿ƒå¿µå¿µçš„å°åº¦ç¥è°ƒæ–™-èŠ¹èœé…±(celery sauce)ã€‚ä½†æ˜¯åˆšå¼€å§‹è‡ªå·±æ‰¾ä¸åˆ°é—®äº†å½“åœ°äººï¼ˆéƒ½æŒºçƒ­æƒ…ï¼‰æ‰å‘ç°è‡ªå·±æ‰¾çš„ä¸å¯¹ï¼Œåº”è¯¥æ˜¯mint sauceã€‚çœ‹èµ·æ¥è¿™å°±å¯¹äº†ï¼Œä¸‹æ¬¡å¯ä»¥ç”¨è¿™ä¸ªé…±å‘äººï¼Œå“ˆå“ˆå“ˆ~</p>
<p>æ€»å…±ä¹°äº†èŠ¹èœé…±225å¢å¸ƒ + å…»ä¹å¤šçº¢è“ä¸¤åŒ…è£…ï¼ˆæ¯åŒ…5ç½ï¼‰70*2 == 365å¢å¸ƒã€‚å“¦å¯¹äº†å°åº¦ğŸ†ä¹Ÿæ˜¯å¥‡è‘©è¿˜æœ‰è¿™æ ·çš„ï¼Œå°±åƒå°åœ†çƒä¸€æ ·ã€‚ã€‚ã€‚</p>
<h1 id="2018å¹´9æœˆ4æ—¥-å‘¨äºŒ"><a href="#2018å¹´9æœˆ4æ—¥-å‘¨äºŒ" class="headerlink" title="2018å¹´9æœˆ4æ—¥ å‘¨äºŒ"></a>2018å¹´9æœˆ4æ—¥ å‘¨äºŒ</h1><p>ä»Šå¤©å·²ç»æ˜¯å‡ºå‘çš„ç¬¬äº”å¤©äº†ï¼Œä¸Šåˆå»äº†ä¼šè®®ä¸­å¿ƒä¸€è¶Ÿï¼Œå¬çš„æ˜¯ç»Ÿè®¡å‚æ•°è¯­éŸ³åˆæˆçš„å£å¤´æŠ¥å‘Šã€‚é‡Œé¢å…³äºè¿™ä¸ªé¢†åŸŸçš„æœ€æ–°æˆæœå¯ä»¥é˜…è¯»ä¸‹ã€‚</p>
<p>ä¸­åˆä¸€æ ·åœ¨mainland Chinaåƒé¥­ï¼Œä¹‹åå»ç©äº†Interspeechä¼šæ ‡çš„æ‰€åœ¨åœ°ï¼ŒåŠ å°”å¡”(300å¢æ¯”)ã€‚<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/abGMuYxq.jpg" class=""><br>é™„è¿‘äººå¤ªå¤ªå¤šäº†ï¼Œç„¶åå°±æ˜¯ç™»å¡”ã€‚ä¹Ÿæ˜¯å’Œæ¬§æ´²å¾ˆå¤šæ•™å ‚å®«æ®¿ä¸€æ ·ï¼ˆæ¯”å¦‚å·´é»é¦™æ¦­ä¸½èˆå¤§è¡—çš„å‡¯æ—‹é—¨ï¼‰æ˜¯ç›˜æ—‹å‘ä¸Šçš„ï¼Œä½†æ˜¯è§„æ¨¡è‚¯å®šæ˜¯ä¸å¦‚é‚£ä¸ªå‡¯æ—‹é—¨å¤§ã€‚å¡”é¡¶å¯ä»¥ä¿¯ç°å‘¨å›´<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/i9SbZx0v.jpg" class=""><br>ç„¶åå»äº†Chowmahalla Palaceè¿™ä¸ªå®«æ®¿ï¼ˆ200å¢æ¯”ï¼Œç‰¹åˆ«å€¼ï¼‰ï¼Œå’Œå¤–é¢å®Œå…¨ä¸¤ä¸ªä¸–ç•Œï¼Œäººå®¶æ˜¯ä¸–å¤–æ¡ƒæºè¿™é‡Œæ˜¯å£ç”»ç§€æœˆï¼Ÿï¼Ÿï¼Ÿï¼Œå¾…ç»­<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/UJCKo4Vf.jpg" class=""><br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/qyne0li5.jpg" class=""><br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/q8k5orVd.jpg" class=""></p>
<h1 id="2018å¹´9æœˆ5æ—¥-å‘¨ä¸‰"><a href="#2018å¹´9æœˆ5æ—¥-å‘¨ä¸‰" class="headerlink" title="2018å¹´9æœˆ5æ—¥ å‘¨ä¸‰"></a>2018å¹´9æœˆ5æ—¥ å‘¨ä¸‰</h1><p>ä»Šå¤©æ˜¯æˆ‘çš„posteræ—¶é—´ï¼Œå› æ­¤ä¸Šåˆä¸»è¦çš„äº‹æƒ…å°±æ˜¯çœ‹åˆ«äººçš„æµ·æ‹”ã€‚<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/6u8yverP.jpg" class=""><br>å› ä¸ºä¸Šåˆæœ‰ä¸€åœºæ˜¯å…³äºVoice Conversion and Speech Synthesisã€‚å…¶ä¸­Exemplar-based Speech Waveform Genarationå’Œæˆ‘åšçš„å•å…ƒæŒ‘é€‰æœ‰å…³ï¼Œè¿˜æä¾›äº†Githubåœ°å€ï¼ŒåŒæ—¶ä¹Ÿæ˜¯BCæ¯”èµ›CSTRçš„æ··åˆå•å…ƒæŒ‘é€‰ç³»ç»Ÿã€‚<br>é¡¾å®‡å¸ˆå…„çš„å¤šä»»åŠ¡WaveNetå’Œè®¯é£æºå“¥çš„è®ºæ–‡ä¹Ÿåœ¨å±•ç¤ºä¹‹åˆ—ã€‚è°·æ­Œä¹Ÿæœ‰ä¸€ç¯‡æ–‡ç« è¯´çš„æ˜¯TTSç³»ç»Ÿçš„ä¸€äº›å®éªŒã€‚</p>
<p>ä¸‹åˆæ˜¯æˆ‘è®²posterçš„æ—¶å€™ï¼Œå›´è§‚å¾ˆå¤šäººï¼Œæ„Ÿå…´è¶£çš„ä¹Ÿå¤šã€‚</p>
<p>æ™šä¸Šæ˜¯â€œç™¾åº¦ä¹‹å¤œâ€ï¼Œè¯·å®¢åœ¨æ„å¤§åˆ©é¤å…åƒé¥­ï¼Œéå¸¸é«˜çº§ï¼Œçœ‹æ¥èŠ±è´¹äº†ä¸å°‘å¿ƒæ€ï¼Œæ®è¯´å’Œå‰ä¸€å¤©çš„äº¬ä¸œæ™šå®´å½¢æˆå¯¹æ¯”ï¼Œé‚£é¡¿è‡´è¾å†—é•¿è€Œä¸”è¿˜æ˜¯å¤©å¤©åƒçš„å°åº¦é¤ï¼Œæ²¡æœ‰åˆ›æ„ã€‚</p>
<h1 id="2018å¹´9æœˆ6æ—¥-å‘¨å››"><a href="#2018å¹´9æœˆ6æ—¥-å‘¨å››" class="headerlink" title="2018å¹´9æœˆ6æ—¥ å‘¨å››"></a>2018å¹´9æœˆ6æ—¥ å‘¨å››</h1><p>æ—©ä¸Šå»äº†æ²³è¾¹çš„åšç‰©é¦†ï¼Œå¤–å›½äººæ˜¯500å¢æ¯”ï¼Œé—¨å£çœ‹è§äº†ä¸€ç§èŠ±å¾ˆæ˜¯ç¥å¥‡ï¼Œå¶ç‰‡ç«Ÿç„¶æ˜¯çº¢è‰²çš„ã€‚<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/4KQ6kySg.jpg" class=""><br>åšç‰©é¦†æ€»ä½“è¿˜æ˜¯ä¸é”™çš„ï¼Œè—å“ä¸°å¯Œä½†æ˜¯åšç‰©é¦†è€æ—§ã€‚<br>æ™šä¸Šå»äº†æœ€å¤§çš„è´­ç‰©ä¸­å¿ƒï¼Œåƒäº†è‚‰å·è¿˜æœ‰è‚¯å¾·åŸºã€‚ä¹°äº†ä¸€ä¸ªè´¾å°”å¡”çš„æœ¨ç‰ˆç”»ã€‚</p>
<h1 id="2018å¹´9æœˆ7æ—¥-å‘¨äº”"><a href="#2018å¹´9æœˆ7æ—¥-å‘¨äº”" class="headerlink" title="2018å¹´9æœˆ7æ—¥ å‘¨äº”"></a>2018å¹´9æœˆ7æ—¥ å‘¨äº”</h1><p>èŠ±äº†ä¸€ä¸ªä¸ŠåˆåŠä¸ªä¸‹åˆå‚è§‚å®è±åã€‚éå¸¸ä¸é”™ã€‚<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/ViaGgh79.jpg" class=""><br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/4SoLJdsh.jpg" class=""><br>ç„¶åé¡ºä¾¿å»äº†ä¸€ä¸ªå°åº¦äººå®¶ï¼Œæ¢äº†æ‘©çš„è¿˜ä½“éªŒäº†æ–°äº¤é€šæ–¹å¼ã€‚<br>æœ€åå»äº†è¯åº—ã€‚</p>
<h1 id="2018å¹´9æœˆ8æ—¥-å‘¨å…­"><a href="#2018å¹´9æœˆ8æ—¥-å‘¨å…­" class="headerlink" title="2018å¹´9æœˆ8æ—¥ å‘¨å…­"></a>2018å¹´9æœˆ8æ—¥ å‘¨å…­</h1><p>ä»Šå¤©ä¸Šåˆå»å¾®è½¯å‚åŠ Blizzard Challengeæ¯”èµ›çš„Workshop<br><img src="/2018/08/28/%E5%8D%B0%E5%BA%A6%E4%B9%8B%E8%A1%8C/iB1JcvG9.jpg" class=""><br>è¿™æ¬¡USTCç³»ç»Ÿæ˜¯ç¬¬ä¸€ï¼Œç„¶åæˆ‘æ¥ä»‹ç»æˆ‘ä»¬ç³»ç»Ÿã€‚å¯æ˜¯æˆ‘å½“æ—¶åº”è¯¥æ³¨æ„ä¸¤ç‚¹ï¼Œä¹Ÿæ˜¯ä»¥åéœ€è¦æ³¨æ„çš„ã€‚</p>
<ul>
<li>ä¼šè®®åœ°ç‚¹çš„ç©ºé—´å¾ˆå°ï¼Œå¹¶ä¸è¶³ä»¥å½¢æˆä¼šåœºé‚£ç§å·¨å¤§çš„Hallï¼Œå› æ­¤å½“æ—¶åº”è¯¥èƒŒä¸‹æ¥ppt</li>
<li>pptä¸åº”è¯¥è¯¦ç»†ä»‹ç»ä»¥å‰çš„ç³»ç»Ÿï¼Œåº”å½“ä»¥è¿™æ¬¡æ–°çš„å†…å®¹å’Œdemoä¸ºä¸»</li>
<li>Macéœ€è¦æ­é…ä¸€ä¸ªHDMIè½¬æ¥çº¿ï¼Œæˆ‘æ²¡å¸¦ã€‚ä»¥åŠå¦‚ä½•æŠ•å±äº‹å…ˆæ²¡æœ‰å……åˆ†äº†è§£</li>
</ul>
<p>é€ æˆäº†å‡ ä¸ªé—®é¢˜</p>
<ul>
<li>æ— æ³•ç‚¹äº®å±å¹•å’ŒéŸ³å“ã€‚</li>
<li>ä¸æ˜¯ç«™ç«‹ä¸å¤Ÿæ­£å¼</li>
<li></li>
</ul>
]]></content>
      <categories>
        <category>æ—…è¡Œ</category>
      </categories>
      <tags>
        <tag>å°åº¦</tag>
        <tag>ä¼šè®®</tag>
        <tag>æ—…è¡Œ</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤§è¿ä¹‹è¡Œ</title>
    <url>/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script>
        <div id="aplayer-pmlBCqZM" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">
            <pre class="aplayer-lrc-content"></pre>
        </div>
        <script>
          var ap = new APlayer({
            element: document.getElementById("aplayer-pmlBCqZM"),
            narrow: false,
            autoplay: false,
            showlrc: false,
            music: {
              title: "å•è½¦ç»ƒä¹ æ›²",
              author: "ç‹é›ç›Ÿ",
              url: "å•è½¦ç»ƒä¹ æ›².mp3",
              pic: "/2018/07/25/å¤§è¿ä¹‹è¡Œ/å•è½¦ç»ƒä¹ æ›².jpg",
              lrc: ""
            }
          });
          window.aplayers || (window.aplayers = []);
          window.aplayers.push(ap);
        </script>
<!-- toc -->
<h1 id="2018å¹´7æœˆ20æ—¥-å‘¨äº”"><a href="#2018å¹´7æœˆ20æ—¥-å‘¨äº”" class="headerlink" title="2018å¹´7æœˆ20æ—¥ å‘¨äº”"></a>2018å¹´7æœˆ20æ—¥ å‘¨äº”</h1><p>ä¸Šåˆåç‚¹é£æœºï¼Œ11.40åˆ°è¾¾å¤§è¿</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_105107.jpg" class="">
<a id="more"></a>
<p>å‡¯å®æ¥æœºåœºæ¥æˆ‘ï¼Œä¸­åˆåƒäº†è’¸æ±½æµ·é²œï¼Œæµ·èƒ†æµ·èºæµ·å‚ã€‚</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_134852.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_135143.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_142216.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_134844__01.jpg" class="">
<p>åƒå®Œé¥­æ‰“çš„å›å»ï¼Œå°±è¿è‰ä¹Ÿå’Œåˆè‚¥åˆ°ä¸åŒï¼Œä¸æ˜¯å±å±å±å«å¾ˆä¹…ï¼Œè€Œæ˜¯æ–­æ–­ç»­ç»­çš„ï¼Œä¹Ÿè®¸æ˜¯æ°”æ¸©ä¸åƒæˆ‘ä»¬è¿™é‡Œè¿™ä¹ˆç‚çƒ­å§</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_145852.jpg" class="">
<p>ä¸‹åˆä»æµ·å†›å¤§è¿èˆ°è‰‡å­¦é™¢å‡ºæ¥åæ²¿ç€æµ·è¾¹ä¸€ç›´èµ°</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_160432.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_161450.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_162321.jpg" class="">
<p>å…ˆè·¯è¿‡è€è™æ»©(è€è™æŠ½è±¡çš„é›•å¡‘ä½äºå¹¿åœºæ­£ä¸­ï¼‰</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_164502.jpg" class="">
<p>æ¥ç€è·¯è¿‡äº†æ»¨æµ·è·¯è¿˜æœ‰åŒ—å¤§æ¡¥ï¼ŒæŠŠä»–å®¶å°ç‹—ç‰›ç‰›ä¹Ÿå¸¦å‡ºæ¥é›äº†ã€‚æ™šä¸Šæ‰¾äº†å®¶ä¸œåŒ—èœåƒï¼Œæœ‰ç‰¹è‰²èœç„–å­(å°±æ˜¯ç‚¸è¿‡çš„åœ°ç“œç²‰åšçš„)<br><img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_191511.jpg" class=""></p>
<p>è¿˜æœ‰é”…åŒ…è‚‰(åƒèµ·æ¥åƒå¦é—¨çš„æ‹”ä¸ï¼Œé…¸ç”œå£çš„)ï¼Œéƒ½åƒä¸å®Œï¼Œåˆ†é‡å¾ˆè¶³ä¹Ÿä¸è´µã€‚åƒå®Œé¥­å»äº†ä¸œæ¸¯ï¼Œæœ‰éŸ³ä¹å–·æ³‰!</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_204526.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_204906.jpg" class="">
<p>è¿˜æœ‰æ¬§æ´²é£æƒ…è¡—æ¯”å¦‚å‡¯æ—‹é—¨å¨å°¼æ–¯å•¥çš„ï¼Œäººå¤´æ”’åŠ¨</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180720_210143.jpg" class="">
<h1 id="2018å¹´7æœˆ21æ—¥-å‘¨å…­"><a href="#2018å¹´7æœˆ21æ—¥-å‘¨å…­" class="headerlink" title="2018å¹´7æœˆ21æ—¥ å‘¨å…­"></a>2018å¹´7æœˆ21æ—¥ å‘¨å…­</h1><p>æ—©æ™¨å»äº†åƒé²œè‚‰å°ç¬¼åŒ… ç”œå£çš„å¥½åƒäº›æ±Ÿæµ™å£å‘³ï¼Œé²œè™¾é¥ºå­ã€‚ä¹‹åå»åŒ—å¹¿åœºåè½¦å»æ—…é¡º,ä¸»è¦å»äº†ä¸¤ä¸ªæ™¯ç‚¹ä¸€ä¸ªæ˜¯æ—…é¡ºå†›æ¸¯ï¼Œä¸å¤§ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šæµ·é¸¥ã€‚</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180721_115917.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180721_120511.jpg" class="">
<p>å¦ä¸€ä¸ªæ˜¯æ—¥ä¿„æ—…é¡ºç›‘ç‹±ï¼Œä¸€ä¸ªçˆ±å›½ä¸»ä¹‰åŸºåœ°ï¼Œå¯çœ‹åˆ°å½“æ—¶ç›‘ç‹±æ¡ä»¶æ˜¯å¤šå·®ï¼ˆç›‘ç‹±å˜›ç…§ç‰‡å°±ä¸æ‹äº†ï¼‰ã€‚</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180721_123907.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180721_124020.jpg" class="">
<p>å›å¸‚é‡Œå·²ç»æ˜¯ä¸‹åˆä¸‰ç‚¹ï¼Œæˆ‘åƒäº†é¡¿é“æ¿åçœ‹äº†ç”µå½±ã€Šé‚ªä¸å‹æ­£ã€‹ï¼Œä¹Ÿè®¸æ˜¯å–äº†å’–å•¡çš„åŸå› çœŸæ˜¯ç‰¹åˆ«æƒ³ä¸Šå•æ‰€å‘€ï¼Œè€Œä¸”å§œæ–‡çš„è¿™éƒ¨ç”µå½±å¾ˆéš¾æ‡‚ã€‚æ™šä¸Šå»äº†æ˜Ÿæµ·å¹¿åœºå’Œé™„è¿‘çš„æ²™æ»©</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180721_204032.jpg" class="">
<p>æ™šä¸Šä»æ¸¸ä¹å›­å‡ºæ¥åå»äº†çƒ§çƒ¤åº—ï¼Œç¬¬ä¸€æ¬¡å¤§èƒ†ä»å®¹åƒèš•è›¹ï¼Œå¾ˆå¥½åƒï¼Œåªæœ‰å¾®å¾®è‹¦å‘³ï¼Œä¸­é—´ä¸€ä¸ªå°å¿ƒå¿ƒä¸èƒ½åƒã€‚</p>
<h1 id="2018å¹´7æœˆ22æ—¥-å‘¨æ—¥"><a href="#2018å¹´7æœˆ22æ—¥-å‘¨æ—¥" class="headerlink" title="2018å¹´7æœˆ22æ—¥ å‘¨æ—¥"></a>2018å¹´7æœˆ22æ—¥ å‘¨æ—¥</h1><p>å»äº†è€è™æ»©æµ·æ´‹å…¬å›­è¿˜æœ‰é¸Ÿè¯­æ—ï¼Œæ„Ÿå—å°±æ˜¯æµ·æ´‹å…¬å›­é‡Œå¤´å¤ªé˜³é‚£ä¹ˆå¤§ï¼Œæåœ°åŠ¨ç‰©è¿˜è¦è¡¨æ¼”ä¹Ÿæ˜¯ä¸€ç§æŠ˜ç£¨ã€‚é¸Ÿè¯­æ—ä¸é”™ï¼Œå„ç§é¸Ÿå¯ä»¥å‡‘è¿‘ä½ ï¼Œå–‚äº†å®ƒä»¬å·§å…‹åŠ›é¢åŒ…ã€‚</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180722_153231.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180722_153316_006.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180722_154149_01.jpg" class="">
<p>è€è™æ»©å…¬å›­é‡Œçš„æ²™æ»©æ¯”æ˜Ÿæµ·å¹¿åœºçš„è½¯ï¼Œç™½å¤©èƒ½çœ‹è§ç»†é•¿çš„å°é±¼åœ¨æµ…æ»©å¤„ï¼ˆæ‰€ä»¥é’“é±¼æŠ“é±¼çš„éƒ½èƒ½è§åˆ°ï¼‰</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180722_124045.jpg" class="">
<p>ä¹‹åæˆ‘åˆå»è€è™æ»©å¹¿åœºäº†ï¼Œå–‚é£Ÿæµ·é¸¥ï¼ŒåŸºæœ¬ä¸Šåˆšå¼€å§‹éƒ½ä¸è¿‡æ¥éƒ½ç¦»æˆ‘å¾ˆè¿œåœ¨å¤©ä¸Šé£ï¼Œä¸è¿‡åªè¦è±¡å¾æ€§çš„æ’’å‡ æ¬¡ï¼Œæµ·é¸¥éƒ½è¿‡æ¥äº†ï¼Œä»–ä»¬ç©ºä¸­æ¥é£Ÿå¾ˆå‰å®³ã€‚<br>ç„¶åå»è§äº†å‡¯å®æœ‹å‹ä¸€èµ·åƒäº†é¥­å–äº†ç‚¹é…’ï¼Œæ™šä¸Šå»äº†å‡¯å®å®¶åƒçš„é¥­ï¼Œé¥­èœä¸»æ‰“æµ·é²œï¼Œä½†æ˜¯åƒä¸æ‰æœ‰äº›å¤šï¼Œç¬¬ä¸€æ¬¡åƒçŸ¥äº†çŒ´ï¼Œå‘³é“ä¸é”™å“¦ï¼Œé«˜è›‹ç™½ï¼Œåˆ«äººéƒ½æ˜¯æŠŠçŸ¥äº†å½“ä¸»é£Ÿåƒã€‚</p>
<p>å‚æ™šèµ°åœ¨è€è™æ»©çš„æµ·è¾¹å¤§é“ä¸Šä¸€ç§å¤æ—¥çš„å®é™ã€‚</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180722_163852.jpg" class="">
<p>æ™šä¸Šåœ¨å¤§é™¢æ•£æ­¥æ˜¯å‡¯å®ä¸çŸ¥æ€ä¹ˆè¯´åˆ°äº†æ³•å›½å¯¹åº”äºä¸­å›½éš¾å¿˜æ˜¥å®µçš„æ›²å­æ˜¯Les demons De Minuitï¼ŒäºŒä¸‰åå¹´çš„è€æ­Œï¼Œæ¯å½“ä»€ä¹ˆæ´»åŠ¨å¤§å®¶å°±å”±è¿™ä¸ªï¼Œæ‰€ä»¥ä»–ä¹Ÿé¡ºä¾¿å­¦å­¦ã€‚èŠ‚å¥æ„Ÿå¾ˆå¥½å¬</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=28582962&auto=1&height=66"></iframe>

<p>æ¥ç€å°±å¤–æ”¾ç€è¿™é¦–æ­Œæ™šä¸Šå»äº†æ˜Ÿæµ·å¹¿åœºï¼Œé¡ºä¾¿ä¹Ÿè¸©æ²™æ»©äº†ï¼Œä¸è¿‡å¾ˆç¡Œè„šã€‚</p>
<p>æ™šä¸Šçš„æ˜Ÿæµ·æ¹¾å¤§æ¡¥å¼€ç¯äº†ï¼Œå¾ˆé•¿ï¼Œæ‰“é€šäº†å¼€å‘åŒºä¸æ˜Ÿæµ·å¹¿åœºçš„è·ç¦»ã€‚</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180722_211210.jpg" class="">
<h1 id="2018å¹´7æœˆ23æ—¥-å‘¨ä¸€"><a href="#2018å¹´7æœˆ23æ—¥-å‘¨ä¸€" class="headerlink" title="2018å¹´7æœˆ23æ—¥ å‘¨ä¸€"></a>2018å¹´7æœˆ23æ—¥ å‘¨ä¸€</h1><p>ä»Šå¤©æ—©ä¸Šéšä¾¿åƒäº†ä¸€ç‚¹åå°±å…ˆå»äº†é€ èˆ¹å‚çœ‹åˆ°äº†è¾½å®å·èˆªç©ºæ¯èˆ°ï¼Œåªèƒ½è¿œæœ›<br><img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180723_102743.jpg" class=""></p>
<p>å»äº†é‡‘çŸ³æ»©å…¬å›­ï¼Œåšè½»è½¨3å·çº¿èŠ±äº†ä¸€ä¸ªå°æ—¶(8å…ƒ)æ‰åˆ°ï¼Œå¤Ÿè¿œçš„ã€‚ä¸­åˆåƒäº†è‚¯å¾·åŸºï¼Œç›´æ¥åè½¦(20å…ƒ)ååˆ°äº†åœ°è´¨å…¬å›­å…¥å£å¤„ã€‚ç„¶åå°±åˆèµ°å›äº†ä¸‰å·çº¿ç»ˆç‚¹ï¼Œä¸€è·¯ä¸Šé£æ™¯å¾ˆå¥½ï¼Œéƒ½æ˜¯ç¤çŸ³æµ·æ»©ï¼Œç©¿è¡Œåœ¨æ—é—´æ„Ÿè§‰ç‰¹åˆ«ä¸é”™ã€‚</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180723_132218.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180723_133736.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180723_133748.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180723_134736.jpg" class="">
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180723_135548.jpg" class="">
<p>å°±æ˜¯å¤ªçƒ­äº†æˆ‘ä»¬æŠŠè¡£æœå¥—å¤´ä¸Šï¼Œå¥½ä¸€å‰¯æ²™ç‰¹ç‹å­çš„æ ·å­ã€‚ä¸‹åˆä¹°äº†æ°´ç‰¹äº§ï¼Œè¿˜çœ‹åˆ°äº†é³é±¼</p>
<img src="/2018/07/25/%E5%A4%A7%E8%BF%9E%E4%B9%8B%E8%A1%8C/IMG_20180723_161332.jpg" class="">
<p>æ™šä¸Šåƒäº†é²…é±¼é²œé¥ºç­‰ï¼Œè¿™æ˜¯åŒ—æ–¹ç‰¹äº§ï¼ˆå¬è¯´å±±ä¸œäººä¹Ÿçˆ±åƒï¼‰</p>
<h1 id="2018å¹´7æœˆ24æ—¥-å‘¨äºŒ"><a href="#2018å¹´7æœˆ24æ—¥-å‘¨äºŒ" class="headerlink" title="2018å¹´7æœˆ24æ—¥ å‘¨äºŒ"></a>2018å¹´7æœˆ24æ—¥ å‘¨äºŒ</h1><p>åé£æœºå›åˆè‚¥</p>
]]></content>
      <categories>
        <category>æ—…è¡Œ</category>
      </categories>
      <tags>
        <tag>æ—…è¡Œ</tag>
        <tag>å¤§è¿</tag>
      </tags>
  </entry>
  <entry>
    <title>ç´ æç½‘ç«™</title>
    <url>/2018/07/26/%E7%B4%A0%E6%9D%90%E7%BD%91%E7%AB%99/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h1 id="å¯è§†åŒ–ç®—æ³•"><a href="#å¯è§†åŒ–ç®—æ³•" class="headerlink" title="å¯è§†åŒ–ç®—æ³•"></a>å¯è§†åŒ–ç®—æ³•</h1><ol>
<li><a href="https://www.quora.com/How-can-you-visualize-algorithms" target="_blank" rel="noopener">å¯è§†åŒ–ç®—æ³•ç½‘ç«™</a></li>
<li><a href="https://www.cs.usfca.edu/~galles/visualization/Algorithms.html" target="_blank" rel="noopener">æ—§é‡‘å±±å¤§å­¦çš„ç®—æ³•è¯¾ç¨‹çš„å¯è§†åŒ–</a></li>
<li><a href="https://visualgo.net/en" target="_blank" rel="noopener">VisuAlgo</a></li>
<li><a href="https://bost.ocks.org/mike/algorithms/" target="_blank" rel="noopener">æå…¶ç»šä¸½ï¼Œè‰ºæœ¯æ•ˆæœä¼¼çš„å¯è§†åŒ–ï¼Œç”¨äº†D3</a>     <a href="https://bindog.github.io/blog/2014/08/09/visualizing-algorithms/" target="_blank" rel="noopener">ç›¸åº”ä¸­æ–‡ç‰ˆ</a></li>
<li><a href="https://github.com/parkjs814/AlgorithmVisualizer" target="_blank" rel="noopener">ç®—æ³•çš„äº’åŠ¨å¯è§†åŒ– github ç½‘é¡µç‰ˆ</a></li>
<li><a href="http://setosa.io/ev/principal-component-analysis/" target="_blank" rel="noopener">PCA</a></li>
<li><a href="https://distill.pub/" target="_blank" rel="noopener">ä»‹ç»ç®—æ³•çš„Distill å¯è§†åŒ–å½¢å¼çš„è®ºæ–‡</a></li>
<li><a href="https://www.naftaliharris.com/blog/visualizing-k-means-clustering/" target="_blank" rel="noopener">å¯è§†åŒ–K-Means è¿˜æœ‰å…¶ä»–å¾ˆå¤šç®—æ³• äº¤äº’çš„</a></li>
</ol>
<a id="more"></a>
<h1 id="JavaScriptå¯è§†åŒ–"><a href="#JavaScriptå¯è§†åŒ–" class="headerlink" title="JavaScriptå¯è§†åŒ–"></a>JavaScriptå¯è§†åŒ–</h1><p>å¥½æƒ³å­¦HTML5 Canvaså‘€ å¥½æ¼‚äº® æ¯”å¦‚<a href="http://www.mokafolio.de/#!project=21" target="_blank" rel="noopener">å…¨æ˜¯è®¡ç®—æœºç”Ÿæˆçš„å‘€</a></p>
<ol>
<li><a href="https://d3js.org/" target="_blank" rel="noopener">D3</a></li>
<li><a href="http://paperjs.org/" target="_blank" rel="noopener">paper.js</a></li>
</ol>
<h1 id="å„ç§å¯è§†åŒ–æ–¹æ¡ˆè®²è§£"><a href="#å„ç§å¯è§†åŒ–æ–¹æ¡ˆè®²è§£" class="headerlink" title="å„ç§å¯è§†åŒ–æ–¹æ¡ˆè®²è§£"></a>å„ç§å¯è§†åŒ–æ–¹æ¡ˆè®²è§£</h1><ol>
<li><a href="http://antv.alipay.com/zh-cn/vis/chart" target="_blank" rel="noopener">é˜¿é‡Œå·´å·´çš„å¢¨è€…å­¦é™¢</a></li>
<li></li>
</ol>
<h1 id="å¯è§†åŒ–ç¥ç»ç½‘ç»œ"><a href="#å¯è§†åŒ–ç¥ç»ç½‘ç»œ" class="headerlink" title="å¯è§†åŒ–ç¥ç»ç½‘ç»œ"></a>å¯è§†åŒ–ç¥ç»ç½‘ç»œ</h1><ol>
<li><a href="https://github.com/Nikasa1889/HistoryObjectRecognition" target="_blank" rel="noopener">è®¡ç®—æœºè§†è§‰å†å²-The Modern History of Object Recognition</a></li>
<li><a href="http://scs.ryerson.ca/~aharley/vis/" target="_blank" rel="noopener">å¯è§†åŒ–DNN CNN</a></li>
</ol>
<h2 id="ç®€æ˜“å£°éŸ³ç´ æç½‘ç«™"><a href="#ç®€æ˜“å£°éŸ³ç´ æç½‘ç«™" class="headerlink" title="ç®€æ˜“å£°éŸ³ç´ æç½‘ç«™"></a>ç®€æ˜“å£°éŸ³ç´ æç½‘ç«™</h2><ol>
<li><a href="https://www.soundsnap.com/" target="_blank" rel="noopener">Find the perfect sound. - soundsnap</a> </li>
<li><a href="http://freesound.org/" target="_blank" rel="noopener">freesound</a></li>
</ol>
<h1 id="WebGL"><a href="#WebGL" class="headerlink" title="WebGL"></a>WebGL</h1><ol>
<li><a href="https://www.cnblogs.com/lhb25/p/20-webgl-demo-and-examples.html" target="_blank" rel="noopener">20ä¸ªä¸å¯æ€è®®çš„ WebGL ç¤ºä¾‹å’Œæ¼”ç¤º</a></li>
</ol>
]]></content>
      <categories>
        <category>æ”¶è—</category>
      </categories>
      <tags>
        <tag>å¯è§†åŒ–</tag>
        <tag>ç½‘ç«™</tag>
      </tags>
  </entry>
  <entry>
    <title>é€æ¸å®Œå–„èšç±»æ•ˆæœçš„å¯è§†åŒ–</title>
    <url>/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<p>æˆ‘çš„ç›®æ ‡æ˜¯å¯è§†åŒ–ä¸€ä¸ªEmbeddingçŸ©é˜µçš„èšç±»æ•ˆæœï¼Œä½†æ˜¯çŸ©é˜µæå¤§ï¼Œç»´æ•°ä¹Ÿé«˜ã€‚</p>
<p>å…·ä½“æ¥è¯´å°±æ˜¯çŸ©é˜µæ˜¯ä¸€ä¸ªçŸ©é˜µç»´åº¦æ˜¯459753*32ï¼Œæ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ªå‘é‡ï¼Œä»£è¡¨å•å…ƒå¯¹åº”çš„UnitVectorï¼›çŸ©é˜µå¯¹åº”çš„æ ‡ç­¾æ˜¯459753ä¸ªï¼Œæ¯ä¸€ä¸ªæ ‡ç­¾è®°å½•å½“å‰å•å…ƒå¯¹åº”çš„å…¶ä»–ä¿¡æ¯ï¼ˆä¾‹å¦‚å•å…ƒçš„æ—¶é•¿ã€å•å…ƒæ‰€å±ç±»åˆ«ã€å•å…ƒå¯¹åº”çš„éŸ³é¢‘æ–‡ä»¶åï¼‰ï¼Œå…¶ä¸­æœ€å…³æ³¨çš„æ˜¯UnitVectorä¸å•å…ƒæ‰€å±ç±»åˆ«çš„å…³ç³»</p>
<a id="more"></a>
<p>ä¹Ÿå°±æ˜¯å·²çŸ¥äºŒè¿›åˆ¶æ–‡ä»¶UnitVectorçŸ©é˜µä¸æ ‡ç­¾æ–‡ä»¶</p>
<h1 id="Mathematica"><a href="#Mathematica" class="headerlink" title="Mathematica"></a>Mathematica</h1><p>æœ€å¼€å§‹é‡‡ç”¨çš„æ–¹æ³•æ˜¯Mathematica</p>
<h2 id="tSNE"><a href="#tSNE" class="headerlink" title="tSNE"></a>tSNE</h2><h3 id="é™ç»´"><a href="#é™ç»´" class="headerlink" title="é™ç»´"></a>é™ç»´</h3><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">data=<span class="keyword">Import</span>[<span class="string">"../phone_name_frame_id.csv"</span>,<span class="string">"Table"</span>];</span><br><span class="line">features=<span class="keyword">Partition</span>[<span class="keyword">Import</span>[<span class="string">"Unit2Vec_UnitVector.dat"</span>,<span class="string">"Real32"</span>],<span class="number">32</span>];</span><br><span class="line">features=<span class="keyword">DimensionReduce</span>[features,<span class="number">2</span>,<span class="keyword">Method</span>-&gt;<span class="string">"TSNE"</span>];</span><br><span class="line"><span class="keyword">Export</span>[<span class="string">"./explain/Unit2Vec_tSNE.dat"</span>,features,<span class="string">"Real32"</span>];</span><br><span class="line">byspecies=<span class="keyword">GroupBy</span>[<span class="keyword">Thread</span>[features-&gt;data[[<span class="keyword">All</span>,<span class="number">2</span>]]],<span class="keyword">Last</span>-&gt;<span class="keyword">First</span>];</span><br><span class="line">file=<span class="string">"./explain/Visualization Phone Unit2Vec.wl"</span>;</span><br><span class="line"><span class="keyword">If</span>[<span class="keyword">FileExistsQ</span>[file],<span class="keyword">DeleteFile</span>@file];</span><br><span class="line"><span class="keyword">Save</span>[file,byspecies]</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­data[[All,2]]å°±æ˜¯éŸ³ç´ æ‰€å±ç±»åˆ«ä¿¡æ¯ï¼ŒUnit2Vec_UnitVector.datæ˜¯EmbeddingçŸ©é˜µã€‚<br>ä¼šè¾“å‡ºä¸¤ä¸ªæ–‡ä»¶</p>
<ul>
<li>ç¬¬ä¸€ä¸ªUnit2Vec_tSNE.datæ˜¯459753*2çš„å·²ç»é™ç»´å¾—åˆ°çš„çŸ©é˜µï¼Œè¿™åœ¨Javascriptæ‰ç”¨åˆ°çš„</li>
<li>ç¬¬äºŒä¸ªä¾¿äºMathematicaå¯è§†åŒ–</li>
</ul>
<h3 id="å¯è§†åŒ–é™ç»´çš„åˆ†å¸ƒ"><a href="#å¯è§†åŒ–é™ç»´çš„åˆ†å¸ƒ" class="headerlink" title="å¯è§†åŒ–é™ç»´çš„åˆ†å¸ƒ"></a>å¯è§†åŒ–é™ç»´çš„åˆ†å¸ƒ</h3><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">byspecies=<span class="keyword">KeySort</span>@<span class="keyword">Import</span>[<span class="string">"Visualization Phone Unit2Vec.wl"</span>];</span><br><span class="line"></span><br><span class="line">$scheme=<span class="string">"Rainbow"</span>;</span><br><span class="line"><span class="keyword">ListPlot</span>[<span class="keyword">Values</span>[byspecies],<span class="keyword">PlotLegends</span>-&gt;<span class="keyword">PointLegend</span>[$scheme,<span class="keyword">Keys</span>[byspecies],<span class="keyword">LegendMarkerSize</span>-&gt;<span class="number">15</span>],<span class="keyword">PlotStyle</span>-&gt;<span class="keyword">Map</span>[(<span class="keyword">Directive</span>[<span class="keyword">PointSize</span>[<span class="number">0.0015</span>],<span class="keyword">ColorData</span>[$scheme][#]]&amp;),<span class="keyword">Rescale</span>@<span class="keyword">Range</span>@<span class="keyword">Length</span>@<span class="keyword">Keys</span>@byspecies],<span class="keyword">ImageSize</span>-&gt;<span class="number">650</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">Export</span>[<span class="string">"UnitVector_vis.pdf"</span>,<span class="keyword">Rasterize</span>[<span class="keyword">Magnify</span>[%,<span class="number">4</span>],<span class="string">"Image"</span>]]<span class="comment">(*å› ä¸ºç‚¹æ•°å¤ªå¤šåªèƒ½å…ˆè½¬åŒ–ä¸ºå›¾åƒåå†å¯¼å‡ºï¼Œä¸ç„¶PDFæœ‰å‡ ç™¾å…†*)</span></span><br></pre></td></tr></table></figure>
<img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/mma_tsne.png" class="">
<h2 id="å¯è§†åŒ–æ··æ·†çŸ©é˜µ"><a href="#å¯è§†åŒ–æ··æ·†çŸ©é˜µ" class="headerlink" title="å¯è§†åŒ–æ··æ·†çŸ©é˜µ"></a>å¯è§†åŒ–æ··æ·†çŸ©é˜µ</h2><p>åœ¨åŸå§‹ç©ºé—´è®¡ç®—è·ç¦»<br>å³é’ˆå¯¹æ¬§å¼è·ç¦»æœ€è¿‘çš„å•å…ƒè§‚å¯Ÿå¯¹åº”çš„æ‰€å±ç±»åˆ«æ˜¯å¦ç›¸åŒæ¥è¿›è¡Œå¯è§†åŒ–</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">data=<span class="keyword">Partition</span>[<span class="keyword">Import</span>[<span class="string">"Unit2Vec_UnitVector.dat"</span>,<span class="string">"Real32"</span>],<span class="number">32</span>];</span><br><span class="line">phoneid=<span class="keyword">Import</span>[<span class="string">"../phone_name_frame_id.csv"</span>,<span class="string">"Table"</span>];</span><br><span class="line">nearstData=<span class="keyword">Nearest</span>[data,<span class="keyword">DistanceFunction</span>-&gt;<span class="keyword">EuclideanDistance</span>];</span><br><span class="line">Assodata=<span class="keyword">Association</span>@<span class="keyword">Thread</span>[data-&gt;<span class="keyword">Range</span>[<span class="keyword">Length</span>@data]];</span><br><span class="line">ReplaceiablePhone=<span class="keyword">Table</span>[phoneid[[x]]-&gt;phoneid[[Assodata[nearstData[data[[phoneid[[x,<span class="number">1</span>]]+<span class="number">1</span>]],<span class="number">2</span>][[<span class="number">2</span>]]]]],&#123;x,<span class="keyword">Length</span>@phoneid&#125;];</span><br><span class="line">fileName=<span class="string">"./explain/ReplaceiablePhone Unit2Vec_64_epochs50.wl"</span>;</span><br><span class="line"><span class="keyword">If</span>[<span class="keyword">FileExistsQ</span>[fileName],<span class="keyword">DeleteFile</span>[fileName]];</span><br><span class="line"><span class="keyword">Save</span>[fileName,ReplaceiablePhone]</span><br></pre></td></tr></table></figure>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">ReplaceiablePhoneDir=<span class="string">"\\\\172.16.46.88\\xzhou\\project\\Yanping13k\\Unit2VecAddDur\\Unit2Vec_64_epochs50\\explain\\ReplaceiablePhone Unit2Vec_64_epochs50.wl"</span>;</span><br><span class="line">ReplaceiablePhone=<span class="keyword">Get</span>[ReplaceiablePhoneDir];</span><br><span class="line">confusionMatrixData=#[[<span class="number">1</span>,<span class="number">2</span>]]-&gt;#[[<span class="number">2</span>,<span class="number">2</span>]]&amp;/@ReplaceiablePhone;</span><br><span class="line">phone=<span class="keyword">Union</span>@confusionMatrixData[[<span class="keyword">All</span>,<span class="number">1</span>]];</span><br><span class="line">m=<span class="keyword">Normal</span>@<span class="keyword">SparseArray</span>@<span class="keyword">Normal</span>@<span class="keyword">Counts</span>[&#123;#[[<span class="number">1</span>]],#[[<span class="number">2</span>]]&#125;&amp;/@(confusionMatrixData/.<span class="keyword">Thread</span>[phone-&gt;<span class="keyword">Range</span>[<span class="keyword">Length</span>@phone]])];</span><br><span class="line">mNorm=N[m/<span class="keyword">Total</span>[m,&#123;<span class="number">2</span>&#125;]];</span><br><span class="line">t=<span class="keyword">Transpose</span>@<span class="keyword">Map</span>[<span class="keyword">Flatten</span>,&#123;#,<span class="keyword">Reverse</span>@<span class="keyword">Transpose</span>@#&#125;&amp;[<span class="keyword">Table</span>[<span class="keyword">Range</span>[<span class="number">1</span>,<span class="number">2</span> #<span class="number">-1</span>,<span class="number">2</span>],&#123;#&#125;]]&amp;[<span class="keyword">Length</span>@mNorm]]/<span class="number">2</span>;</span><br><span class="line">p=<span class="keyword">MatrixPlot</span>[mNorm,<span class="keyword">Epilog</span>-&gt;<span class="keyword">Text</span>@@@<span class="keyword">Transpose</span>[&#123;<span class="keyword">Catenate</span>@m,t&#125;],<span class="keyword">FrameTicks</span>-&gt;&#123;<span class="keyword">Transpose</span>@&#123;<span class="keyword">Range</span>[<span class="keyword">Length</span>@phone],phone&#125;,<span class="keyword">Transpose</span>@&#123;<span class="keyword">Range</span>[<span class="keyword">Length</span>@phone],<span class="keyword">Total</span>[m,&#123;<span class="number">1</span>&#125;]&#125;,<span class="keyword">Transpose</span>@&#123;<span class="keyword">Range</span>[<span class="keyword">Length</span>@phone],<span class="keyword">Total</span>[m,&#123;<span class="number">2</span>&#125;]&#125;,<span class="keyword">Transpose</span>@&#123;<span class="keyword">Range</span>[<span class="keyword">Length</span>@phone],phone&#125;&#125;,<span class="keyword">ImageSize</span>-&gt;<span class="number">1700</span>];</span><br><span class="line"><span class="keyword">Column</span>[&#123;<span class="keyword">Row</span>[&#123;<span class="keyword">Rotate</span>[<span class="string">"actual class"</span>,<span class="number">90</span> <span class="keyword">Degree</span>],p&#125;,<span class="keyword">Alignment</span>-&gt;<span class="keyword">Center</span>],<span class="keyword">Spacer</span>@<span class="number">5</span>,<span class="string">"predicted class"</span>&#125;,<span class="keyword">Alignment</span>-&gt;<span class="keyword">Center</span>];<span class="keyword">Export</span>[<span class="keyword">FileNameJoin</span>@<span class="keyword">Flatten</span>[&#123;<span class="keyword">Most</span>@#,<span class="string">"ConfusionMatrixPlot "</span>&lt;&gt;<span class="keyword">StringSplit</span>[<span class="keyword">StringSplit</span>[<span class="keyword">Last</span>@#,<span class="string">" "</span>][[<span class="number">2</span>]],<span class="string">"."</span>][[<span class="number">1</span>]]&lt;&gt;<span class="string">".pdf"</span>&#125;&amp;@<span class="keyword">FileNameSplit</span>[ReplaceiablePhoneDir]],%];</span><br><span class="line"></span><br><span class="line">p=<span class="keyword">MatrixPlot</span>[mNorm,<span class="keyword">FrameTicks</span>-&gt;&#123;<span class="keyword">Transpose</span>@&#123;<span class="keyword">Range</span>[<span class="keyword">Length</span>@phone],<span class="keyword">Style</span>[#,<span class="number">13</span>]&amp;/@phone&#125;,<span class="keyword">Transpose</span>@&#123;<span class="keyword">Range</span>[<span class="keyword">Length</span>@phone],<span class="keyword">Rotate</span>[<span class="keyword">Style</span>[#,<span class="number">13</span>],<span class="number">30</span><span class="keyword">Degree</span>]&amp;/@<span class="keyword">Total</span>[m,&#123;<span class="number">1</span>&#125;]&#125;,<span class="keyword">Transpose</span>@&#123;<span class="keyword">Range</span>[<span class="keyword">Length</span>@phone],<span class="keyword">Style</span>[#,<span class="number">13</span>]&amp;/@<span class="keyword">Total</span>[m,&#123;<span class="number">2</span>&#125;]&#125;,</span><br><span class="line">     <span class="keyword">Transpose</span>@&#123;<span class="keyword">Range</span>[<span class="keyword">Length</span>@phone],<span class="keyword">Rotate</span>[<span class="keyword">Style</span>[#,<span class="number">13</span>],<span class="number">30</span><span class="keyword">Degree</span>]&amp;/@phone&#125;&#125;,<span class="keyword">ImageSize</span>-&gt;<span class="number">1700</span>];</span><br><span class="line"><span class="keyword">Column</span>[&#123;<span class="keyword">Row</span>[&#123;<span class="keyword">Rotate</span>[<span class="string">"actual class"</span>,<span class="number">90</span> <span class="keyword">Degree</span>],p&#125;,<span class="keyword">Alignment</span>-&gt;<span class="keyword">Center</span>],<span class="keyword">Spacer</span>@<span class="number">5</span>,<span class="string">"predicted class"</span>&#125;,<span class="keyword">Alignment</span>-&gt;<span class="keyword">Center</span>];<span class="keyword">SystemOpen</span>@<span class="keyword">Export</span>[<span class="keyword">FileNameJoin</span>@<span class="keyword">Flatten</span>[&#123;<span class="keyword">Most</span>@#,<span class="string">"ConfusionMatrixPlotBeautiful_"</span>&lt;&gt;<span class="keyword">StringSplit</span>[<span class="keyword">StringSplit</span>[<span class="keyword">Last</span>@#,<span class="string">" "</span>][[<span class="number">2</span>]],<span class="string">"."</span>][[<span class="number">1</span>]]&lt;&gt;<span class="string">".pdf"</span>&#125;&amp;@<span class="keyword">FileNameSplit</span>[ReplaceiablePhoneDir]],%];</span><br></pre></td></tr></table></figure>
<img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/1.png" class="">
<img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/2.png" class="">
<h1 id="ä½¿ç”¨Tensorboard"><a href="#ä½¿ç”¨Tensorboard" class="headerlink" title="ä½¿ç”¨Tensorboard"></a>ä½¿ç”¨Tensorboard</h1><p>ä¼˜ç‚¹</p>
<ul>
<li>å¯ä»¥äº¤äº’</li>
<li>å¯ä»¥åŠ¨æ€è§‚å¯Ÿèšç±»æƒ…å†µ</li>
<li>å¯ä»¥å­˜å‚¨é™ç»´çš„ç»“æœ</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line"><span class="keyword">from</span> tensorflow.contrib.tensorboard.plugins <span class="keyword">import</span> projector</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">BinaryRead</span><span class="params">(datafile,column)</span>:</span></span><br><span class="line">    data = np.fromfile(datafile,dtype=np.float32)</span><br><span class="line">    LengthOfFile=len(data)</span><br><span class="line">    <span class="keyword">assert</span>(LengthOfFile)</span><br><span class="line">    <span class="keyword">assert</span>((LengthOfFile%column)==<span class="number">0</span>)</span><br><span class="line">    data.shape = [int(LengthOfFile/column),column]</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">LOG_DIR = <span class="string">'logs'</span></span><br><span class="line">metadata = os.path.join(LOG_DIR, <span class="string">'metadata.tsv'</span>)</span><br><span class="line"></span><br><span class="line">data_path=<span class="string">'Unit2Vec_UnitVector.dat'</span></span><br><span class="line">name=<span class="string">'Unit2Vec'</span>a</span><br><span class="line">all_data=BinaryRead(data_path,<span class="number">32</span>)</span><br><span class="line">UnitVector = tf.Variable(all_data, name=name)</span><br><span class="line">txt = open(<span class="string">r"../phone_name_frame_id.csv"</span>).readlines()</span><br><span class="line">all_label = list(map(<span class="keyword">lambda</span> i:i.split(<span class="string">'\t'</span>)[<span class="number">1</span>],txt))</span><br><span class="line">all_dur = list(map(<span class="keyword">lambda</span> i:int(i.split(<span class="string">'\t'</span>)[<span class="number">3</span>]),txt))</span><br><span class="line">mydict=&#123;p:i <span class="keyword">for</span> i,p <span class="keyword">in</span> enumerate(sorted(list(set(all_label))))&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(metadata, <span class="string">'w'</span>) <span class="keyword">as</span> metadata_file:</span><br><span class="line">    metadata_file.write(<span class="string">'Index\tColorIndex\tPhoneme\tPhoneDur\n'</span>)</span><br><span class="line">    <span class="keyword">for</span> i,row <span class="keyword">in</span> enumerate(all_label):</span><br><span class="line">        metadata_file.write(<span class="string">'%d\t%d\t%s\t%d\n'</span> % (i,mydict[row],row,all_dur[i]))</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    saver = tf.train.Saver([UnitVector])</span><br><span class="line"></span><br><span class="line">    sess.run(UnitVector.initializer)</span><br><span class="line">    saver.save(sess, os.path.join(LOG_DIR, name+<span class="string">'.ckpt'</span>))</span><br><span class="line"></span><br><span class="line">    config = projector.ProjectorConfig()</span><br><span class="line">    <span class="comment"># One can add multiple embeddings.</span></span><br><span class="line">    embedding = config.embeddings.add()</span><br><span class="line">    embedding.tensor_name = UnitVector.name</span><br><span class="line">    <span class="comment"># Link this tensor to its metadata file (e.g. labels).</span></span><br><span class="line">    embedding.metadata_path = <span class="string">'metadata.tsv'</span></span><br><span class="line">    <span class="comment"># Saves a config file that TensorBoard will read during startup.</span></span><br><span class="line">    projector.visualize_embeddings(tf.summary.FileWriter(LOG_DIR), config)</span><br></pre></td></tr></table></figure>
<p>PCA<br><img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/pca.gif" class=""></p>
<p>éš”ç¦»æŸ¥çœ‹ç›¸åŒéŸ³ç´ å¯¹åº”çš„ç‚¹ï¼ˆä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼ï¼‰<br><img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/a.png" class=""></p>
<p>tSNE<br><img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/tsne.png" class=""></p>
<p>ç­›é€‰ç‚¹å¹¶å¯è§†åŒ–å…¶ä»–ç‰¹å¾æ¯”å¦‚æ—¶é•¿<br><img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/sel.gif" class=""></p>
<p>ç¼ºç‚¹åœ¨äº</p>
<ul>
<li>ä¸èƒ½å¬éŸ³ç´ å¯¹åº”çš„å£°éŸ³</li>
<li>tSNEç»“æœä¸å¦‚Mathematicaå¥½,è€Œä¸”mmaä¹Ÿæ˜¯å®Œå…¨ä¸çŸ¥é“labelä¿¡æ¯å»åšé™ç»´çš„</li>
<li>ä¸èƒ½åœ¨å·²ç»ç»è¿‡tSNEé™ç»´å¹¶æ˜¾ç¤ºæ‰€æœ‰éŸ³ç´ ç±»åˆ«çš„æƒ…å†µä¸‹ï¼ŒæŸ¥çœ‹æŸä¸ªéŸ³ç´ å›¢çš„éŸ³ç´ æ—¶é•¿åˆ†å¸ƒæƒ…å†µã€‚ä¹Ÿå°±æ˜¯ä¸»å›¾ä¸èƒ½åŒæ—¶æŸ¥çœ‹å¤šç§ç‰¹å¾ï¼Œè‡ªå®šä¹‰ç¨‹åº¦ä½</li>
</ul>
<h1 id="D3-jsé˜¶æ®µ"><a href="#D3-jsé˜¶æ®µ" class="headerlink" title="D3.jsé˜¶æ®µ"></a>D3.jsé˜¶æ®µ</h1><p>ä½¿ç”¨D3ç‰ˆæœ¬æ˜¯5.5.0<br>å› ä¸ºæˆ‘çƒ­çˆ±å¯è§†åŒ–ï¼Œæ‰€ä»¥å†³å®šå­¦ä¹ D3.jsï¼Œç›®å‰æœ€æµè¡Œçš„å¯è§†åŒ–åº“ä¹‹ä¸€ï¼Œä¸ä»…å¯ä»¥å­¦ä¹ å‰ç«¯çŸ¥è¯†,Javascriptè¿˜å¯ä»¥é€šè¿‡çœ‹åˆ«äººçš„å¯è§†åŒ–é¡¹ç›®åŸ¹å…»è‰ºæœ¯ç›´è§‰</p>
<p>Githubåœ°å€è§æˆ‘çš„<a href="https://github.com/xiaozhah/Vis-UnitVector" target="_blank" rel="noopener">Vis-UnitVector</a></p>
<p>åœ¨ä»¥ä¸‹ä»£ç ä¸­ï¼Œé¢œè‰²æ¸²æŸ“çš„æ–¹å¼å’Œä»¥å‰mathematicaä¸€æ ·ï¼Œåªæ˜¯èƒŒæ™¯è‰²æ¢æˆäº†é»‘è‰²ï¼Œæ›´é…·äº†æ˜¯ä¸æ˜¯ğŸ˜<br>ä¹‹å‰Mathematicaé¢œè‰²æ˜¯è¿™æ ·ä½¿ç”¨çš„, å°±æ˜¯ç¬¬äºŒä¸ªè¾“å‡ºçš„61ç§é¢œè‰²ï¼Œç°åœ¨æŠŠå®ƒè½¬åŒ–ä¸ºäº†åå…­è¿›åˆ¶å½¢å¼<br><img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/scale.png" class=""></p>
<p>åˆæœŸä»£ç ç®€å•åªèƒ½æ˜¾ç¤ºé™æ€å›¾<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vis UnitVector<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"d3/d3.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">            <span class="comment">/* No style rules here yet */</span>       </span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">            <span class="comment">//Width and height</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> w = <span class="number">1170</span>, h=<span class="number">680</span>;</span></span><br><span class="line">            </span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> dataset, cur_lab, selectQ = <span class="literal">false</span>; <span class="comment">// a global</span></span></span><br><span class="line"><span class="actionscript">            d3.json(<span class="string">"Unit2Vec_tSNE.json"</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(json)</span> </span></span></span><br><span class="line">            &#123;</span><br><span class="line">              dataset = json;</span><br><span class="line">              visualize();</span><br><span class="line">            &#125;);</span><br><span class="line">    </span><br><span class="line"><span class="actionscript">            <span class="function"><span class="keyword">function</span> <span class="title">visualize</span><span class="params">()</span></span></span></span><br><span class="line">            &#123;</span><br><span class="line"><span class="actionscript">                <span class="comment">//Create SVG element</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> svg = d3.select(<span class="string">"body"</span>)</span></span><br><span class="line"><span class="actionscript">                .append(<span class="string">"svg"</span>)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"width"</span>, w)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"height"</span>, h);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                <span class="comment">//åˆ›å»ºèƒŒæ™¯ç”¨äºè§¦å‘ç‚¹å‡»äº‹ä»¶ï¼ˆé¢œè‰²å¤ä½ï¼‰</span></span></span><br><span class="line"><span class="actionscript">                svg.append(<span class="string">"rect"</span>)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"x"</span>, <span class="number">0</span>)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"y"</span>, <span class="number">0</span>)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"width"</span>, w)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"height"</span>, h)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"fill"</span>,<span class="string">"black"</span>)</span></span><br><span class="line"><span class="actionscript">                .on(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span><span class="params">(d)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//è§¦å‘èƒŒæ™¯ç‚¹å‡»äº‹ä»¶ï¼Œå¤ä½é¢œè‰²çš„äº‹ä»¶</span></span></span><br><span class="line"><span class="actionscript">                    d3.selectAll(<span class="string">"circle"</span>)</span></span><br><span class="line"><span class="actionscript">                    .attr(<span class="string">"fill"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">return</span> color_map(d3.values(d)[<span class="number">0</span>].lab);</span></span><br><span class="line">                        &#125;);</span><br><span class="line"><span class="actionscript">                    <span class="comment">//ç»™æ–‡æœ¬ä¼ ç©ºå­—ç¬¦ä¸²ï¼Œå› ä¸ºå½“å‰ç‚¹å‡»çš„æ˜¯èƒŒæ™¯è€Œæ²¡ç‚¹å‡»ä»»ä½•ç‚¹</span></span></span><br><span class="line"><span class="actionscript">                    d3.select(<span class="string">"text"</span>).text(<span class="string">""</span>);</span></span><br><span class="line"><span class="actionscript">                    selectQ = <span class="literal">false</span>;</span></span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">                <span class="comment">//æ·»åŠ æ–‡æœ¬æ˜¾ç¤ºå½“å‰ç‚¹å‡»çš„ç‚¹å¯¹åº”çš„éŸ³ç´ ç±»åˆ«</span></span></span><br><span class="line"><span class="actionscript">                svg.append(<span class="string">"text"</span>)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"x"</span>,<span class="number">100</span>)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"y"</span>,<span class="number">80</span>)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"font-size"</span>,<span class="number">50</span>);</span></span><br><span class="line">                </span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> min_max_x = d3.extent(dataset,<span class="function"><span class="keyword">function</span><span class="params">(d)</span></span>&#123;<span class="keyword">return</span> d3.values(d)[<span class="number">0</span>].pos[<span class="number">0</span>]&#125;);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> min_x = min_max_x[<span class="number">0</span>];</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> max_x = min_max_x[<span class="number">1</span>];</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> min_max_y = d3.extent(dataset,<span class="function"><span class="keyword">function</span><span class="params">(d)</span></span>&#123;<span class="keyword">return</span> d3.values(d)[<span class="number">0</span>].pos[<span class="number">1</span>]&#125;);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> min_y = min_max_y[<span class="number">0</span>];</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> max_y = min_max_y[<span class="number">1</span>];</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                <span class="comment">//åˆ›å»ºæ˜ å°„ç‚¹ä½ç½®çš„æ¯”ä¾‹å°º</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> xScale = d3.scaleLinear().domain([min_x,max_x]).range([<span class="number">0</span>,w]);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> yScale = d3.scaleLinear().domain([min_y,max_y]).range([h,<span class="number">0</span>]);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> phoneme = [<span class="string">"a"</span>, <span class="string">"ai"</span>, <span class="string">"an"</span>, <span class="string">"ang"</span>, <span class="string">"ao"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"ch"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>, <span class="string">"ei"</span>, <span class="string">"en"</span>, <span class="string">"eng"</span>, <span class="string">"er"</span>, <span class="string">"f"</span>, <span class="string">"g"</span>, <span class="string">"h"</span>, <span class="string">"i"</span>, <span class="string">"ia"</span>, <span class="string">"ian"</span>, <span class="string">"iang"</span>, <span class="string">"iao"</span>, <span class="string">"ie"</span>, <span class="string">"ii"</span>, <span class="string">"iii"</span>, <span class="string">"in"</span>, <span class="string">"ing"</span>, <span class="string">"iong"</span>, <span class="string">"iou"</span>, <span class="string">"j"</span>, <span class="string">"k"</span>, <span class="string">"l"</span>, <span class="string">"m"</span>, <span class="string">"n"</span>, <span class="string">"o"</span>, <span class="string">"ong"</span>, <span class="string">"ou"</span>, <span class="string">"p"</span>, <span class="string">"q"</span>, <span class="string">"r"</span>, <span class="string">"s"</span>, <span class="string">"sh"</span>, <span class="string">"sil"</span>, <span class="string">"sp"</span>, <span class="string">"t"</span>, <span class="string">"u"</span>, <span class="string">"ua"</span>, <span class="string">"uai"</span>, <span class="string">"uan"</span>, <span class="string">"uang"</span>, <span class="string">"uei"</span>, <span class="string">"uen"</span>, <span class="string">"ueng"</span>, <span class="string">"uo"</span>, <span class="string">"v"</span>, <span class="string">"van"</span>, <span class="string">"ve"</span>, <span class="string">"vn"</span>, <span class="string">"x"</span>, <span class="string">"z"</span>, <span class="string">"zh"</span>]</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> color = [<span class="string">"#781c86"</span>, <span class="string">"#6d1c90"</span>, <span class="string">"#621d99"</span>, <span class="string">"#571ea2"</span>, <span class="string">"#4e20ab"</span>, <span class="string">"#4a27b2"</span>,<span class="string">"#462eb9"</span>, <span class="string">"#4236c1"</span>, <span class="string">"#403ec6"</span>, <span class="string">"#3f47c9"</span>, <span class="string">"#3f51cc"</span>, <span class="string">"#3e5acf"</span>,<span class="string">"#3f63cf"</span>, <span class="string">"#416bce"</span>, <span class="string">"#4274ce"</span>, <span class="string">"#447ccd"</span>, <span class="string">"#4783c8"</span>, <span class="string">"#498ac4"</span>, <span class="string">"#4c90c0"</span>, <span class="string">"#4f97bb"</span>, <span class="string">"#539bb5"</span>, <span class="string">"#56a0ae"</span>, <span class="string">"#5aa5a8"</span>, <span class="string">"#5ea9a1"</span>, <span class="string">"#63ac9a"</span>, <span class="string">"#68af93"</span>, <span class="string">"#6cb28c"</span>, <span class="string">"#72b485"</span>, <span class="string">"#78b67e"</span>, <span class="string">"#7db877"</span>, <span class="string">"#83ba70"</span>, <span class="string">"#89bb6b"</span>, <span class="string">"#90bc65"</span>, <span class="string">"#96bd60"</span>, <span class="string">"#9dbe5a"</span>, <span class="string">"#a3be56"</span>, <span class="string">"#aabd52"</span>, <span class="string">"#b0bd4e"</span>, <span class="string">"#b7bd4b"</span>, <span class="string">"#bdbb48"</span>, <span class="string">"#c3ba46"</span>, <span class="string">"#c9b843"</span>, <span class="string">"#ceb541"</span>, <span class="string">"#d3b240"</span>, <span class="string">"#d8ae3e"</span>, <span class="string">"#dcab3c"</span>, <span class="string">"#dfa53b"</span>, <span class="string">"#e19f3a"</span>, <span class="string">"#e49938"</span>, <span class="string">"#e69237"</span>, <span class="string">"#e68a35"</span>, <span class="string">"#e68133"</span>, <span class="string">"#e67832"</span>, <span class="string">"#e56e30"</span>, <span class="string">"#e4632e"</span>, <span class="string">"#e2582c"</span>, <span class="string">"#e04e29"</span>, <span class="string">"#df4327"</span>, <span class="string">"#dd3726"</span>, <span class="string">"#dc2c24"</span>, <span class="string">"#db2122"</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                <span class="comment">//åˆ›å»ºéŸ³ç´ ä¸å¯¹åº”é¢œè‰²çš„åºæ•°æ¯”ä¾‹å°º</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> color_map = d3.scaleOrdinal()</span></span><br><span class="line">                            .domain(phoneme)</span><br><span class="line">                            .range(color);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">                <span class="comment">//åˆ›å»ºä¸€ä¸ªåŒ…å«æ¯”ä¾‹å°ºçš„å­—å…¸ï¼Œå¯ä»¥å°†éŸ³ç´ æ—¶é•¿æ˜ å°„åœ¨[-2,2]å†…</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> color_map_dict = <span class="keyword">new</span> <span class="built_in">Array</span>();</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; phoneme.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> min_max_dur = d3.extent(</span></span><br><span class="line"><span class="actionscript">                        dataset.filter(<span class="function"><span class="keyword">function</span><span class="params">(d)</span> </span></span></span><br><span class="line"><span class="actionscript">                        &#123;<span class="keyword">return</span> d3.values(d)[<span class="number">0</span>].lab == phoneme[i];&#125;),</span></span><br><span class="line"><span class="actionscript">                        <span class="function"><span class="keyword">function</span><span class="params">(d)</span></span>&#123;<span class="keyword">return</span> d3.values(d)[<span class="number">0</span>].dur&#125;);</span></span><br><span class="line"></span><br><span class="line">                    color_map_dict[phoneme[i]] = d3.scaleLinear()</span><br><span class="line">                                        .domain([min_max_dur[0],min_max_dur[1]])</span><br><span class="line">                                        .range([-2,2]);</span><br><span class="line">                &#125;                </span><br><span class="line"></span><br><span class="line"><span class="actionscript">                <span class="comment">//è®¾ç½®ç‚¹çš„ç›¸å…³äº‹ä»¶å±æ€§</span></span></span><br><span class="line"><span class="actionscript">                svg.selectAll(<span class="string">"circle"</span>)</span></span><br><span class="line">                .data(dataset)</span><br><span class="line">                .enter()</span><br><span class="line"><span class="actionscript">                .append(<span class="string">"circle"</span>)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"cx"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> xScale(d3.values(d)[<span class="number">0</span>].pos[<span class="number">0</span>]);</span></span><br><span class="line">                &#125;)</span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"cy"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> yScale(d3.values(d)[<span class="number">0</span>].pos[<span class="number">1</span>]);</span></span><br><span class="line">                &#125;)</span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"r"</span>, <span class="number">3</span>)</span></span><br><span class="line"><span class="actionscript">                .attr(<span class="string">"fill"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> color_map(d3.values(d)[<span class="number">0</span>].lab);</span></span><br><span class="line">                &#125;)</span><br><span class="line"><span class="actionscript">                .call(d3.zoom().on(<span class="string">"zoom"</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                    svg.attr(<span class="string">"transform"</span>,d3.event.transform);</span></span><br><span class="line">                &#125;))</span><br><span class="line"><span class="actionscript">                .on(<span class="string">"mouseover"</span>,<span class="function"><span class="keyword">function</span><span class="params">(d)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> info = d3.values(d)[<span class="number">0</span>]</span></span><br><span class="line">                    if(selectQ)&#123;</span><br><span class="line">                        if(info.lab == cur_lab)</span><br><span class="line"><span class="actionscript">                            <span class="keyword">new</span> Audio(<span class="string">"wav_phone/"</span>+info.name+<span class="string">".wav"</span>).play();</span></span><br><span class="line">                    &#125;</span><br><span class="line"><span class="actionscript">                    <span class="keyword">else</span></span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">new</span> Audio(<span class="string">"wav_phone/"</span>+info.name+<span class="string">".wav"</span>).play();</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//ç»™æ–‡æœ¬ä¼ å½“å‰é¼ æ ‡æ»‘è¿‡çš„éŸ³ç´ å</span></span></span><br><span class="line"><span class="actionscript">                    d3.select(<span class="string">"text"</span>)</span></span><br><span class="line">                    .text(info.lab)</span><br><span class="line"><span class="actionscript">                    .attr(<span class="string">"fill"</span>,<span class="string">"white"</span>);</span></span><br><span class="line">                &#125;)</span><br><span class="line"><span class="actionscript">                .on(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span><span class="params">(d)</span></span>&#123;</span></span><br><span class="line">                    cur_lab = d3.values(d)[0].lab;</span><br><span class="line"><span class="actionscript">                    <span class="comment">//ç»™æŒ‡å®šç‚¹ä¸Šå½©è‰²ï¼Œå¹¶æ ¹æ®æ¯ä¸ªå•å…ƒæ—¶é•¿ä¸åŒä¸Šä¸ä¸€æ ·çš„äº®åº¦</span></span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//æ—¶é•¿è¶Šå°è¶ŠæŒ‰ï¼Œè¶Šå¤§è¶Šäº®</span></span></span><br><span class="line"><span class="actionscript">                    d3.selectAll(<span class="string">"circle"</span>).filter(<span class="function"><span class="keyword">function</span><span class="params">(d)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">return</span> d3.values(d)[<span class="number">0</span>].lab == cur_lab;</span></span><br><span class="line">                    &#125;)</span><br><span class="line"><span class="actionscript">                    .attr(<span class="string">"fill"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">var</span> info = d3.values(d)[<span class="number">0</span>]</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">return</span> d3.rgb(color_map(info.lab)).darker(color_map_dict[info.lab](info.dur));</span></span><br><span class="line">                        &#125;)</span><br><span class="line"><span class="actionscript">                    <span class="comment">//ç»™å…¶ä½™ç‚¹ä¸Šç°è‰²</span></span></span><br><span class="line"><span class="actionscript">                    d3.selectAll(<span class="string">"circle"</span>).filter(<span class="function"><span class="keyword">function</span><span class="params">(d)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">return</span> d3.values(d)[<span class="number">0</span>].lab != cur_lab;</span></span><br><span class="line">                    &#125;)</span><br><span class="line"><span class="actionscript">                    .attr(<span class="string">"fill"</span>,<span class="string">"grey"</span>);</span></span><br><span class="line"><span class="actionscript">                    selectQ = <span class="literal">true</span>;</span></span><br><span class="line">                &#125;)</span><br><span class="line">                ;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æ•´ä½“å›¾çš„å±•ç¤º<br><img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/3.png" class=""><br>å±€éƒ¨å›¾çš„å±•ç¤ºï¼Œé€‰ä¸­æŸä¸€ä¸ªç‚¹ä¹‹å<br><img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/4.png" class=""></p>
<p>æ²¡å¯¹æ¯”æ²¡ä¼¤å®³ï¼Œä¸ºä»€ä¹ˆD3ç”»çš„å›¾é¢œè‰²è¿™ä¹ˆå¥½çœ‹æ~</p>
<h1 id="ç»§ç»­æ¢ç´¢â€¦"><a href="#ç»§ç»­æ¢ç´¢â€¦" class="headerlink" title="ç»§ç»­æ¢ç´¢â€¦"></a>ç»§ç»­æ¢ç´¢â€¦</h1><h2 id="æ¯”å¦‚ç¦»æŸéŸ³ç´ æœ€è¿‘çš„éŸ³ç´ ä»¬æ˜¯ä»€ä¹ˆæ ·çš„åˆ†å¸ƒå‘¢ï¼Ÿ"><a href="#æ¯”å¦‚ç¦»æŸéŸ³ç´ æœ€è¿‘çš„éŸ³ç´ ä»¬æ˜¯ä»€ä¹ˆæ ·çš„åˆ†å¸ƒå‘¢ï¼Ÿ" class="headerlink" title="æ¯”å¦‚ç¦»æŸéŸ³ç´ æœ€è¿‘çš„éŸ³ç´ ä»¬æ˜¯ä»€ä¹ˆæ ·çš„åˆ†å¸ƒå‘¢ï¼Ÿ"></a>æ¯”å¦‚ç¦»æŸéŸ³ç´ æœ€è¿‘çš„éŸ³ç´ ä»¬æ˜¯ä»€ä¹ˆæ ·çš„åˆ†å¸ƒå‘¢ï¼Ÿ</h2><p>ç”¨Mathematicaæ¥æ¢ç´¢</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SetDirectory</span>[<span class="keyword">NotebookDirectory</span>[]];</span><br><span class="line">color = <span class="keyword">ColorData</span>[<span class="string">"Rainbow"</span>];</span><br><span class="line"><span class="comment">(*å¯¼å…¥æ•°æ®*)</span></span><br><span class="line">data = </span><br><span class="line">  <span class="keyword">Partition</span>[<span class="keyword">Import</span>[<span class="string">"./data/Unit2Vec_ori_UnitVector.dat"</span>, <span class="string">"Real32"</span>], </span><br><span class="line">   <span class="number">32</span>];</span><br><span class="line">phones = <span class="keyword">Import</span>[<span class="string">"./data/phone_name_frame_id.csv"</span>, <span class="string">"Table"</span>][[<span class="keyword">All</span>, <span class="number">2</span>]];</span><br><span class="line"><span class="comment">(*æ„é€ æœ€é‚»è¿‘å¯¹è±¡ï¼Œéå¸¸å¿«çš„*)</span></span><br><span class="line">n = <span class="keyword">Nearest</span>[data];</span><br><span class="line"><span class="comment">(*å»ºç«‹vector\[Rule]å¯¹åº”çš„ç´¢å¼•çš„å­—å…¸ï¼Œä¹Ÿæ˜¯ä¸ºäº†åŠ é€Ÿè¿ç®—ï¼Œä¸éœ€è¦æ¯æ¬¡æ±‚Position*)</span></span><br><span class="line"></span><br><span class="line">asso = <span class="keyword">Association</span>[<span class="keyword">Thread</span>[data -&gt; <span class="keyword">Range</span>@<span class="keyword">Length</span>@data]];</span><br><span class="line"><span class="comment">(*ç”»å›¾ï¼Œn[data[[i]],1000]ä»£è¡¨æ±‚1000è¿‘é‚»*)</span></span><br><span class="line"><span class="keyword">SeedRandom</span>[<span class="number">23333</span>];</span><br><span class="line"><span class="keyword">Grid</span>@<span class="keyword">Table</span>[</span><br><span class="line">  <span class="keyword">Module</span>[&#123;nearps = phones[[asso[#]]] &amp; /@ n[data[[i]], <span class="number">1000</span>], v&#125;, </span><br><span class="line">   v = <span class="keyword">Normal</span>[<span class="keyword">Sort</span>[<span class="keyword">Counts</span>[nearps], <span class="keyword">Greater</span>]]; &#123;phones[[i]], </span><br><span class="line">    <span class="keyword">BarChart</span>[</span><br><span class="line">     <span class="keyword">MapIndexed</span>[</span><br><span class="line">      <span class="keyword">Tooltip</span>[<span class="keyword">Style</span>[#<span class="number">1</span>[[<span class="number">2</span>]], </span><br><span class="line">         color@<span class="keyword">Rescale</span>[<span class="keyword">First</span>@#<span class="number">2</span>, &#123;<span class="keyword">Length</span>@v, <span class="number">1</span>&#125;]], #<span class="number">1</span>[[<span class="number">1</span>]]] &amp;, v], </span><br><span class="line">     <span class="keyword">BarSpacing</span> -&gt; &#123;<span class="number">0</span>, <span class="number">0</span>&#125;, <span class="keyword">Frame</span> -&gt; <span class="keyword">False</span>, <span class="keyword">Axes</span> -&gt; <span class="keyword">False</span>, </span><br><span class="line">     <span class="keyword">BarOrigin</span> -&gt; <span class="keyword">Left</span>, <span class="keyword">ChartLayout</span> -&gt; <span class="string">"Stacked"</span>, </span><br><span class="line">     <span class="keyword">PlotRange</span> -&gt; &#123;<span class="keyword">All</span>, &#123;<span class="number">.5</span>, <span class="number">1.5</span>&#125;&#125;, <span class="keyword">AspectRatio</span> -&gt; <span class="number">1</span>/<span class="number">10</span>, </span><br><span class="line">     <span class="keyword">ImageSize</span> -&gt; <span class="number">500</span>]&#125;], &#123;i, <span class="keyword">RandomSample</span>[<span class="keyword">Range</span>@<span class="keyword">Length</span>[data], <span class="number">12</span>]&#125;]</span><br></pre></td></tr></table></figure>
<p>ä¸Šè‰²è§„åˆ™ä¸ºï¼šæ ¹æ®1000è¿‘é‚»å†…å„ä¸ªéŸ³ç´ å‡ºç°çš„æ¬¡æ•°ä»å¤§åˆ°å°æ’åºï¼Œé¢œè‰²æŒ‰ç…§è¿™ä¸ªæ¬¡åºæ¸è¿›å˜åŒ–ã€‚<br>è¶Šé è¿‘å¼€å¤´è¡¨ç¤ºå‡ºç°è¿™ä¸ªéŸ³ç´ å‡ºç°æ¬¡æ•°è¶Šå¤šï¼Œå¯ä»¥çœ‹åˆ°å¶å°”ä¸€ä¸ªéŸ³ç´ çš„æœ€è¿‘1000è¿‘é‚»ä¸­æœ€å¤šå‡ºç°çš„éŸ³ç´ ç«Ÿç„¶ä¸æ˜¯è‡ªå·±ï¼Œè¿™åªèƒ½è¯´èšç±»æ•ˆæœä¸å¥½ã€‚å› ä¸ºè¿™æ˜¯éšæœºä»å‡ åä¸‡çš„æ ·æœ¬ä¸­æŠ½å‡ºçš„12ä¸ªä¾‹å­ï¼Œä»»æ„ä¸ªä½“è¢«æŠ½ä¸­çš„æ¦‚ç‡æ˜¯å¾ˆä½çš„<br><img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/DdQZKJ2I.jpg" class=""><br>å¯ä»¥çœ‹åˆ°éŸ³ç´ çš„æœ€è¿‘é‚»ä¹‹é—´ä¹Ÿæ˜¯è·ç¦»ç›¸è¿‘çš„éŸ³ç´ ï¼Œå‡ºç°æœ€å¤šçš„è¿˜æ˜¯è‡ªå·±ï¼Œå…¶æ¬¡æ˜¯ä¸å®ƒè¾ƒç›¸è¿‘çš„éŸ³ç´ </p>
<p>ä½†æ˜¯ä»…å®è§‚è¡¨ç¤ºä½†æ˜¯ç»†èŠ‚ä¸å¤Ÿï¼Œä¸èƒ½ä½“ç°ç¬¬Nè¿‘æ˜¯å“ªä¸ªéŸ³ç´ ä»¥åŠå¯è§†åŒ–æœ€è¿‘é‚»åˆ†å¸ƒçš„è¶‹åŠ¿<br>å› æ­¤ä¿®æ”¹ä¸º<br><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SeedRandom</span>[<span class="number">23333</span>];</span><br><span class="line"><span class="keyword">Grid</span>@<span class="keyword">Table</span>[</span><br><span class="line">  <span class="keyword">Module</span>[&#123;nearps = phones[[asso[#]]] &amp; /@ n[data[[i]], <span class="number">1000</span>], class, </span><br><span class="line">    col&#125;, class = <span class="keyword">Keys</span>@<span class="keyword">Sort</span>@<span class="keyword">Counts</span>[nearps];<span class="comment">(*å»ºç«‹é¢œè‰²æ˜ å°„*)</span></span><br><span class="line">   col = <span class="keyword">Association</span>[<span class="keyword">Thread</span>[class -&gt; <span class="keyword">Rescale</span>@<span class="keyword">Range</span>[<span class="keyword">Length</span>@class]]];</span><br><span class="line">   &#123;phones[[i]], </span><br><span class="line">    <span class="keyword">BarChart</span>[</span><br><span class="line">     <span class="keyword">Tooltip</span>[<span class="keyword">Function</span>[&#123;val&#125;, </span><br><span class="line">          <span class="keyword">Style</span>[val, <span class="keyword">ColorData</span>[<span class="string">"Rainbow"</span>, col[<span class="keyword">First</span>@#]]]]@<span class="keyword">Length</span>@#, </span><br><span class="line">        <span class="keyword">First</span>@#] &amp; /@ <span class="keyword">Split</span>[nearps], <span class="keyword">BarSpacing</span> -&gt; &#123;<span class="number">0</span>, <span class="number">0</span>&#125;, </span><br><span class="line">     <span class="keyword">Frame</span> -&gt; <span class="keyword">False</span>, <span class="keyword">Axes</span> -&gt; <span class="keyword">False</span>, <span class="keyword">BarOrigin</span> -&gt; <span class="keyword">Left</span>, </span><br><span class="line">     <span class="keyword">ChartLayout</span> -&gt; <span class="string">"Stacked"</span>, <span class="keyword">PlotRange</span> -&gt; &#123;<span class="keyword">All</span>, &#123;<span class="number">.5</span>, <span class="number">1.5</span>&#125;&#125;, </span><br><span class="line">     <span class="keyword">AspectRatio</span> -&gt; <span class="number">1</span>/<span class="number">10</span>, <span class="keyword">ImageSize</span> -&gt; <span class="number">500</span>]&#125;], &#123;i, </span><br><span class="line">   <span class="keyword">RandomSample</span>[<span class="keyword">Range</span>@<span class="keyword">Length</span>[data], <span class="number">12</span>]&#125;]</span><br></pre></td></tr></table></figure><br>æ¨ªè½´æ˜¯ç¬¬1è¿‘é‚»ã€ç¬¬2è¿‘é‚»ç›´åˆ°ç¬¬1000è¿‘é‚»ã€‚<br>ä¸Šè‰²è§„åˆ™ä¸ºï¼šé¢œè‰²æŒ‰ç…§è¿™ä¸ª1000è¿‘é‚»ä¸­ï¼ŒéŸ³ç´ æ‰€å‡ºç°çš„çš„é¢‘ç‡ä¸Šè‰²ï¼Œå‡ºç°è¶Šå¤šçš„éŸ³ç´ è¶Šåçº¢ã€‚<br><img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/MCuytZoP.jpg" class=""><br>å¯ä»¥çœ‹åˆ°ç»†èŠ‚ï¼Œæ··å ä¸¥é‡çš„è¯ï¼Œæœ€Nè¿‘é‚»ä¼šé¢‘ç¹è¢«å…¶ä»–éŸ³ç´ æ‰“æ–­<br>å°è¯•ç»™UnitVectoræ›´å¤šä¿¡æ¯çš„è¯ï¼Œæ··å å¯ä»¥å‡å°<br><img src="/2018/07/31/%E9%80%90%E6%B8%90%E5%AE%8C%E5%96%84%E8%81%9A%E7%B1%BB%E6%95%88%E6%9E%9C%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/q0jJIWG1.jpg" class=""></p>
]]></content>
      <categories>
        <category>å®éªŒé¡¹ç›®</category>
      </categories>
      <tags>
        <tag>Mathematica</tag>
        <tag>å¯è§†åŒ–</tag>
        <tag>Python</tag>
        <tag>JavaScript</tag>
        <tag>D3.js</tag>
      </tags>
  </entry>
</search>
